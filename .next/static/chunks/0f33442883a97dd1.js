(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72906,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),i=e.i(66027),l=e.i(54616),n=e.i(12598),r=e.i(71436),o=e.i(566),c=e.i(19455),d=e.i(57428),u=e.i(93479),h=e.i(10204),m=e.i(87486),x=e.i(76639),g=e.i(67489),p=e.i(75157);let j=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,p.cn)("w-full caption-bottom text-sm",e),...s})}));j.displayName="Table";let v=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("thead",{ref:t,className:(0,p.cn)("border-b border-border bg-muted/50 [&_tr]:border-b",e),...s}));v.displayName="TableHeader";let y=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tbody",{ref:t,className:(0,p.cn)("[&_tr:last-child]:border-0",e),...s}));y.displayName="TableBody",s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tfoot",{ref:t,className:(0,p.cn)("border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let f=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tr",{ref:t,className:(0,p.cn)("border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));f.displayName="TableRow";let b=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("th",{ref:t,className:(0,p.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));b.displayName="TableHead";let N=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("td",{ref:t,className:(0,p.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));N.displayName="TableCell",s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("caption",{ref:t,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption";var S=e.i(81140),w=e.i(30030),C=e.i(42727),I=e.i(96626),P=e.i(48425),T=e.i(86318),R=e.i(69340),D=e.i(10772),F="Tabs",[L,k]=(0,w.createContextScope)(F,[C.createRovingFocusGroupScope]),E=(0,C.createRovingFocusGroupScope)(),[q,B]=L(F),M=s.forwardRef((e,s)=>{let{__scopeTabs:t,value:i,onValueChange:l,defaultValue:n,orientation:r="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=(0,T.useDirection)(o),[h,m]=(0,R.useControllableState)({prop:i,onChange:l,defaultProp:n??"",caller:F});return(0,a.jsx)(q,{scope:t,baseId:(0,D.useId)(),value:h,onValueChange:m,orientation:r,dir:u,activationMode:c,children:(0,a.jsx)(P.Primitive.div,{dir:u,"data-orientation":r,...d,ref:s})})});M.displayName=F;var A="TabsList",z=s.forwardRef((e,s)=>{let{__scopeTabs:t,loop:i=!0,...l}=e,n=B(A,t),r=E(t);return(0,a.jsx)(C.Root,{asChild:!0,...r,orientation:n.orientation,dir:n.dir,loop:i,children:(0,a.jsx)(P.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...l,ref:s})})});z.displayName=A;var O="TabsTrigger",$=s.forwardRef((e,s)=>{let{__scopeTabs:t,value:i,disabled:l=!1,...n}=e,r=B(O,t),o=E(t),c=Q(r.baseId,i),d=U(r.baseId,i),u=i===r.value;return(0,a.jsx)(C.Item,{asChild:!0,...o,focusable:!l,active:u,children:(0,a.jsx)(P.Primitive.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:c,...n,ref:s,onMouseDown:(0,S.composeEventHandlers)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():r.onValueChange(i)}),onKeyDown:(0,S.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&r.onValueChange(i)}),onFocus:(0,S.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==r.activationMode;u||l||!e||r.onValueChange(i)})})})});$.displayName=O;var K="TabsContent",V=s.forwardRef((e,t)=>{let{__scopeTabs:i,value:l,forceMount:n,children:r,...o}=e,c=B(K,i),d=Q(c.baseId,l),u=U(c.baseId,l),h=l===c.value,m=s.useRef(h);return s.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(I.Presence,{present:n||h,children:({present:s})=>(0,a.jsx)(P.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:s&&r})})});function Q(e,a){return`${e}-trigger-${a}`}function U(e,a){return`${e}-content-${a}`}V.displayName=K;let H=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(z,{ref:t,className:(0,p.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));H.displayName=z.displayName;let W=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)($,{ref:t,className:(0,p.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));W.displayName=$.displayName;let G=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(V,{ref:t,className:(0,p.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));G.displayName=V.displayName;var _=e.i(27612),J=e.i(88511),X=e.i(7233),Y=e.i(55436),Z=e.i(39616),ee=e.i(32095),ea=e.i(75254);let es=(0,ea.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var et=e.i(37727);let ei=(0,ea.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),el=(0,ea.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var en=e.i(31278);let er={"01":"Agriculture","03":"Natural Resources & Conservation","04":"Architecture","05":"Area, Ethnic, & Gender Studies","09":"Communication & Journalism",10:"Communications Technologies",11:"Computer & Information Sciences",12:"Culinary & Personal Services",13:"Education",14:"Engineering",15:"Engineering Technologies",16:"Foreign Languages & Linguistics",19:"Family & Consumer Sciences",22:"Law",23:"English Language & Literature",24:"Liberal Arts & General Studies",25:"Library Science",26:"Biological Sciences",27:"Mathematics & Statistics",29:"Military Technologies",30:"Interdisciplinary Studies",31:"Parks, Recreation & Fitness",38:"Philosophy & Religious Studies",39:"Theology & Religious Vocations",40:"Physical Sciences",41:"Science Technologies",42:"Psychology",43:"Homeland Security & Law Enforcement",44:"Public Administration & Social Services",45:"Social Sciences",46:"Construction Trades",47:"Mechanic & Repair Technologies",48:"Precision Production",49:"Transportation & Materials Moving",50:"Visual & Performing Arts",51:"Health Professions",52:"Business",54:"History"};function eo({college:e,onSave:t,onCancel:i,isLoading:l}){let[n,r]=(0,s.useState)({name:e?.name||"",city:e?.city||"",state:e?.state||"",region:e?.region||"",website:e?.website||"",type:e?.type||"",size:e?.size||"",tuitionInState:e?.tuitionInState||void 0,tuitionOutOfState:e?.tuitionOutOfState||void 0,acceptanceRate:e?.acceptanceRate||void 0,enrollment:e?.enrollment||void 0,description:e?.description||""});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"name",children:"College Name *"}),(0,a.jsx)(u.Input,{id:"name",value:n.name,onChange:e=>r({...n,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"city",children:"City *"}),(0,a.jsx)(u.Input,{id:"city",value:n.city,onChange:e=>r({...n,city:e.target.value}),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"state",children:"State *"}),(0,a.jsx)(u.Input,{id:"state",value:n.state,onChange:e=>r({...n,state:e.target.value}),placeholder:"CA",required:!0,maxLength:2})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"region",children:"Region"}),(0,a.jsxs)(g.Select,{value:n.region||"",onValueChange:e=>r({...n,region:e}),children:[(0,a.jsx)(g.SelectTrigger,{children:(0,a.jsx)(g.SelectValue,{placeholder:"Select region"})}),(0,a.jsxs)(g.SelectContent,{children:[(0,a.jsx)(g.SelectItem,{value:"",children:"None"}),(0,a.jsx)(g.SelectItem,{value:"Northeast",children:"Northeast"}),(0,a.jsx)(g.SelectItem,{value:"South",children:"South"}),(0,a.jsx)(g.SelectItem,{value:"Midwest",children:"Midwest"}),(0,a.jsx)(g.SelectItem,{value:"West",children:"West"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"type",children:"Type"}),(0,a.jsxs)(g.Select,{value:n.type||"",onValueChange:e=>r({...n,type:e}),children:[(0,a.jsx)(g.SelectTrigger,{children:(0,a.jsx)(g.SelectValue,{placeholder:"Select type"})}),(0,a.jsxs)(g.SelectContent,{children:[(0,a.jsx)(g.SelectItem,{value:"",children:"None"}),(0,a.jsx)(g.SelectItem,{value:"Public",children:"Public"}),(0,a.jsx)(g.SelectItem,{value:"Private",children:"Private"}),(0,a.jsx)(g.SelectItem,{value:"Community",children:"Community"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"size",children:"Size"}),(0,a.jsxs)(g.Select,{value:n.size||"",onValueChange:e=>r({...n,size:e}),children:[(0,a.jsx)(g.SelectTrigger,{children:(0,a.jsx)(g.SelectValue,{placeholder:"Select size"})}),(0,a.jsxs)(g.SelectContent,{children:[(0,a.jsx)(g.SelectItem,{value:"",children:"None"}),(0,a.jsx)(g.SelectItem,{value:"Small",children:"Small"}),(0,a.jsx)(g.SelectItem,{value:"Medium",children:"Medium"}),(0,a.jsx)(g.SelectItem,{value:"Large",children:"Large"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"website",children:"Website"}),(0,a.jsx)(u.Input,{id:"website",type:"url",value:n.website||"",onChange:e=>r({...n,website:e.target.value}),placeholder:"https://example.edu"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"tuitionInState",children:"In-State Tuition ($)"}),(0,a.jsx)(u.Input,{id:"tuitionInState",type:"number",value:n.tuitionInState||"",onChange:e=>r({...n,tuitionInState:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"25000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"tuitionOutOfState",children:"Out-of-State Tuition ($)"}),(0,a.jsx)(u.Input,{id:"tuitionOutOfState",type:"number",value:n.tuitionOutOfState||"",onChange:e=>r({...n,tuitionOutOfState:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"45000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"acceptanceRate",children:"Acceptance Rate (%)"}),(0,a.jsx)(u.Input,{id:"acceptanceRate",type:"number",step:"0.1",min:"0",max:"100",value:n.acceptanceRate||"",onChange:e=>r({...n,acceptanceRate:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"25.5"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"enrollment",children:"Enrollment"}),(0,a.jsx)(u.Input,{id:"enrollment",type:"number",value:n.enrollment||"",onChange:e=>r({...n,enrollment:e.target.value?parseInt(e.target.value):void 0}),placeholder:"5000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"description",children:"Description"}),(0,a.jsx)(u.Input,{id:"description",value:n.description||"",onChange:e=>r({...n,description:e.target.value}),placeholder:"A brief description of the college..."})]}),(0,a.jsxs)(x.DialogFooter,{children:[(0,a.jsx)(c.Button,{type:"button",variant:"outline",onClick:i,disabled:l,children:"Cancel"}),(0,a.jsx)(c.Button,{type:"submit",disabled:l,children:l?"Saving...":e?"Update College":"Create College"})]})]})}function ec({school:e,onSave:t,onCancel:i,isLoading:l}){let[n,r]=(0,s.useState)({name:e?.name||"",collegeId:e?.collegeId||"",category:e?.category||"",cipCode:e?.cipCode||"",description:e?.description||"",website:e?.website||""}),[o,d]=(0,s.useState)(""),[p,j]=(0,s.useState)([]),[v,y]=(0,s.useState)(e?.collegeName||""),[f,b]=(0,s.useState)(!1),N=Object.values(er).sort();return(0,s.useEffect)(()=>{if(!o.trim()||o.length<2)return void j([]);let e=setTimeout(async()=>{try{let e=await fetch(`/api/admin/colleges?query=${encodeURIComponent(o)}&limit=10`,{credentials:"include"});if(e.ok){let a=await e.json();j(a.colleges||[])}}catch(e){console.error("Failed to search colleges:",e)}},300);return()=>clearTimeout(e)},[o]),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"schoolName",children:"School Name *"}),(0,a.jsx)(u.Input,{id:"schoolName",value:n.name,onChange:e=>r({...n,name:e.target.value}),placeholder:"e.g., Wharton School of Business",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"collegeSearch",children:"College *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Input,{id:"collegeSearch",value:v||o,onChange:e=>{d(e.target.value),y(""),r({...n,collegeId:""}),b(!0)},onFocus:()=>b(!0),placeholder:"Search for a college...",required:!n.collegeId}),n.collegeId&&(0,a.jsxs)(m.Badge,{variant:"secondary",className:"absolute right-2 top-1/2 -translate-y-1/2 cursor-pointer",onClick:()=>{y(""),d(""),r({...n,collegeId:""})},children:["Selected ",(0,a.jsx)(et.X,{className:"h-3 w-3 ml-1"})]}),f&&p.length>0&&!n.collegeId&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-48 overflow-y-auto",children:p.map(e=>(0,a.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>{r({...n,collegeId:e.id}),y(`${e.name} (${e.city}, ${e.state})`),b(!1),j([])},children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-muted-foreground ml-2",children:[e.city,", ",e.state]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"category",children:"Category *"}),(0,a.jsxs)(g.Select,{value:n.category,onValueChange:e=>r({...n,category:e}),children:[(0,a.jsx)(g.SelectTrigger,{children:(0,a.jsx)(g.SelectValue,{placeholder:"Select category"})}),(0,a.jsx)(g.SelectContent,{children:N.map(e=>(0,a.jsx)(g.SelectItem,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"cipCode",children:"CIP Code"}),(0,a.jsx)(u.Input,{id:"cipCode",value:n.cipCode||"",onChange:e=>r({...n,cipCode:e.target.value}),placeholder:"e.g., 52.02"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"schoolWebsite",children:"Website"}),(0,a.jsx)(u.Input,{id:"schoolWebsite",type:"url",value:n.website||"",onChange:e=>r({...n,website:e.target.value}),placeholder:"https://example.edu/school"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"schoolDescription",children:"Description"}),(0,a.jsx)(u.Input,{id:"schoolDescription",value:n.description||"",onChange:e=>r({...n,description:e.target.value}),placeholder:"Brief description of the school or program..."})]}),(0,a.jsxs)(x.DialogFooter,{children:[(0,a.jsx)(c.Button,{type:"button",variant:"outline",onClick:i,disabled:l,children:"Cancel"}),(0,a.jsx)(c.Button,{type:"submit",disabled:l||!n.collegeId||!n.category,children:l?"Saving...":e?"Update School":"Create School"})]})]})}function ed(){let[e,t]=(0,s.useState)(""),[r,h]=(0,s.useState)(1),[g,p]=(0,s.useState)(null),[S,w]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[P,T]=(0,s.useState)(new Set),R=(0,n.useQueryClient)(),{data:D,isLoading:F}=(0,i.useQuery)({queryKey:["/api/admin/schools",r,e],queryFn:()=>{let a=new URLSearchParams({page:r.toString(),limit:"25",sortBy:"name",sortOrder:"asc"});return e.trim()&&a.set("query",e.trim()),(0,o.adminRequest)(`/api/admin/schools?${a.toString()}`)}}),L=(0,l.useMutation)({mutationFn:e=>(0,o.adminRequest)("/api/admin/schools","POST",e),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/admin/schools"]}),w(!1)},onError:e=>{console.error("Create school error:",e)}}),k=(0,l.useMutation)({mutationFn:({id:e,data:a})=>(0,o.adminRequest)(`/api/admin/schools/${e}`,"PUT",a),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/admin/schools"]}),I(!1),p(null)},onError:e=>{console.error("Update school error:",e)}}),E=(0,l.useMutation)({mutationFn:e=>(0,o.adminRequest)(`/api/admin/schools/${e}`,"DELETE"),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/admin/schools"]})},onError:e=>{console.error("Delete school error:",e)}}),q=(0,l.useMutation)({mutationFn:e=>(0,o.adminRequest)("/api/admin/schools","DELETE",{ids:e}),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/admin/schools"]}),T(new Set)},onError:e=>{console.error("Bulk delete error:",e)}}),B=D?.schools||[],M=D?.total||0,A=Math.ceil(M/25);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(Y.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(u.Input,{placeholder:"Search schools by name, category...",value:e,onChange:e=>{t(e.target.value),h(1),T(new Set)},className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[P.size>0&&(0,a.jsxs)(c.Button,{variant:"destructive",size:"sm",onClick:()=>{let e=P.size;0!==e&&window.confirm(`Are you sure you want to delete ${e} school${e>1?"s":""}? This cannot be undone.`)&&q.mutate(Array.from(P))},disabled:q.isPending,children:[(0,a.jsx)(_.Trash2,{className:"h-4 w-4 mr-2"}),q.isPending?"Deleting...":`Delete ${P.size} selected`]}),(0,a.jsxs)(m.Badge,{variant:"secondary",children:[M," schools"]}),e&&(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{t(""),h(1)},children:"Clear"}),(0,a.jsxs)(x.Dialog,{open:S,onOpenChange:w,children:[(0,a.jsx)(x.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(c.Button,{children:[(0,a.jsx)(X.Plus,{className:"h-4 w-4 mr-2"}),"Add School"]})}),(0,a.jsxs)(x.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Create New School"}),(0,a.jsx)(x.DialogDescription,{children:"Add a new school or program to a college"})]}),(0,a.jsx)(ec,{onSave:e=>L.mutate(e),onCancel:()=>w(!1),isLoading:L.isPending})]})]})]})]}),F?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading schools..."}):0===B.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:e?"No schools match your search.":"No schools found. Run the enrichment script or add one manually!"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(j,{children:[(0,a.jsx)(v,{children:(0,a.jsxs)(f,{children:[(0,a.jsx)(b,{className:"w-10",children:(0,a.jsx)(d.Checkbox,{checked:B.length>0&&P.size===B.length,onCheckedChange:()=>{P.size===B.length?T(new Set):T(new Set(B.map(e=>e.id)))},"aria-label":"Select all"})}),(0,a.jsx)(b,{children:"Name"}),(0,a.jsx)(b,{children:"College"}),(0,a.jsx)(b,{children:"Category"}),(0,a.jsx)(b,{children:"Source"}),(0,a.jsx)(b,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(y,{children:B.map(e=>(0,a.jsxs)(f,{className:P.has(e.id)?"bg-muted/50":"",children:[(0,a.jsx)(N,{children:(0,a.jsx)(d.Checkbox,{checked:P.has(e.id),onCheckedChange:()=>{var a;return a=e.id,void T(e=>{let s=new Set(e);return s.has(a)?s.delete(a):s.add(a),s})},"aria-label":`Select ${e.name}`})}),(0,a.jsx)(N,{className:"font-medium",children:e.name}),(0,a.jsx)(N,{children:(0,a.jsxs)("span",{className:"text-sm",children:[e.collegeName||"â€”",e.collegeCity&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:[", ",e.collegeCity,", ",e.collegeState]})]})}),(0,a.jsx)(N,{children:(0,a.jsx)(m.Badge,{variant:"secondary",children:e.category})}),(0,a.jsx)(N,{children:(0,a.jsx)(m.Badge,{variant:"manual"===e.source?"default":"secondary",children:e.source})}),(0,a.jsx)(N,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{p(e),I(!0)},disabled:k.isPending||E.isPending,children:(0,a.jsx)(J.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{var a;return a=e.id,void(window.confirm("Are you sure you want to delete this school?")&&E.mutate(a))},disabled:E.isPending||k.isPending,className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(_.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]})}),A>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>{h(r-1),T(new Set)},disabled:1===r||F,children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",r," of ",A]}),(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>{h(r+1),T(new Set)},disabled:r===A||F,children:"Next"})]})]}),(0,a.jsx)(x.Dialog,{open:C,onOpenChange:I,children:(0,a.jsxs)(x.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Edit School"}),(0,a.jsx)(x.DialogDescription,{children:"Update school information"})]}),g&&(0,a.jsx)(ec,{school:g,onSave:e=>k.mutate({id:g.id,data:e}),onCancel:()=>{I(!1),p(null)},isLoading:k.isPending})]})})]})}function eu(){let[e,t]=(0,s.useState)(""),[r,d]=(0,s.useState)(""),h=(0,n.useQueryClient)(),{data:x,isLoading:g}=(0,i.useQuery)({queryKey:["/api/admin/allowed-emails"],queryFn:()=>(0,o.adminRequest)("/api/admin/allowed-emails")}),p=(0,l.useMutation)({mutationFn:e=>(0,o.adminRequest)("/api/admin/allowed-emails","POST",{email:e}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/allowed-emails"]}),t(""),d("")},onError:e=>{d(e.message||"Failed to add email")}}),S=(0,l.useMutation)({mutationFn:e=>(0,o.adminRequest)("/api/admin/allowed-emails","DELETE",{id:e}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/allowed-emails"]})},onError:e=>{console.error("Remove email error:",e)}}),w=x?.emails||[];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Only users with an email on this list can sign in. Add emails before inviting people to use the app."}),(0,a.jsxs)("form",{onSubmit:a=>{a.preventDefault();let s=e.trim().toLowerCase();s&&s.includes("@")?(d(""),p.mutate(s)):d("Please enter a valid email address")},className:"flex gap-2 max-w-lg",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(el,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(u.Input,{type:"email",placeholder:"user@example.com",value:e,onChange:e=>{t(e.target.value),d("")},className:"pl-10",disabled:p.isPending})]}),(0,a.jsx)(c.Button,{type:"submit",disabled:p.isPending||!e.trim(),children:p.isPending?(0,a.jsx)(en.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(X.Plus,{className:"h-4 w-4 mr-2"}),"Add"]})})]}),r&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-2",children:r})]}),g?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading allowed emails..."}):0===w.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No emails on the allowlist yet. Add one above to get started."}):(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(j,{children:[(0,a.jsx)(v,{children:(0,a.jsxs)(f,{children:[(0,a.jsx)(b,{children:"Email"}),(0,a.jsx)(b,{children:"Added"}),(0,a.jsx)(b,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(y,{children:w.map(e=>(0,a.jsxs)(f,{children:[(0,a.jsx)(N,{className:"font-medium",children:e.email}),(0,a.jsx)(N,{className:"text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)(N,{className:"text-right",children:(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{window.confirm(`Remove ${e.email} from the allowlist? They will no longer be able to sign in.`)&&S.mutate(e.id)},disabled:S.isPending,className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(_.Trash2,{className:"h-4 w-4"})})})]},e.id))})]})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(m.Badge,{variant:"secondary",children:[w.length," allowed email",1!==w.length?"s":""]})})]})}function eh(){let[e,t]=(0,s.useState)(""),[r,d]=(0,s.useState)(1),[h,g]=(0,s.useState)(null),[p,S]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),I=(0,n.useQueryClient)(),{data:P,isLoading:T}=(0,i.useQuery)({queryKey:["/api/admin/colleges",r,e],queryFn:()=>{let a=new URLSearchParams({page:r.toString(),limit:"25",sortBy:"name",sortOrder:"asc"});return e.trim()&&a.set("query",e.trim()),(0,o.adminRequest)(`/api/admin/colleges?${a.toString()}`)}}),R=(0,l.useMutation)({mutationFn:e=>(0,o.adminRequest)("/api/admin/colleges","POST",e),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/admin/colleges"]}),S(!1)},onError:e=>{console.error("Create error:",e)}}),D=(0,l.useMutation)({mutationFn:({id:e,data:a})=>(0,o.adminRequest)(`/api/admin/colleges/${e}`,"PUT",a),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/admin/colleges"]}),C(!1),g(null)},onError:e=>{console.error("Update error:",e)}}),F=(0,l.useMutation)({mutationFn:e=>(0,o.adminRequest)(`/api/admin/colleges/${e}`,"DELETE"),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/admin/colleges"]})},onError:e=>{console.error("Delete error:",e)}}),L=P?.colleges||[],k=P?.total||0,E=Math.ceil(k/25);return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"border-b bg-white",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(Z.Settings,{className:"h-6 w-6 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage colleges & schools"})]})]})})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)(M,{defaultValue:"colleges",children:[(0,a.jsxs)(H,{className:"mb-6",children:[(0,a.jsxs)(W,{value:"colleges",className:"gap-2",children:[(0,a.jsx)(es,{className:"h-4 w-4"}),"Colleges"]}),(0,a.jsxs)(W,{value:"schools",className:"gap-2",children:[(0,a.jsx)(ee.GraduationCap,{className:"h-4 w-4"}),"Schools"]}),(0,a.jsxs)(W,{value:"users",className:"gap-2",children:[(0,a.jsx)(ei,{className:"h-4 w-4"}),"Users"]})]}),(0,a.jsxs)(G,{value:"colleges",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(Y.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(u.Input,{placeholder:"Search colleges by name, city, state...",value:e,onChange:e=>{t(e.target.value),d(1)},className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(m.Badge,{variant:"secondary",children:[k," colleges"]}),e&&(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{t(""),d(1)},children:"Clear"}),(0,a.jsxs)(x.Dialog,{open:p,onOpenChange:S,children:[(0,a.jsx)(x.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(c.Button,{children:[(0,a.jsx)(X.Plus,{className:"h-4 w-4 mr-2"}),"Add College"]})}),(0,a.jsxs)(x.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Create New College"}),(0,a.jsx)(x.DialogDescription,{children:"Add a new college to the database"})]}),(0,a.jsx)(eo,{onSave:e=>R.mutate(e),onCancel:()=>S(!1),isLoading:R.isPending})]})]})]})]}),T?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading colleges..."}):0===L.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:e?"No colleges match your search.":"No colleges found. Start by adding one!"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(j,{children:[(0,a.jsx)(v,{children:(0,a.jsxs)(f,{children:[(0,a.jsx)(b,{children:"Name"}),(0,a.jsx)(b,{children:"Location"}),(0,a.jsx)(b,{children:"Type"}),(0,a.jsx)(b,{children:"Size"}),(0,a.jsx)(b,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(y,{children:L.map(e=>(0,a.jsxs)(f,{children:[(0,a.jsx)(N,{className:"font-medium",children:e.name}),(0,a.jsxs)(N,{children:[e.city,", ",e.state]}),(0,a.jsx)(N,{children:e.type?(0,a.jsx)(m.Badge,{variant:"secondary",children:e.type}):"-"}),(0,a.jsx)(N,{children:e.size||"-"}),(0,a.jsx)(N,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{g(e),C(!0)},disabled:D.isPending||F.isPending,children:(0,a.jsx)(J.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{var a;return a=e.id,void(window.confirm("Are you sure you want to delete this college?")&&F.mutate(a))},disabled:F.isPending||D.isPending,className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(_.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]})}),E>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>d(r-1),disabled:1===r||T,children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",r," of ",E]}),(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>d(r+1),disabled:r===E||T,children:"Next"})]})]}),(0,a.jsx)(x.Dialog,{open:w,onOpenChange:C,children:(0,a.jsxs)(x.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Edit College"}),(0,a.jsx)(x.DialogDescription,{children:"Update college information"})]}),h&&(0,a.jsx)(eo,{college:h,onSave:e=>D.mutate({id:h.id,data:e}),onCancel:()=>{C(!1),g(null)},isLoading:D.isPending})]})})]}),(0,a.jsx)(G,{value:"schools",children:(0,a.jsx)(ed,{})}),(0,a.jsx)(G,{value:"users",children:(0,a.jsx)(eu,{})})]})})]})}function em(){let{user:e,isAdmin:i,isLoading:l}=(0,r.useAuth)(),n=(0,t.useRouter)();return((0,s.useEffect)(()=>{l||e&&i||n.push("/login")},[e,i,l,n]),l)?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(Z.Settings,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e&&i?(0,a.jsx)(eh,{}):null}e.s(["default",()=>em],72906)}]);