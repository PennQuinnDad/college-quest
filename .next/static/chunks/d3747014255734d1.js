(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(66027),r=e.i(93479),l=e.i(67489),i=e.i(19455),n=e.i(81140),d=e.i(20783),o=e.i(30030),c=e.i(69340),m=e.i(99682),x=e.i(35804),h=e.i(48425),u="Switch",[p,g]=(0,o.createContextScope)(u),[j,b]=p(u),f=s.forwardRef((e,a)=>{let{__scopeSwitch:r,name:l,checked:i,defaultChecked:o,required:m,disabled:x,value:p="on",onCheckedChange:g,form:b,...f}=e,[v,N]=s.useState(null),S=(0,d.useComposedRefs)(a,e=>N(e)),k=s.useRef(!1),C=!v||b||!!v.closest("form"),[$,M]=(0,c.useControllableState)({prop:i,defaultProp:o??!1,onChange:g,caller:u});return(0,t.jsxs)(j,{scope:r,checked:$,disabled:x,children:[(0,t.jsx)(h.Primitive.button,{type:"button",role:"switch","aria-checked":$,"aria-required":m,"data-state":w($),"data-disabled":x?"":void 0,disabled:x,value:p,...f,ref:S,onClick:(0,n.composeEventHandlers)(e.onClick,e=>{M(e=>!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,t.jsx)(y,{control:v,bubbles:!k.current,name:l,value:p,checked:$,required:m,disabled:x,form:b,style:{transform:"translateX(-100%)"}})]})});f.displayName=u;var v="SwitchThumb",N=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,l=b(v,a);return(0,t.jsx)(h.Primitive.span,{"data-state":w(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:s})});N.displayName=v;var y=s.forwardRef(({__scopeSwitch:e,control:a,checked:r,bubbles:l=!0,...i},n)=>{let o=s.useRef(null),c=(0,d.useComposedRefs)(o,n),h=(0,m.usePrevious)(r),u=(0,x.useSize)(a);return s.useEffect(()=>{let e=o.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==r&&t){let s=new Event("click",{bubbles:l});t.call(e,r),e.dispatchEvent(s)}},[h,r,l]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:c,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function w(e){return e?"checked":"unchecked"}y.displayName="SwitchBubbleInput";var S=e.i(75157);let k=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(f,{className:(0,S.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:(0,t.jsx)(N,{className:(0,S.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));k.displayName=f.displayName;var C=e.i(10204),$=e.i(55436),M=e.i(37727),R=e.i(90597),z=e.i(27612),F=e.i(92125),B=e.i(46798);function O({searchParams:e,onSearch:s}){let{data:n}=(0,a.useQuery)({queryKey:["/api/colleges/filters/states"],queryFn:async()=>{let e=await fetch("/api/colleges/filters/states");if(!e.ok)throw Error("Failed to fetch states");return e.json()}}),{data:d}=(0,a.useQuery)({queryKey:["/api/colleges/filters/types"],queryFn:async()=>{let e=await fetch("/api/colleges/filters/types");if(!e.ok)throw Error("Failed to fetch types");return e.json()}}),{data:o}=(0,a.useQuery)({queryKey:["/api/colleges/filters/regions"],queryFn:async()=>{let e=await fetch("/api/colleges/filters/regions");if(!e.ok)throw Error("Failed to fetch regions");return e.json()}}),{data:c}=(0,a.useQuery)({queryKey:["/api/colleges/filters/acceptance-ranges"],queryFn:async()=>{let e=await fetch("/api/colleges/filters/acceptance-ranges");if(!e.ok)throw Error("Failed to fetch acceptance ranges");return e.json()}}),{data:m}=(0,a.useQuery)({queryKey:["/api/schools/categories"],queryFn:async()=>{let e=await fetch("/api/schools/categories");if(!e.ok)throw Error("Failed to fetch program categories");return e.json()}}),{favoriteCount:x,clearAllFavorites:h}=(0,F.useFavorites)();return(0,t.jsx)("section",{className:"py-6 px-4 bg-card border-b border-border relative z-10",id:"search-section",children:(0,t.jsxs)("div",{className:"container mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"search-input",className:"sr-only",children:"Search colleges, programs, or locations"}),(0,t.jsxs)("div",{className:"relative max-w-md",children:[(0,t.jsx)(r.Input,{id:"search-input",name:"search",type:"text",placeholder:"Search colleges, programs, or locations...",value:e.query||"",onChange:e=>s({query:e.target.value}),className:"w-full pl-10 pr-10 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-ring","data-testid":"input-search"}),(0,t.jsx)($.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.query&&(0,t.jsx)("button",{onClick:()=>s({query:""}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-clear-search",children:(0,t.jsx)(M.X,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"state-select",className:"sr-only",children:"Filter by State"}),(0,t.jsxs)(l.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.states||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({states:e.length>0?e:void 0})}else s({states:[...a,t]})}},children:[(0,t.jsx)(l.SelectTrigger,{id:"state-select",className:"w-[140px]","data-testid":"select-state",children:(0,t.jsx)(l.SelectValue,{placeholder:e.states?.length?`${e.states.length} States`:"State"})}),(0,t.jsxs)(l.SelectContent,{children:[(e.states||[]).map(e=>(0,t.jsxs)(l.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(n||[]).filter(t=>!e.states?.includes(t)).map(e=>(0,t.jsx)(l.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)(l.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.regions||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({regions:e.length>0?e:void 0})}else s({regions:[...a,t]})}},children:[(0,t.jsx)(l.SelectTrigger,{id:"region-select",name:"region",className:"w-[140px]","data-testid":"select-region",children:(0,t.jsx)(l.SelectValue,{placeholder:e.regions?.length?`${e.regions.length} Regions`:"Region"})}),(0,t.jsxs)(l.SelectContent,{children:[(e.regions||[]).map(e=>(0,t.jsxs)(l.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(o||[]).filter(t=>!e.regions?.includes(t)).map(e=>(0,t.jsx)(l.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(l.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.types||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({types:e.length>0?e:void 0})}else s({types:[...a,t]})}},children:[(0,t.jsx)(l.SelectTrigger,{id:"type-select",name:"type",className:"w-[140px]","data-testid":"select-type",children:(0,t.jsx)(l.SelectValue,{placeholder:e.types?.length?`${e.types.length} Types`:"Type"})}),(0,t.jsxs)(l.SelectContent,{children:[(e.types||[]).map(e=>(0,t.jsxs)(l.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(d||[]).filter(t=>!e.types?.includes(t)).map(e=>(0,t.jsx)(l.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(l.Select,{value:e.size||"all",onValueChange:e=>s({size:"all"===e?void 0:e}),children:[(0,t.jsx)(l.SelectTrigger,{id:"size-select",name:"size",className:"w-[140px]","data-testid":"select-size",children:(0,t.jsx)(l.SelectValue,{placeholder:"Size"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"all",children:"All Sizes"}),(0,t.jsx)(l.SelectItem,{value:"Small",children:"Small"}),(0,t.jsx)(l.SelectItem,{value:"Medium",children:"Medium"}),(0,t.jsx)(l.SelectItem,{value:"Large",children:"Large"})]})]}),(0,t.jsxs)(l.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.acceptanceRanges||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({acceptanceRanges:e.length>0?e:void 0})}else s({acceptanceRanges:[...a,t]})}},children:[(0,t.jsx)(l.SelectTrigger,{id:"acceptance-ranges-select",name:"acceptanceRanges",className:"w-[180px]","data-testid":"select-acceptance-ranges",children:(0,t.jsx)(l.SelectValue,{placeholder:e.acceptanceRanges?.length?`${e.acceptanceRanges.length} Ranges`:"Acceptance Rate"})}),(0,t.jsxs)(l.SelectContent,{children:[(e.acceptanceRanges||[]).map(e=>(0,t.jsxs)(l.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(c||[]).filter(t=>!e.acceptanceRanges?.includes(t)).map(e=>(0,t.jsx)(l.SelectItem,{value:e,children:e},e))]})]}),m&&m.length>0&&(0,t.jsxs)(l.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.programCategories||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({programCategories:e.length>0?e:void 0})}else s({programCategories:[...a,t]})}},children:[(0,t.jsx)(l.SelectTrigger,{id:"program-category-select",name:"programCategory",className:"w-[180px]","data-testid":"select-program-category",children:(0,t.jsx)(l.SelectValue,{placeholder:e.programCategories?.length?`${e.programCategories.length} Programs`:"Program"})}),(0,t.jsxs)(l.SelectContent,{children:[(e.programCategories||[]).map(e=>(0,t.jsxs)(l.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(m||[]).filter(t=>!e.programCategories?.includes(t)).map(e=>(0,t.jsx)(l.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k,{id:"jesuit-filter",checked:e.jesuitOnly||!1,onCheckedChange:e=>s({jesuitOnly:e||void 0}),"data-testid":"switch-jesuit-only"}),(0,t.jsx)(C.Label,{htmlFor:"jesuit-filter",className:"text-sm font-medium cursor-pointer",children:"Jesuit Colleges Only"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 ml-auto",children:[(0,t.jsxs)(i.Button,{variant:e.showFavoritesOnly?"default":"outline",onClick:()=>{e.showFavoritesOnly?s({showFavoritesOnly:void 0}):s({query:"",states:void 0,regions:void 0,types:void 0,size:void 0,acceptanceRanges:void 0,programCategories:void 0,tuitionMin:void 0,tuitionMax:void 0,enrollmentMin:void 0,enrollmentMax:void 0,acceptanceRateMin:void 0,acceptanceRateMax:void 0,showFavoritesOnly:!0,jesuitOnly:void 0,page:1})},className:"flex items-center gap-2 h-10","data-testid":"button-show-favorites",children:[(0,t.jsx)(R.Heart,{className:`w-4 h-4 ${x>0?"text-red-500":"text-gray-400"}`}),"Favorites (",x,")"]}),x>0&&(0,t.jsx)(B.TooltipProvider,{children:(0,t.jsxs)(B.Tooltip,{children:[(0,t.jsx)(B.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),h(),e.showFavoritesOnly&&s({showFavoritesOnly:void 0})},className:"h-10 w-10 text-muted-foreground hover:text-destructive","data-testid":"button-clear-favorites",children:(0,t.jsx)(z.Trash2,{className:"w-4 h-4"})})}),(0,t.jsx)(B.TooltipContent,{children:(0,t.jsx)("p",{children:"Clear all favorites"})})]})})]})]})]})})}var A=e.i(22016),I=e.i(57428),L=e.i(78917),T=e.i(75254);let q=(0,T.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var E=e.i(64659);function P({colleges:e,searchParams:a,onSort:r}){let[l,n]=(0,s.useState)(new Set),{isFavorite:d,toggleFavorite:o,addMultipleFavorites:c,removeMultipleFavorites:m}=(0,F.useFavorites)(),x=e=>{let t=a.sortBy===e&&"asc"===a.sortOrder?"desc":"asc";r(e,t)},h=e.length>0&&l.size===e.length,u=Array.from(l),p=u.length>0&&u.every(e=>d(e)),g=e=>a.sortBy!==e?(0,t.jsx)(q,{className:"w-3 h-3 text-muted-foreground/50"}):"asc"===a.sortOrder?(0,t.jsx)(q,{className:"w-3 h-3 text-primary"}):(0,t.jsx)(E.ChevronDown,{className:"w-3 h-3 text-primary"}),j=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e):"N/A";return(0,t.jsxs)("div",{className:"space-y-4",children:[l.size>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-amber-800",children:[l.size," college",1===l.size?"":"s"," selected"]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{p?m(u):c(u)},"data-testid":"button-bulk-favorite",children:[(0,t.jsx)(R.Heart,{className:`w-4 h-4 mr-2 ${p?"fill-red-500 text-red-500":""}`}),p?"Remove from Favorites":"Add to Favorites"]})})]}),(0,t.jsx)("div",{className:"w-full overflow-x-auto bg-card rounded-lg border border-border",children:(0,t.jsxs)("table",{className:"w-full border-collapse","data-testid":"table-colleges",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border bg-gray-100",children:[(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground border-r border-border w-12",children:(0,t.jsx)(I.Checkbox,{checked:h,onCheckedChange:t=>{t?n(new Set(e.map(e=>e.id))):n(new Set)},"data-testid":"checkbox-select-all"})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[200px]",children:(0,t.jsxs)("button",{onClick:()=>x("name"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-name",children:["College Name",g("name")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[120px]",children:(0,t.jsxs)("button",{onClick:()=>x("location"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-location",children:["Location",g("location")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px]",children:(0,t.jsxs)("button",{onClick:()=>x("type"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-type",children:["Type",g("type")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[100px]",children:(0,t.jsxs)("button",{onClick:()=>x("region"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-region",children:["Region",g("region")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px]",children:(0,t.jsxs)("button",{onClick:()=>x("size"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-size",children:["Size",g("size")]})}),(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px]",children:(0,t.jsx)("span",{className:"flex items-center gap-1 justify-center text-sm",children:"Jesuit"})}),(0,t.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[120px]",children:(0,t.jsxs)("button",{onClick:()=>x("tuition"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-tuition",children:["Tuition",g("tuition")]})}),(0,t.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[120px]",children:(0,t.jsxs)("button",{onClick:()=>x("netCost"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-netcost",children:["Net Cost",g("netCost")]})}),(0,t.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[100px]",children:(0,t.jsxs)("button",{onClick:()=>x("acceptance"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-acceptance",children:["Acceptance",g("acceptance")]})}),(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground min-w-[80px]",children:(0,t.jsx)("span",{className:"flex items-center gap-1 justify-center text-sm",children:"Favorite"})}),(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground min-w-[100px]",children:(0,t.jsx)("span",{className:"flex items-center gap-1 justify-center text-sm",children:"Website"})})]})}),(0,t.jsx)("tbody",{children:e.map((e,s)=>{var a;return(0,t.jsxs)("tr",{className:`border-b border-border hover:bg-amber-50/50 transition-colors ${s%2==0?"bg-white":"bg-gray-50"} ${l.has(e.id)?"ring-2 ring-primary/20 bg-primary/5":""} ${d(e.id)?"bg-red-50":""}`,"data-testid":`row-college-${e.id}`,children:[(0,t.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,t.jsx)(I.Checkbox,{checked:l.has(e.id),onCheckedChange:t=>{var s;let a;return s=e.id,a=new Set(l),void(t?a.add(s):a.delete(s),n(a))},"data-testid":`checkbox-college-${e.id}`})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(A.default,{href:`/college/${e.id}`,children:(0,t.jsx)("div",{className:"text-sm font-medium text-primary hover:text-primary/80 cursor-pointer transition-colors","data-testid":`link-college-name-${e.id}`,children:e.name})})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsxs)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-location-${e.id}`,children:[e.city,", ",e.state]})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-type-${e.id}`,children:e.type||"N/A"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-region-${e.id}`,children:e.region||"N/A"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-size-${e.id}`,children:e.size||"N/A"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,t.jsx)("div",{className:"text-xs","data-testid":`text-jesuit-${e.id}`,children:e.jesuit?(0,t.jsx)("span",{className:"text-blue-600 font-medium",children:"✓ Yes"}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"No"})})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-right",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-tuition-${e.id}`,children:j(e.tuitionInState)})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-right",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-net-cost-${e.id}`,children:j(e.netCost)})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-right",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-acceptance-${e.id}`,children:(a=e.acceptanceRate)?`${a.toFixed(1)}%`:"N/A"})}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(i.Button,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:()=>o(e.id),"data-testid":`button-favorite-${e.id}`,children:(0,t.jsx)(R.Heart,{className:`w-4 h-4 ${d(e.id)?"fill-red-500 text-red-500":"text-gray-400 hover:text-red-400"}`})})})}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsx)("div",{className:"flex justify-center",children:e.website&&(0,t.jsx)(i.Button,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",asChild:!0,children:(0,t.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer","data-testid":`link-website-${e.id}`,children:(0,t.jsx)(L.ExternalLink,{className:"w-3 h-3"})})})})})]},e.id)})})]})})]})}var V=e.i(15288),D=e.i(87486),H=e.i(46897);function J({college:e,viewMode:s}){let{isFavorite:a,toggleFavorite:r}=(0,F.useFavorites)(),l=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e):"N/A",n=e=>e?`${e.toFixed(1)}%`:"N/A";return"list"===s?(0,t.jsx)(V.Card,{className:"hover:shadow-lg transition-shadow group","data-testid":`card-college-${e.id}`,children:(0,t.jsx)(V.CardContent,{className:"p-6",children:(0,t.jsx)("div",{className:"flex gap-6",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-card-foreground group-hover:text-primary transition-colors truncate","data-testid":`text-college-name-${e.id}`,children:e.name}),(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center",children:[(0,t.jsx)(H.MapPin,{className:"w-4 h-4 mr-1"}),(0,t.jsxs)("span",{"data-testid":`text-college-location-${e.id}`,children:[e.city,", ",e.state]})]})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>r(e.id),"data-testid":`button-favorite-${e.id}`,children:(0,t.jsx)(R.Heart,{className:`w-5 h-5 ${a(e.id)?"text-primary fill-current":"text-muted-foreground"}`})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Students:"}),(0,t.jsx)("div",{className:"font-medium","data-testid":`text-enrollment-${e.id}`,children:e.enrollment?.toLocaleString()||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tuition:"}),(0,t.jsx)("div",{className:"font-medium","data-testid":`text-tuition-${e.id}`,children:l(e.tuitionInState)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Acceptance:"}),(0,t.jsx)("div",{className:"font-medium","data-testid":`text-acceptance-${e.id}`,children:n(e.acceptanceRate)})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(D.Badge,{variant:"outline",className:"text-xs","data-testid":`badge-type-${e.id}`,children:e.type}),(0,t.jsx)(D.Badge,{variant:"outline",className:"text-xs","data-testid":`badge-size-${e.id}`,children:e.size})]})]}),(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(A.default,{href:`/college/${e.id}`,children:(0,t.jsx)(i.Button,{size:"sm","data-testid":`button-view-details-${e.id}`,children:"View Details"})}),e.website&&(0,t.jsx)(i.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer","data-testid":`link-website-${e.id}`,children:[(0,t.jsx)(L.ExternalLink,{className:"w-4 h-4 mr-1"}),"Website"]})})]})})]})})})}):(0,t.jsx)(V.Card,{className:"bg-card border border-border rounded-xl overflow-hidden hover:shadow-lg transition-shadow group","data-testid":`card-college-${e.id}`,children:(0,t.jsxs)(V.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-card-foreground group-hover:text-primary transition-colors","data-testid":`text-college-name-${e.id}`,children:e.name}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>r(e.id),"data-testid":`button-favorite-${e.id}`,children:(0,t.jsx)(R.Heart,{className:`w-5 h-5 ${a(e.id)?"text-primary fill-current":"text-muted-foreground"}`})})]}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-4 flex items-center",children:[(0,t.jsx)(H.MapPin,{className:"w-4 h-4 mr-1"}),(0,t.jsxs)("span",{"data-testid":`text-college-location-${e.id}`,children:[e.city,", ",e.state]})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Students:"}),(0,t.jsx)("span",{className:"text-sm font-medium","data-testid":`text-enrollment-${e.id}`,children:e.enrollment?.toLocaleString()||"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Tuition:"}),(0,t.jsx)("span",{className:"text-sm font-medium","data-testid":`text-tuition-${e.id}`,children:l(e.tuitionInState)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Acceptance:"}),(0,t.jsx)("span",{className:"text-sm font-medium","data-testid":`text-acceptance-${e.id}`,children:n(e.acceptanceRate)})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mb-4",children:[(0,t.jsx)(D.Badge,{variant:"outline",className:"text-xs","data-testid":`badge-type-${e.id}`,children:e.type}),(0,t.jsx)(D.Badge,{variant:"outline",className:"text-xs","data-testid":`badge-size-${e.id}`,children:e.size}),e.programs&&e.programs.length>0&&(0,t.jsxs)(D.Badge,{variant:"outline",className:"text-xs",children:["+",e.programs.length," programs"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(A.default,{href:`/college/${e.id}`,className:"flex-1",children:(0,t.jsx)(i.Button,{className:"w-full","data-testid":`button-view-details-${e.id}`,children:"View Details"})}),e.website&&(0,t.jsx)(i.Button,{variant:"outline",size:"icon",asChild:!0,children:(0,t.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer","data-testid":`link-website-${e.id}`,children:(0,t.jsx)(L.ExternalLink,{className:"w-4 h-4"})})})]})]})})}function K({searchParams:e,onRemoveFilter:s,onClearAll:a}){let r=[];if(e.query&&e.query.trim()&&r.push({key:"query",label:`Search: "${e.query}"`,value:e.query}),e.states&&e.states.length>0&&r.push({key:"states",label:`States: ${e.states.join(", ")}`,value:e.states.join(", ")}),e.regions&&e.regions.length>0&&r.push({key:"regions",label:`Regions: ${e.regions.join(", ")}`,value:e.regions.join(", ")}),e.types&&e.types.length>0&&r.push({key:"types",label:`Types: ${e.types.join(", ")}`,value:e.types.join(", ")}),e.size&&r.push({key:"size",label:`Size: ${e.size}`,value:e.size}),e.tuitionMin||e.tuitionMax){let t=e.tuitionMin?`$${e.tuitionMin.toLocaleString()}`:"0",s=e.tuitionMax?`$${e.tuitionMax.toLocaleString()}`:"∞";r.push({key:"tuitionMin",label:`Tuition: ${t} - ${s}`,value:`${t}-${s}`})}if(e.enrollmentMin||e.enrollmentMax){let t=e.enrollmentMin?e.enrollmentMin.toLocaleString():"0",s=e.enrollmentMax?e.enrollmentMax.toLocaleString():"∞";r.push({key:"enrollmentMin",label:`Enrollment: ${t} - ${s}`,value:`${t}-${s}`})}if(e.acceptanceRanges&&e.acceptanceRanges.length>0){let t=e.acceptanceRanges.filter(e=>"N/A"!==e);t.length>0&&r.push({key:"acceptanceRanges",label:`Acceptance Rate: ${t.join(", ")}`,value:t.join(", ")})}else if(e.acceptanceRateMin||e.acceptanceRateMax){let t=e.acceptanceRateMin?`${e.acceptanceRateMin}%`:"0%",s=e.acceptanceRateMax?`${e.acceptanceRateMax}%`:"100%";r.push({key:"acceptanceRateMin",label:`Acceptance Rate: ${t} - ${s}`,value:`${t}-${s}`})}return(e.programCategories&&e.programCategories.length>0&&r.push({key:"programCategories",label:`Programs: ${e.programCategories.join(", ")}`,value:e.programCategories.join(", ")}),e.jesuitOnly&&r.push({key:"jesuitOnly",label:"Jesuit Colleges Only",value:"Yes"}),0===r.length)?null:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[r.map(e=>(0,t.jsxs)(D.Badge,{variant:"secondary",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-primary/15 text-foreground border-2 border-primary/50 hover:bg-primary/25 hover:border-primary/60 transition-all duration-200 rounded-lg shadow-sm","data-testid":`badge-filter-${e.key}`,children:[(0,t.jsx)("span",{className:"font-medium",children:e.label}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"h-auto p-0 w-5 h-5 ml-1 hover:bg-primary/40 text-foreground rounded-full",onClick:()=>{var t;"tuitionMin"===(t=e.key)?(s("tuitionMin"),s("tuitionMax")):"enrollmentMin"===t?(s("enrollmentMin"),s("enrollmentMax")):"acceptanceRateMin"===t?(s("acceptanceRateMin"),s("acceptanceRateMax")):"acceptanceRanges"===t?s("acceptanceRanges"):s(t)},"data-testid":`button-remove-filter-${e.key}`,children:(0,t.jsx)(M.X,{className:"w-4 h-4"})})]},e.key)),r.length>1&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"text-sm text-muted-foreground hover:text-foreground ml-2 font-medium",onClick:a,"data-testid":"button-clear-all-filters",children:"Clear all filters"})]})}var U=e.i(76639);function Q({open:e,onClose:a,onSave:n,suggestedName:d,savedFilters:o,isAtLimit:c}){let[m,x]=(0,s.useState)(""),[h,u]=(0,s.useState)(""),[p,g]=(0,s.useState)(c),j=e=>{e?(x(d),u(""),g(c)):a()},b=o.map(e=>e.name).includes(m.trim());return(0,t.jsx)(U.Dialog,{open:e,onOpenChange:j,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(U.DialogHeader,{children:(0,t.jsx)(U.DialogTitle,{children:"Save Filter Combination"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{htmlFor:"filter-name",children:"Filter Name"}),(0,t.jsx)(r.Input,{id:"filter-name",value:m,onChange:e=>x(e.target.value),placeholder:"Enter a name for this search","data-testid":"input-filter-name"}),b&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"A filter with this name already exists"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Saved filters: ",o.length,"/5"]}),c&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,t.jsx)(C.Label,{children:"You have reached the 5 filter limit."})}),(0,t.jsx)(C.Label,{htmlFor:"replace-filter",children:"Replace existing filter:"}),(0,t.jsxs)(l.Select,{value:h,onValueChange:u,children:[(0,t.jsx)(l.SelectTrigger,{"data-testid":"select-replace-filter",children:(0,t.jsx)(l.SelectValue,{placeholder:"Choose filter to replace"})}),(0,t.jsx)(l.SelectContent,{children:o.map(e=>(0,t.jsx)(l.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),!c&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"replace-mode",checked:p,onChange:e=>g(e.target.checked),className:"rounded"}),(0,t.jsx)(C.Label,{htmlFor:"replace-mode",className:"text-sm",children:"Replace existing filter instead"})]}),p&&!c&&(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{htmlFor:"replace-filter-2",children:"Replace filter:"}),(0,t.jsxs)(l.Select,{value:h,onValueChange:u,children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Choose filter to replace"})}),(0,t.jsx)(l.SelectContent,{children:o.map(e=>(0,t.jsx)(l.SelectItem,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>j(!1),"data-testid":"button-cancel-save",children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:()=>{m.trim()&&(p&&h?n(m,h):p||n(m),j(!1))},disabled:!m.trim()||b||p&&!h,"data-testid":"button-save-filter",children:"Save Filter"})]})]})})}var X=e.i(2747);function Y({rows:e=12}){return(0,t.jsx)("div",{className:"w-full overflow-x-auto bg-card rounded-lg border border-border",children:(0,t.jsxs)("table",{className:"w-full border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border bg-gray-100",children:[(0,t.jsx)("th",{className:"p-2 w-12 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-4 mx-auto rounded"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[200px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-24"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-16"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-12"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[100px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-14"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-10"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-12 mx-auto"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-16 ml-auto"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-16 ml-auto"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[100px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-18 ml-auto"})}),(0,t.jsx)("th",{className:"p-2 min-w-[80px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-14 mx-auto"})}),(0,t.jsx)("th",{className:"p-2 min-w-[100px]",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-14 mx-auto"})})]})}),(0,t.jsx)("tbody",{children:Array.from({length:e}).map((e,s)=>(0,t.jsxs)("tr",{className:`border-b border-border ${s%2==0?"bg-white":"bg-gray-50"}`,children:[(0,t.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,t.jsx)(X.Skeleton,{className:"h-4 w-4 mx-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-4 rounded",style:{width:`${55+25*Math.sin(2.3*s)}%`}})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-3 rounded",style:{width:`${50+20*Math.sin(1.7*s)}%`}})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-3 w-12 rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-3 w-14 rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-3 w-10 rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,t.jsx)(X.Skeleton,{className:"h-3 w-6 mx-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-3 w-16 ml-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-3 w-16 ml-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(X.Skeleton,{className:"h-3 w-12 ml-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsx)(X.Skeleton,{className:"h-5 w-5 mx-auto rounded-full"})}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsx)(X.Skeleton,{className:"h-6 w-8 mx-auto rounded"})})]},s))})]})})}function _({index:e}){return(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[(0,t.jsx)(X.Skeleton,{className:"w-full h-36"}),(0,t.jsxs)("div",{className:"p-5 space-y-3",children:[(0,t.jsx)(X.Skeleton,{className:"h-5 rounded",style:{width:`${60+20*Math.sin(2.1*e)}%`}}),(0,t.jsx)(X.Skeleton,{className:"h-3 rounded",style:{width:`${40+15*Math.sin(1.5*e)}%`}}),(0,t.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(X.Skeleton,{className:"h-3 w-16 rounded"}),(0,t.jsx)(X.Skeleton,{className:"h-3 w-20 rounded"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(X.Skeleton,{className:"h-3 w-20 rounded"}),(0,t.jsx)(X.Skeleton,{className:"h-3 w-14 rounded"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(X.Skeleton,{className:"h-3 w-14 rounded"}),(0,t.jsx)(X.Skeleton,{className:"h-3 w-16 rounded"})]})]}),(0,t.jsx)(X.Skeleton,{className:"h-8 w-full rounded-md mt-2"})]})]})}function W({count:e=10}){return(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:Array.from({length:e}).map((e,s)=>(0,t.jsx)(_,{index:s},s))})}function Z({index:e}){return(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5 flex gap-5",children:[(0,t.jsx)(X.Skeleton,{className:"w-24 h-24 rounded-lg shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsx)(X.Skeleton,{className:"h-5 rounded",style:{width:`${35+15*Math.sin(1.9*e)}%`}}),(0,t.jsx)(X.Skeleton,{className:"h-3 rounded",style:{width:`${25+10*Math.sin(1.3*e)}%`}}),(0,t.jsxs)("div",{className:"flex gap-6 pt-1",children:[(0,t.jsx)(X.Skeleton,{className:"h-3 w-24 rounded"}),(0,t.jsx)(X.Skeleton,{className:"h-3 w-20 rounded"}),(0,t.jsx)(X.Skeleton,{className:"h-3 w-16 rounded"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,t.jsx)(X.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,t.jsx)(X.Skeleton,{className:"h-8 w-16 rounded-md"})]})]})}function G({count:e=8}){return(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,s)=>(0,t.jsx)(Z,{index:s},s))})}let ee=(0,T.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),et=(0,T.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),es=(0,T.default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var ea=e.i(73375),er=e.i(63059);let el=(0,T.default)("bookmark",[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]]);function ei(){let e,[r,l]=(0,s.useState)({query:"",page:1,limit:100,sortBy:"relevance",sortOrder:"asc"}),[n,d]=(0,s.useState)("table"),[o,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)([]),{favorites:h,isFavorite:u,toggleFavorite:p,getFavoritesList:g}=(0,F.useFavorites)();(0,s.useEffect)(()=>{let e=localStorage.getItem("savedFilters");e&&x(JSON.parse(e))},[]),(0,s.useEffect)(()=>{localStorage.setItem("savedFilters",JSON.stringify(m))},[m]);let j=(0,s.useMemo)(()=>g(),[g]),{colleges:b,total:f,isLoading:v,isFetching:N,error:y}=function(e){let t,s=e.showFavoritesOnly&&(!e.favoriteIds||0===e.favoriteIds.length),r=(t=new URLSearchParams,Object.entries(e).forEach(([e,s])=>{"showFavoritesOnly"!==e&&"favoriteIds"!==e&&null!=s&&""!==s&&(Array.isArray(s)&&s.length>0?t.append(e,s.join(",")):Array.isArray(s)||t.append(e,s.toString()))}),e.showFavoritesOnly&&e.favoriteIds&&e.favoriteIds.length>0&&t.append("favoriteIds",e.favoriteIds.join(",")),t.toString()),{data:l,isLoading:i,isFetching:n,error:d}=(0,a.useQuery)({queryKey:[`/api/colleges?${r}`],queryFn:async()=>{let e=await fetch(`/api/colleges?${r}`);if(!e.ok)throw Error("Failed to fetch colleges");return e.json()},enabled:!s,placeholderData:e=>e});return{colleges:l?.colleges||[],total:l?.total||0,isLoading:i,isFetching:n,error:d}}((0,s.useMemo)(()=>r.showFavoritesOnly?{...r,favoriteIds:j}:r,[r,j]));r.showFavoritesOnly&&j.length;let w=(0,s.useMemo)(()=>{let{page:e,limit:t,sortBy:s,sortOrder:a,...l}=r,i={};return Object.entries(l).forEach(([e,t])=>{null==t||""===t||Array.isArray(t)&&0===t.length||(i[e]=t)}),i},[r]),S=(0,s.useMemo)(()=>Object.keys(w).length>0,[w]),k=m.length>=5,C=(0,s.useCallback)(e=>{l(t=>({...t,...e,page:e.page||1}))},[]),$=(0,s.useCallback)(e=>{l(t=>({...t,page:e}))},[]),R=r.page||1,z=r.limit||100,B=Math.ceil(f/z),A=Math.min(R*z,f);return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(O,{searchParams:r,onSearch:C}),(0,t.jsx)("section",{className:"py-8 px-4",children:(0,t.jsxs)("div",{className:"container mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-2xl font-bold mb-4 lg:mb-0","data-testid":"text-results-title",children:["Colleges (",(0,t.jsx)("span",{"data-testid":"text-filtered-count",children:f.toLocaleString()}),")"]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[m.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Saved Filters:"}),m.map(e=>{let s,a=(s=e.filters,(w.query||void 0)===(s.query||void 0)&&JSON.stringify(w.states||[])===JSON.stringify(s.states||[])&&JSON.stringify(w.regions||[])===JSON.stringify(s.regions||[])&&JSON.stringify(w.types||[])===JSON.stringify(s.types||[])&&(w.size||void 0)===(s.size||void 0)&&(w.tuitionMin||void 0)===(s.tuitionMin||void 0)&&(w.tuitionMax||void 0)===(s.tuitionMax||void 0)&&(w.enrollmentMin||void 0)===(s.enrollmentMin||void 0)&&(w.enrollmentMax||void 0)===(s.enrollmentMax||void 0)&&(w.acceptanceRateMin||void 0)===(s.acceptanceRateMin||void 0)&&(w.acceptanceRateMax||void 0)===(s.acceptanceRateMax||void 0));return(0,t.jsxs)("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm border transition-all ${a?"bg-amber-200 text-amber-900 border-amber-300 ring-2 ring-amber-300 shadow-md font-medium":"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-150"}`,children:[(0,t.jsxs)("button",{onClick:()=>{l(t=>({...t,...e.filters,page:1}))},className:`hover:underline ${a?"cursor-default":""}`,"data-testid":`button-apply-filter-${e.id}`,disabled:a,children:[e.name," ",a&&"✓"]}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void x(e=>e.filter(e=>e.id!==t))},className:`ml-1 hover:opacity-75 ${a?"text-amber-700":"text-amber-600 hover:text-amber-800"}`,"data-testid":`button-delete-filter-${e.id}`,children:(0,t.jsx)(M.X,{className:"w-3 h-3"})})]},e.id)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"sort-select",className:"text-sm text-muted-foreground whitespace-nowrap",children:"Sort by:"}),(0,t.jsxs)("select",{id:"sort-select",name:"sort",className:"px-3 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring",value:`${r.sortBy}-${r.sortOrder}`,onChange:e=>{let[t,s]=e.target.value.split("-");C({sortBy:t,sortOrder:s})},"data-testid":"select-sort",children:[(0,t.jsx)("option",{value:"relevance-asc",children:"Relevance"}),(0,t.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,t.jsx)("option",{value:"name-desc",children:"Name (Z-A)"}),(0,t.jsx)("option",{value:"tuition-asc",children:"Tuition (Low to High)"}),(0,t.jsx)("option",{value:"tuition-desc",children:"Tuition (High to Low)"}),(0,t.jsx)("option",{value:"enrollment-desc",children:"School Size (Large to Small)"}),(0,t.jsx)("option",{value:"enrollment-asc",children:"School Size (Small to Large)"}),(0,t.jsx)("option",{value:"acceptance-asc",children:"Acceptance Rate (Low to High)"}),(0,t.jsx)("option",{value:"acceptance-desc",children:"Acceptance Rate (High to Low)"})]})]}),(0,t.jsxs)("div",{className:"flex border border-border rounded-lg overflow-hidden",children:[(0,t.jsx)(i.Button,{variant:"grid"===n?"default":"ghost",size:"sm",onClick:()=>d("grid"),"data-testid":"button-view-grid",children:(0,t.jsx)(ee,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"list"===n?"default":"ghost",size:"sm",onClick:()=>d("list"),"data-testid":"button-view-list",children:(0,t.jsx)(et,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"table"===n?"default":"ghost",size:"sm",onClick:()=>d("table"),"data-testid":"button-view-table",children:(0,t.jsx)(es,{className:"w-4 h-4"})})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(K,{searchParams:r,onRemoveFilter:e=>{l(t=>{let s={...t};return"tuitionMin"===e||"tuitionMax"===e?(delete s.tuitionMin,delete s.tuitionMax):"enrollmentMin"===e||"enrollmentMax"===e?(delete s.enrollmentMin,delete s.enrollmentMax):delete s[e],{...s,page:1}})},onClearAll:()=>{l(e=>({query:"",page:1,limit:e.limit,sortBy:e.sortBy,sortOrder:e.sortOrder}))}}),S&&(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"text-blue-600 border-blue-200 hover:bg-blue-50","data-testid":"button-save-filters",children:[(0,t.jsx)(el,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}),y&&!v&&(0,t.jsxs)("div",{className:"text-center py-12","data-testid":"error-message",children:[(0,t.jsxs)("p",{className:"text-destructive",children:["Error loading colleges: ",y.message]}),(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]}),v&&(0,t.jsxs)("div",{className:"animate-in fade-in duration-300",children:["table"===n&&(0,t.jsx)(Y,{}),"grid"===n&&(0,t.jsx)(W,{}),"list"===n&&(0,t.jsx)(G,{})]}),!v&&!y&&(0,t.jsxs)("div",{className:"relative",children:[N&&(0,t.jsxs)("div",{className:"absolute inset-0 z-10 animate-in fade-in duration-200",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-[1px] rounded-lg"}),(0,t.jsxs)("div",{className:"relative pt-4 px-1 opacity-80",children:["table"===n&&(0,t.jsx)(Y,{rows:6}),"grid"===n&&(0,t.jsx)(W,{count:6}),"list"===n&&(0,t.jsx)(G,{count:4})]})]}),(0,t.jsxs)("div",{className:`transition-opacity duration-300 ${N?"opacity-30":"opacity-100"}`,children:["table"===n&&(0,t.jsx)(P,{colleges:b,searchParams:r,onSort:(e,t)=>C({sortBy:e,sortOrder:t})}),"grid"===n&&(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:b.map(e=>(0,t.jsx)(J,{college:e,viewMode:"grid"},e.id))}),"list"===n&&(0,t.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,t.jsx)(J,{college:e,viewMode:"list"},e.id))}),B>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-8",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",((R-1)*z+1).toLocaleString(),"-",A.toLocaleString()," of"," ",f.toLocaleString()," colleges"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>$(R-1),disabled:R<=1,"data-testid":"button-prev-page",children:[(0,t.jsx)(ea.ChevronLeft,{className:"w-4 h-4 mr-1"}),"Previous"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[R>3&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{variant:1===R?"default":"ghost",size:"sm",onClick:()=>$(1),"data-testid":"button-page-1",children:"1"}),R>4&&(0,t.jsx)("span",{className:"px-2",children:"..."})]}),Array.from({length:Math.min(5,B)},(e,s)=>{let a=Math.max(1,R-2)+s;return a>B||1===a&&R>3||a===B&&R<B-2?null:(0,t.jsx)(i.Button,{variant:R===a?"default":"ghost",size:"sm",onClick:()=>$(a),"data-testid":`button-page-${a}`,children:a},a)}),R<B-2&&(0,t.jsxs)(t.Fragment,{children:[R<B-3&&(0,t.jsx)("span",{className:"px-2",children:"..."}),(0,t.jsx)(i.Button,{variant:B===R?"default":"ghost",size:"sm",onClick:()=>$(B),"data-testid":`button-page-${B}`,children:B})]})]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>$(R+1),disabled:R>=B,"data-testid":"button-next-page",children:["Next",(0,t.jsx)(er.ChevronRight,{className:"w-4 h-4 ml-1"})]})]})]})]})]})]})}),(0,t.jsx)(Q,{open:o,onClose:()=>c(!1),onSave:(e,t)=>{let s={id:Date.now().toString(),name:e,filters:w,createdAt:new Date};t?x(e=>e.map(e=>e.id===t?s:e)):x(e=>[...e,s]),c(!1)},suggestedName:(e=[],w.states&&w.states.length>0&&(1===w.states.length?e.push(w.states[0]):e.push(`${w.states.length} States`)),w.types&&w.types.length>0&&(1===w.types.length?e.push(w.types[0]):e.push(`${w.types.length} Types`)),w.size&&e.push(w.size),(w.tuitionMin||w.tuitionMax)&&(w.tuitionMin&&w.tuitionMax?e.push(`$${w.tuitionMin/1e3}k-${w.tuitionMax/1e3}k`):w.tuitionMin?e.push(`>$${w.tuitionMin/1e3}k`):w.tuitionMax&&e.push(`<$${w.tuitionMax/1e3}k`)),e.length>0?e.join(" + "):"Custom Filter"),savedFilters:m,isAtLimit:k})]})}e.s(["default",()=>ei],52683)}]);