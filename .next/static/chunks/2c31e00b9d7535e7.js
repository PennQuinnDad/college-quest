(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45500,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(66027),r=e.i(18566),l=e.i(93479),i=e.i(55436),n=e.i(37727),o=e.i(46897);function d({value:e,onChange:d,onClear:c}){let[m,h]=(0,s.useState)(!1),[x,u]=(0,s.useState)(-1),[p,g]=(0,s.useState)(""),j=(0,s.useRef)(null),b=(0,s.useRef)(null),f=(0,s.useRef)(void 0),v=(0,r.useRouter)();(0,s.useEffect)(()=>{let t=setTimeout(()=>g(e),300);return()=>clearTimeout(t)},[e]);let{suggestions:N}=function({query:e,enabled:t=!0}){let s=e.trim(),r=t&&s.length>=2,{data:l,isLoading:i}=(0,a.useQuery)({queryKey:["/api/colleges/autocomplete",s],queryFn:async()=>{let e=await fetch(`/api/colleges/autocomplete?q=${encodeURIComponent(s)}`);return e.ok?e.json():{suggestions:[]}},enabled:r,staleTime:3e4,gcTime:6e4});return{suggestions:l?.suggestions||[],isLoading:r&&i}}({query:p}),y=(0,s.useRef)(0);(0,s.useEffect)(()=>{let e=y.current;y.current=N.length,N.length>0&&e!==N.length?document.activeElement===j.current&&queueMicrotask(()=>{h(!0),u(-1)}):0===N.length&&e>0&&queueMicrotask(()=>h(!1))},[N]);let w=(0,s.useCallback)(e=>{h(!1),v.push(`/college/${e.id}`)},[v]);return(0,s.useEffect)(()=>()=>{f.current&&clearTimeout(f.current)},[]),(0,t.jsxs)("div",{className:"relative w-full sm:max-w-md",children:[(0,t.jsx)("label",{htmlFor:"search-input",className:"sr-only",children:"Search colleges, programs, or locations"}),(0,t.jsx)(l.Input,{ref:j,id:"search-input",name:"search",type:"text",placeholder:"Search colleges, programs, or locations...",value:e,onChange:e=>d(e.target.value),onKeyDown:e=>{if(m&&0!==N.length)switch(e.key){case"ArrowDown":e.preventDefault(),u(e=>Math.min(e+1,N.length-1));break;case"ArrowUp":e.preventDefault(),u(e=>Math.max(e-1,-1));break;case"Enter":x>=0&&x<N.length&&(e.preventDefault(),w(N[x]));break;case"Escape":h(!1),u(-1)}},onFocus:()=>{N.length>0&&h(!0)},onBlur:()=>{f.current=setTimeout(()=>{h(!1),u(-1)},150)},className:"w-full pl-10 pr-10 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-ring","data-testid":"input-search",autoComplete:"off",role:"combobox","aria-expanded":m,"aria-haspopup":"listbox","aria-autocomplete":"list"}),(0,t.jsx)(i.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e&&(0,t.jsx)("button",{onClick:()=>{c(),h(!1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-clear-search",children:(0,t.jsx)(n.X,{className:"w-4 h-4"})}),m&&N.length>0&&(0,t.jsx)("div",{ref:b,role:"listbox",className:"absolute z-50 top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-md overflow-hidden",children:N.map((e,s)=>(0,t.jsxs)("button",{role:"option","aria-selected":s===x,onMouseDown:e=>{e.preventDefault()},onClick:()=>w(e),onMouseEnter:()=>u(s),className:`w-full text-left px-3 py-2 flex items-center gap-2 text-sm transition-colors ${s===x?"bg-accent text-accent-foreground":"hover:bg-accent/50"}`,children:[(0,t.jsx)(i.Search,{className:"w-3.5 h-3.5 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("span",{className:"font-medium truncate block",children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(o.MapPin,{className:"w-3 h-3"}),e.city,", ",e.state]})]})]},e.id))})]})}var c=e.i(67489),m=e.i(19455),h=e.i(90597),x=e.i(27612),u=e.i(75254);let p=(0,u.default)("clipboard-copy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);var g=e.i(8406),j=e.i(75157),b=e.i(92125),f=e.i(71414),v=e.i(15750),N=e.i(46798);function y({searchParams:e,onSearch:s,colleges:r}){let{data:l}=(0,a.useQuery)({queryKey:["/api/colleges/filters/states"],queryFn:async()=>{let e=await fetch("/api/colleges/filters/states");if(!e.ok)throw Error("Failed to fetch states");return e.json()}}),{data:i}=(0,a.useQuery)({queryKey:["/api/colleges/filters/regions"],queryFn:async()=>{let e=await fetch("/api/colleges/filters/regions");if(!e.ok)throw Error("Failed to fetch regions");return e.json()}}),{data:n}=(0,a.useQuery)({queryKey:["/api/colleges/filters/acceptance-ranges"],queryFn:async()=>{let e=await fetch("/api/colleges/filters/acceptance-ranges");if(!e.ok)throw Error("Failed to fetch acceptance ranges");return e.json()}}),{data:o}=(0,a.useQuery)({queryKey:["/api/schools/categories"],queryFn:async()=>{let e=await fetch("/api/schools/categories");if(!e.ok)throw Error("Failed to fetch program categories");return e.json()}}),{favoriteCount:u,clearAllFavorites:y}=(0,b.useFavorites)(),{folders:w,getCollegeIdsInFolder:S}=(0,f.useFolders)(),{toast:k}=(0,g.useToast)(),C=async()=>{let e;if(!r||0===r.length)return;let t=(e=["# My College List","","Here's a list of colleges that I'm interested in. What can you tell me about them? Can you compare them and help me understand the differences?",""],r.forEach((t,s)=>{e.push(`## ${s+1}. ${t.name}`);let a=[t.city,t.state].filter(Boolean).join(", ");a&&e.push(`- **Location:** ${a}`);let r=[t.type,t.size].filter(Boolean).join(", ");if(r&&e.push(`- **Type:** ${r}`),null!=t.tuitionInState&&null!=t.tuitionOutOfState?t.tuitionInState===t.tuitionOutOfState?e.push(`- **Tuition:** ${(0,j.formatCurrency)(t.tuitionInState)}`):e.push(`- **Tuition:** ${(0,j.formatCurrency)(t.tuitionInState)} (In-State) / ${(0,j.formatCurrency)(t.tuitionOutOfState)} (Out-of-State)`):null!=t.tuitionInState?e.push(`- **Tuition (In-State):** ${(0,j.formatCurrency)(t.tuitionInState)}`):null!=t.tuitionOutOfState&&e.push(`- **Tuition (Out-of-State):** ${(0,j.formatCurrency)(t.tuitionOutOfState)}`),null!=t.netCost&&e.push(`- **Net Cost:** ${(0,j.formatCurrency)(t.netCost)}`),null!=t.acceptanceRate&&e.push(`- **Acceptance Rate:** ${t.acceptanceRate.toFixed(1)}%`),null!=t.satMath||null!=t.satReading){let s=[];null!=t.satMath&&s.push(`${t.satMath} Math`),null!=t.satReading&&s.push(`${t.satReading} Reading`),e.push(`- **SAT:** ${s.join(", ")}`)}null!=t.actComposite&&e.push(`- **ACT Composite:** ${t.actComposite}`),null!=t.graduationRate&&e.push(`- **Graduation Rate:** ${t.graduationRate.toFixed(1)}%`),null!=t.enrollment&&e.push(`- **Enrollment:** ${(0,j.formatNumber)(t.enrollment)}`),t.programs&&t.programs.length>0&&e.push(`- **Programs:** ${t.programs.join(", ")}`),t.website&&e.push(`- **Website:** ${t.website}`),e.push("")}),e.join("\n"));try{await navigator.clipboard.writeText(t),k({title:"Copied to clipboard",description:`${r.length} college${1===r.length?"":"s"} exported as Markdown — paste into ChatGPT or Claude`})}catch{k({title:"Export failed",description:"Could not copy to clipboard. Check browser permissions.",variant:"destructive"})}};return(0,t.jsx)("section",{className:"py-4 sm:py-6 px-4 bg-card border-b border-border relative z-10",id:"search-section",children:(0,t.jsxs)("div",{className:"container mx-auto",children:[(0,t.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,t.jsx)(d,{value:e.query||"",onChange:e=>s({query:e}),onClear:()=>s({query:""})})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"state-select",className:"sr-only",children:"Filter by State"}),(0,t.jsxs)(c.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.states||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({states:e.length>0?e:void 0})}else s({states:[...a,t]})}},children:[(0,t.jsx)(c.SelectTrigger,{id:"state-select",className:"w-[120px] sm:w-[140px]","data-testid":"select-state",children:(0,t.jsx)(c.SelectValue,{placeholder:e.states?.length?`${e.states.length} States`:"State"})}),(0,t.jsxs)(c.SelectContent,{children:[(e.states||[]).map(e=>(0,t.jsxs)(c.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(l||[]).filter(t=>!e.states?.includes(t)).map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)(c.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.regions||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({regions:e.length>0?e:void 0})}else s({regions:[...a,t]})}},children:[(0,t.jsx)(c.SelectTrigger,{id:"region-select",name:"region",className:"w-[120px] sm:w-[140px]","data-testid":"select-region",children:(0,t.jsx)(c.SelectValue,{placeholder:e.regions?.length?`${e.regions.length} Regions`:"Region"})}),(0,t.jsxs)(c.SelectContent,{children:[(e.regions||[]).map(e=>(0,t.jsxs)(c.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(i||[]).filter(t=>!e.regions?.includes(t)).map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(c.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.sizes||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({sizes:e.length>0?e:void 0})}else s({sizes:[...a,t]})}},children:[(0,t.jsx)(c.SelectTrigger,{id:"size-select",name:"size",className:"w-[120px] sm:w-[140px]","data-testid":"select-size",children:(0,t.jsx)(c.SelectValue,{placeholder:e.sizes?.length?`${e.sizes.length} Sizes`:"Size"})}),(0,t.jsxs)(c.SelectContent,{children:[(e.sizes||[]).map(e=>(0,t.jsxs)(c.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),["Small","Medium","Large"].filter(t=>!e.sizes?.includes(t)).map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(c.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.acceptanceRanges||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({acceptanceRanges:e.length>0?e:void 0})}else s({acceptanceRanges:[...a,t]})}},children:[(0,t.jsx)(c.SelectTrigger,{id:"acceptance-ranges-select",name:"acceptanceRanges",className:"w-[140px] sm:w-[180px]","data-testid":"select-acceptance-ranges",children:(0,t.jsx)(c.SelectValue,{placeholder:e.acceptanceRanges?.length?`${e.acceptanceRanges.length} Ranges`:"Acceptance Rate"})}),(0,t.jsxs)(c.SelectContent,{children:[(e.acceptanceRanges||[]).map(e=>(0,t.jsxs)(c.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(n||[]).filter(t=>!e.acceptanceRanges?.includes(t)).map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]}),o&&o.length>0&&(0,t.jsxs)(c.Select,{value:"",onValueChange:t=>{if(t&&"all"!==t){let a=e.programCategories||[];if(a.includes(t)){let e=a.filter(e=>e!==t);s({programCategories:e.length>0?e:void 0})}else s({programCategories:[...a,t]})}},children:[(0,t.jsx)(c.SelectTrigger,{id:"program-category-select",name:"programCategory",className:"w-[140px] sm:w-[180px]","data-testid":"select-program-category",children:(0,t.jsx)(c.SelectValue,{placeholder:e.programCategories?.length?`${e.programCategories.length} Programs`:"Program"})}),(0,t.jsxs)(c.SelectContent,{children:[(e.programCategories||[]).map(e=>(0,t.jsxs)(c.SelectItem,{value:e,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",e]},`selected-${e}`)),(o||[]).filter(t=>!e.programCategories?.includes(t)).map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 w-full sm:w-auto sm:ml-auto",children:[(0,t.jsxs)(m.Button,{variant:e.showFavoritesOnly?"default":"outline",onClick:()=>{e.showFavoritesOnly?s({showFavoritesOnly:void 0,folderId:void 0}):s({query:"",states:void 0,regions:void 0,sizes:void 0,acceptanceRanges:void 0,programCategories:void 0,tuitionMin:void 0,tuitionMax:void 0,enrollmentMin:void 0,enrollmentMax:void 0,acceptanceRateMin:void 0,acceptanceRateMax:void 0,showFavoritesOnly:!0,folderId:void 0,page:1})},className:"flex items-center gap-2 h-10","data-testid":"button-show-favorites",children:[(0,t.jsx)(h.Heart,{className:`w-4 h-4 ${u>0?"text-red-500":"text-gray-400"}`}),"Favorites (",u,")"]}),e.showFavoritesOnly&&w.length>0&&(0,t.jsxs)(c.Select,{value:e.folderId||"all",onValueChange:e=>s({folderId:"all"===e?void 0:e}),children:[(0,t.jsx)(c.SelectTrigger,{className:"w-[160px] h-10",children:(0,t.jsx)(c.SelectValue,{placeholder:"All Favorites"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"all",children:"All Favorites"}),w.map(e=>(0,t.jsx)(c.SelectItem,{value:e.id,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full shrink-0 ${(0,v.getFolderColorClass)(e.color)}`}),e.name," (",S(e.id).length,")"]})},e.id))]})]}),e.showFavoritesOnly&&r&&r.length>0&&(0,t.jsx)(N.TooltipProvider,{children:(0,t.jsxs)(N.Tooltip,{children:[(0,t.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:C,className:"h-10 w-10 text-muted-foreground hover:text-primary","data-testid":"button-export-favorites",children:(0,t.jsx)(p,{className:"w-4 h-4"})})}),(0,t.jsx)(N.TooltipContent,{children:(0,t.jsx)("p",{children:"Copy favorites as Markdown for AI"})})]})}),u>0&&(0,t.jsx)(N.TooltipProvider,{children:(0,t.jsxs)(N.Tooltip,{children:[(0,t.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),y(),e.showFavoritesOnly&&s({showFavoritesOnly:void 0})},className:"h-10 w-10 text-muted-foreground hover:text-destructive","data-testid":"button-clear-favorites",children:(0,t.jsx)(x.Trash2,{className:"w-4 h-4"})})}),(0,t.jsx)(N.TooltipContent,{children:(0,t.jsx)("p",{children:"Clear all favorites"})})]})})]})]})]})})}var w=e.i(22016),S=e.i(71436),k=e.i(57428),C=e.i(76639),$=e.i(78917);let M=(0,u.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var z=e.i(64659);function R({colleges:e,searchParams:a,onSort:r}){let[l,i]=(0,s.useState)(new Set),[n,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),{isFavorite:u,toggleFavorite:p,addMultipleFavorites:g,removeMultipleFavorites:j}=(0,b.useFavorites)(),{isAdmin:f}=(0,S.useAuth)(),N=e=>{let t=a.sortBy===e&&"asc"===a.sortOrder?"desc":"asc";r(e,t)},y=e.length>0&&l.size===e.length,R=Array.from(l),F=R.length>0&&R.every(e=>u(e)),T=async()=>{if(f&&0!==R.length){o(!0);try{let e=await fetch("/api/admin/colleges",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({ids:R})});if(e.ok)i(new Set),c(!1),window.location.reload();else{let t=await e.json();alert(`Delete failed: ${t.message||"Unknown error"}`)}}catch(e){alert("Delete failed. Check console for details."),console.error("Bulk delete error:",e)}finally{o(!1)}}},O=e=>a.sortBy!==e?(0,t.jsx)(M,{className:"w-3 h-3 text-muted-foreground/50"}):"asc"===a.sortOrder?(0,t.jsx)(M,{className:"w-3 h-3 text-primary"}):(0,t.jsx)(z.ChevronDown,{className:"w-3 h-3 text-primary"}),I=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e):"N/A";return(0,t.jsxs)("div",{className:"space-y-4",children:[l.size>0&&(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 gap-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-amber-800",children:[l.size," college",1===l.size?"":"s"," selected"]}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)(m.Button,{variant:"outline",size:"sm",onClick:()=>{F?j(R):g(R)},"data-testid":"button-bulk-favorite",children:[(0,t.jsx)(h.Heart,{className:`w-4 h-4 mr-1 sm:mr-2 ${F?"fill-red-500 text-red-500":""}`}),F?"Remove from Favorites":"Add to Favorites"]}),f&&(0,t.jsxs)(m.Button,{variant:"destructive",size:"sm",onClick:()=>c(!0),disabled:n,children:[(0,t.jsx)(x.Trash2,{className:"w-4 h-4 mr-2"}),"Delete ",l.size," Selected"]})]})]}),(0,t.jsx)("div",{className:"w-full overflow-x-auto bg-card rounded-lg border border-border",children:(0,t.jsxs)("table",{className:"w-full border-collapse","data-testid":"table-colleges",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border bg-gray-100",children:[(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground border-r border-border w-12 hidden sm:table-cell",children:(0,t.jsx)(k.Checkbox,{checked:y,onCheckedChange:t=>{t?i(new Set(e.map(e=>e.id))):i(new Set)},"data-testid":"checkbox-select-all"})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[150px] sm:min-w-[200px]",children:(0,t.jsxs)("button",{onClick:()=>N("name"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-name",children:["College Name",O("name")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[100px] sm:min-w-[120px]",children:(0,t.jsxs)("button",{onClick:()=>N("location"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-location",children:["Location",O("location")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] hidden md:table-cell",children:(0,t.jsxs)("button",{onClick:()=>N("type"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-type",children:["Type",O("type")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[100px] hidden lg:table-cell",children:(0,t.jsxs)("button",{onClick:()=>N("region"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-region",children:["Region",O("region")]})}),(0,t.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] hidden lg:table-cell",children:(0,t.jsxs)("button",{onClick:()=>N("size"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-size",children:["Size",O("size")]})}),(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] hidden lg:table-cell",children:(0,t.jsx)("span",{className:"flex items-center gap-1 justify-center text-sm",children:"Jesuit"})}),(0,t.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[90px] sm:min-w-[120px]",children:(0,t.jsxs)("button",{onClick:()=>N("tuition"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-tuition",children:["Tuition",O("tuition")]})}),(0,t.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[120px] hidden md:table-cell",children:(0,t.jsxs)("button",{onClick:()=>N("netCost"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-netcost",children:["Net Cost",O("netCost")]})}),(0,t.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] sm:min-w-[100px]",children:(0,t.jsxs)("button",{onClick:()=>N("acceptance"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-acceptance",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Acceptance"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Acc."}),O("acceptance")]})}),(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground min-w-[60px] sm:min-w-[80px]",children:(0,t.jsxs)("span",{className:"flex items-center gap-1 justify-center text-sm",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Favorite"}),(0,t.jsx)(h.Heart,{className:"w-4 h-4 sm:hidden"})]})}),(0,t.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground min-w-[100px] hidden sm:table-cell",children:(0,t.jsx)("span",{className:"flex items-center gap-1 justify-center text-sm",children:"Website"})})]})}),(0,t.jsx)("tbody",{children:e.map((e,s)=>{var a;return(0,t.jsxs)("tr",{className:`border-b border-border hover:bg-amber-50/50 transition-colors ${s%2==0?"bg-white":"bg-gray-50"} ${l.has(e.id)?"ring-2 ring-primary/20 bg-primary/5":""} ${u(e.id)?"bg-red-50":""}`,"data-testid":`row-college-${e.id}`,children:[(0,t.jsx)("td",{className:"p-2 border-r border-border text-center hidden sm:table-cell",children:(0,t.jsx)(k.Checkbox,{checked:l.has(e.id),onCheckedChange:t=>{var s;let a;return s=e.id,a=new Set(l),void(t?a.add(s):a.delete(s),i(a))},"data-testid":`checkbox-college-${e.id}`})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(w.default,{href:`/college/${e.id}`,children:(0,t.jsx)("div",{className:"text-sm font-medium text-primary hover:text-primary/80 cursor-pointer transition-colors","data-testid":`link-college-name-${e.id}`,children:e.name})})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsxs)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-location-${e.id}`,children:[e.city,", ",e.state]})}),(0,t.jsx)("td",{className:"p-2 border-r border-border hidden md:table-cell",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-type-${e.id}`,children:e.type||"N/A"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border hidden lg:table-cell",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-region-${e.id}`,children:e.region||"N/A"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border hidden lg:table-cell",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-size-${e.id}`,children:e.size||"N/A"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-center hidden lg:table-cell",children:(0,t.jsx)("div",{className:"text-xs","data-testid":`text-jesuit-${e.id}`,children:e.jesuit?(0,t.jsx)("span",{className:"text-blue-600 font-medium",children:"✓ Yes"}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"No"})})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-right",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-tuition-${e.id}`,children:I(e.tuitionInState)})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-right hidden md:table-cell",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-net-cost-${e.id}`,children:I(e.netCost)})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-right",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-acceptance-${e.id}`,children:(a=e.acceptanceRate)?`${a.toFixed(1)}%`:"N/A"})}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-0.5",children:[(0,t.jsx)(m.Button,{size:"sm",variant:"ghost",className:"h-7 px-1 sm:px-2",onClick:()=>p(e.id),"data-testid":`button-favorite-${e.id}`,children:(0,t.jsx)(h.Heart,{className:`w-4 h-4 ${u(e.id)?"fill-red-500 text-red-500":"text-gray-400 hover:text-red-400"}`})}),u(e.id)&&(0,t.jsx)(v.default,{collegeId:e.id,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"sm",className:"h-7 px-1 hidden sm:flex",children:(0,t.jsx)(z.ChevronDown,{className:"w-3.5 h-3.5 text-muted-foreground"})})}),(0,t.jsx)(v.FolderDots,{collegeId:e.id})]})}),(0,t.jsx)("td",{className:"p-2 text-center hidden sm:table-cell",children:(0,t.jsx)("div",{className:"flex justify-center",children:e.website&&(0,t.jsx)(m.Button,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",asChild:!0,children:(0,t.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer","data-testid":`link-website-${e.id}`,children:(0,t.jsx)($.ExternalLink,{className:"w-3 h-3"})})})})})]},e.id)})})]})}),(0,t.jsx)(C.Dialog,{open:d,onOpenChange:c,children:(0,t.jsxs)(C.DialogContent,{children:[(0,t.jsxs)(C.DialogHeader,{children:[(0,t.jsxs)(C.DialogTitle,{children:["Delete ",l.size," College",1===l.size?"":"s"]}),(0,t.jsxs)(C.DialogDescription,{children:["This will permanently delete the selected college",1===l.size?"":"s"," and all associated schools/programs. This action cannot be undone."]})]}),(0,t.jsxs)(C.DialogFooter,{children:[(0,t.jsx)(m.Button,{variant:"outline",onClick:()=>c(!1),disabled:n,children:"Cancel"}),(0,t.jsx)(m.Button,{variant:"destructive",onClick:T,disabled:n,children:n?"Deleting...":`Delete ${l.size} College${1===l.size?"":"s"}`})]})]})})]})}var F=e.i(44939),T=e.i(87486);function O({searchParams:e,onRemoveFilter:s,onClearAll:a}){let r=[];if(e.query&&e.query.trim()&&r.push({key:"query",label:`Search: "${e.query}"`,value:e.query}),e.states&&e.states.length>0&&r.push({key:"states",label:`States: ${e.states.join(", ")}`,value:e.states.join(", ")}),e.regions&&e.regions.length>0&&r.push({key:"regions",label:`Regions: ${e.regions.join(", ")}`,value:e.regions.join(", ")}),e.types&&e.types.length>0&&r.push({key:"types",label:`Types: ${e.types.join(", ")}`,value:e.types.join(", ")}),e.sizes&&e.sizes.length>0&&r.push({key:"sizes",label:`Size: ${e.sizes.join(", ")}`,value:e.sizes.join(", ")}),e.tuitionMin||e.tuitionMax){let t=e.tuitionMin?`$${e.tuitionMin.toLocaleString()}`:"0",s=e.tuitionMax?`$${e.tuitionMax.toLocaleString()}`:"∞";r.push({key:"tuitionMin",label:`Tuition: ${t} - ${s}`,value:`${t}-${s}`})}if(e.enrollmentMin||e.enrollmentMax){let t=e.enrollmentMin?e.enrollmentMin.toLocaleString():"0",s=e.enrollmentMax?e.enrollmentMax.toLocaleString():"∞";r.push({key:"enrollmentMin",label:`Enrollment: ${t} - ${s}`,value:`${t}-${s}`})}if(e.acceptanceRanges&&e.acceptanceRanges.length>0){let t=e.acceptanceRanges.filter(e=>"N/A"!==e);t.length>0&&r.push({key:"acceptanceRanges",label:`Acceptance Rate: ${t.join(", ")}`,value:t.join(", ")})}else if(e.acceptanceRateMin||e.acceptanceRateMax){let t=e.acceptanceRateMin?`${e.acceptanceRateMin}%`:"0%",s=e.acceptanceRateMax?`${e.acceptanceRateMax}%`:"100%";r.push({key:"acceptanceRateMin",label:`Acceptance Rate: ${t} - ${s}`,value:`${t}-${s}`})}return(e.programCategories&&e.programCategories.length>0&&r.push({key:"programCategories",label:`Programs: ${e.programCategories.join(", ")}`,value:e.programCategories.join(", ")}),e.jesuitOnly&&r.push({key:"jesuitOnly",label:"Jesuit Colleges Only",value:"Yes"}),0===r.length)?null:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[r.map(e=>(0,t.jsxs)(T.Badge,{variant:"secondary",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-primary/15 text-foreground border-2 border-primary/50 hover:bg-primary/25 hover:border-primary/60 transition-all duration-200 rounded-lg shadow-sm","data-testid":`badge-filter-${e.key}`,children:[(0,t.jsx)("span",{className:"font-medium",children:e.label}),(0,t.jsx)(m.Button,{variant:"ghost",size:"sm",className:"h-auto p-0 w-5 h-5 ml-1 hover:bg-primary/40 text-foreground rounded-full",onClick:()=>{var t;"tuitionMin"===(t=e.key)?(s("tuitionMin"),s("tuitionMax")):"enrollmentMin"===t?(s("enrollmentMin"),s("enrollmentMax")):"acceptanceRateMin"===t?(s("acceptanceRateMin"),s("acceptanceRateMax")):"acceptanceRanges"===t?s("acceptanceRanges"):s(t)},"data-testid":`button-remove-filter-${e.key}`,children:(0,t.jsx)(n.X,{className:"w-4 h-4"})})]},e.key)),r.length>1&&(0,t.jsx)(m.Button,{variant:"ghost",size:"sm",className:"text-sm text-muted-foreground hover:text-foreground ml-2 font-medium",onClick:a,"data-testid":"button-clear-all-filters",children:"Clear all filters"})]})}var I=e.i(10204);function A({open:e,onClose:a,onSave:r,suggestedName:i,savedFilters:n,isAtLimit:o}){let[d,h]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),[p,g]=(0,s.useState)(o),j=e=>{e?(h(i),u(""),g(o)):a()},b=n.map(e=>e.name).includes(d.trim());return(0,t.jsx)(C.Dialog,{open:e,onOpenChange:j,children:(0,t.jsxs)(C.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(C.DialogHeader,{children:(0,t.jsx)(C.DialogTitle,{children:"Save Filter Combination"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(I.Label,{htmlFor:"filter-name",children:"Filter Name"}),(0,t.jsx)(l.Input,{id:"filter-name",value:d,onChange:e=>h(e.target.value),placeholder:"Enter a name for this search","data-testid":"input-filter-name"}),b&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"A filter with this name already exists"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Saved filters: ",n.length,"/5"]}),o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,t.jsx)(I.Label,{children:"You have reached the 5 filter limit."})}),(0,t.jsx)(I.Label,{htmlFor:"replace-filter",children:"Replace existing filter:"}),(0,t.jsxs)(c.Select,{value:x,onValueChange:u,children:[(0,t.jsx)(c.SelectTrigger,{"data-testid":"select-replace-filter",children:(0,t.jsx)(c.SelectValue,{placeholder:"Choose filter to replace"})}),(0,t.jsx)(c.SelectContent,{children:n.map(e=>(0,t.jsx)(c.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),!o&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"replace-mode",checked:p,onChange:e=>g(e.target.checked),className:"rounded"}),(0,t.jsx)(I.Label,{htmlFor:"replace-mode",className:"text-sm",children:"Replace existing filter instead"})]}),p&&!o&&(0,t.jsxs)("div",{children:[(0,t.jsx)(I.Label,{htmlFor:"replace-filter-2",children:"Replace filter:"}),(0,t.jsxs)(c.Select,{value:x,onValueChange:u,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Choose filter to replace"})}),(0,t.jsx)(c.SelectContent,{children:n.map(e=>(0,t.jsx)(c.SelectItem,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsxs)(C.DialogFooter,{children:[(0,t.jsx)(m.Button,{variant:"outline",onClick:()=>j(!1),"data-testid":"button-cancel-save",children:"Cancel"}),(0,t.jsx)(m.Button,{onClick:()=>{d.trim()&&(p&&x?r(d,x):p||r(d),j(!1))},disabled:!d.trim()||b||p&&!x,"data-testid":"button-save-filter",children:"Save Filter"})]})]})})}var B=e.i(2747);function D({rows:e=12}){return(0,t.jsx)("div",{className:"w-full overflow-x-auto bg-card rounded-lg border border-border",children:(0,t.jsxs)("table",{className:"w-full border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border bg-gray-100",children:[(0,t.jsx)("th",{className:"p-2 w-12 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-4 mx-auto rounded"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[200px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-24"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-16"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-12"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[100px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-14"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-10"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-12 mx-auto"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-16 ml-auto"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-16 ml-auto"})}),(0,t.jsx)("th",{className:"p-2 border-r border-border min-w-[100px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-18 ml-auto"})}),(0,t.jsx)("th",{className:"p-2 min-w-[80px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-14 mx-auto"})}),(0,t.jsx)("th",{className:"p-2 min-w-[100px]",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-14 mx-auto"})})]})}),(0,t.jsx)("tbody",{children:Array.from({length:e}).map((e,s)=>(0,t.jsxs)("tr",{className:`border-b border-border ${s%2==0?"bg-white":"bg-gray-50"}`,children:[(0,t.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,t.jsx)(B.Skeleton,{className:"h-4 w-4 mx-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-4 rounded",style:{width:`${55+25*Math.sin(2.3*s)}%`}})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-3 rounded",style:{width:`${50+20*Math.sin(1.7*s)}%`}})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-3 w-12 rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-3 w-14 rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-3 w-10 rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,t.jsx)(B.Skeleton,{className:"h-3 w-6 mx-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-3 w-16 ml-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-3 w-16 ml-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 border-r border-border",children:(0,t.jsx)(B.Skeleton,{className:"h-3 w-12 ml-auto rounded"})}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsx)(B.Skeleton,{className:"h-5 w-5 mx-auto rounded-full"})}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsx)(B.Skeleton,{className:"h-6 w-8 mx-auto rounded"})})]},s))})]})})}function q({index:e}){return(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[(0,t.jsx)(B.Skeleton,{className:"w-full h-36"}),(0,t.jsxs)("div",{className:"p-5 space-y-3",children:[(0,t.jsx)(B.Skeleton,{className:"h-5 rounded",style:{width:`${60+20*Math.sin(2.1*e)}%`}}),(0,t.jsx)(B.Skeleton,{className:"h-3 rounded",style:{width:`${40+15*Math.sin(1.5*e)}%`}}),(0,t.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(B.Skeleton,{className:"h-3 w-16 rounded"}),(0,t.jsx)(B.Skeleton,{className:"h-3 w-20 rounded"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(B.Skeleton,{className:"h-3 w-20 rounded"}),(0,t.jsx)(B.Skeleton,{className:"h-3 w-14 rounded"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(B.Skeleton,{className:"h-3 w-14 rounded"}),(0,t.jsx)(B.Skeleton,{className:"h-3 w-16 rounded"})]})]}),(0,t.jsx)(B.Skeleton,{className:"h-8 w-full rounded-md mt-2"})]})]})}function L({count:e=10}){return(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:Array.from({length:e}).map((e,s)=>(0,t.jsx)(q,{index:s},s))})}function E({index:e}){return(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5 flex gap-5",children:[(0,t.jsx)(B.Skeleton,{className:"w-24 h-24 rounded-lg shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsx)(B.Skeleton,{className:"h-5 rounded",style:{width:`${35+15*Math.sin(1.9*e)}%`}}),(0,t.jsx)(B.Skeleton,{className:"h-3 rounded",style:{width:`${25+10*Math.sin(1.3*e)}%`}}),(0,t.jsxs)("div",{className:"flex gap-6 pt-1",children:[(0,t.jsx)(B.Skeleton,{className:"h-3 w-24 rounded"}),(0,t.jsx)(B.Skeleton,{className:"h-3 w-20 rounded"}),(0,t.jsx)(B.Skeleton,{className:"h-3 w-16 rounded"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,t.jsx)(B.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,t.jsx)(B.Skeleton,{className:"h-8 w-16 rounded-md"})]})]})}function V({count:e=8}){return(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,s)=>(0,t.jsx)(E,{index:s},s))})}var P=e.i(54922);let H=(0,u.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var J=e.i(23441),K=e.i(73375),U=e.i(63059);let Q=(0,u.default)("bookmark",[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]]);function W(){return window.innerWidth<640?"list":"table"}function G(){let e,[r,l]=(0,s.useState)({query:"",page:1,limit:100,sortBy:"relevance",sortOrder:"asc"}),[i,o]=(0,s.useState)(W),[d,c]=(0,s.useState)(!1),[h,x]=(0,s.useState)([]),{favorites:u,isFavorite:p,toggleFavorite:g,getFavoritesList:j}=(0,b.useFavorites)(),{getCollegeIdsInFolder:v}=(0,f.useFolders)();(0,s.useEffect)(()=>{let e=localStorage.getItem("savedFilters");e&&x(JSON.parse(e))},[]),(0,s.useEffect)(()=>{localStorage.setItem("savedFilters",JSON.stringify(h))},[h]);let N=(0,s.useMemo)(()=>j(),[j]),{colleges:w,total:S,isLoading:k,isFetching:C,error:$}=function(e){let t,s=e.showFavoritesOnly&&(!e.favoriteIds||0===e.favoriteIds.length),r=(t=new URLSearchParams,Object.entries(e).forEach(([e,s])=>{"showFavoritesOnly"!==e&&"favoriteIds"!==e&&null!=s&&""!==s&&(Array.isArray(s)&&s.length>0?t.append(e,s.join(",")):Array.isArray(s)||t.append(e,s.toString()))}),e.showFavoritesOnly&&e.favoriteIds&&e.favoriteIds.length>0&&t.append("favoriteIds",e.favoriteIds.join(",")),t.toString()),{data:l,isLoading:i,isFetching:n,error:o}=(0,a.useQuery)({queryKey:[`/api/colleges?${r}`],queryFn:async()=>{let e=await fetch(`/api/colleges?${r}`);if(!e.ok)throw Error("Failed to fetch colleges");return e.json()},enabled:!s,placeholderData:e=>e});return{colleges:l?.colleges||[],total:l?.total||0,isLoading:i,isFetching:n,error:o}}((0,s.useMemo)(()=>{if(r.showFavoritesOnly){let e=N;if(r.folderId){let t=v(r.folderId);e=e.filter(e=>t.includes(e))}return{...r,favoriteIds:e}}return r},[r,N,v]));r.showFavoritesOnly&&N.length;let M=(0,s.useMemo)(()=>{let{page:e,limit:t,sortBy:s,sortOrder:a,...l}=r,i={};return Object.entries(l).forEach(([e,t])=>{null==t||""===t||Array.isArray(t)&&0===t.length||(i[e]=t)}),i},[r]),z=(0,s.useMemo)(()=>Object.keys(M).length>0,[M]),T=h.length>=5,I=(0,s.useCallback)(e=>{l(t=>({...t,...e,page:e.page||1}))},[]),B=(0,s.useCallback)(e=>{l(t=>({...t,page:e}))},[]),q=r.page||1,E=r.limit||100,G=Math.ceil(S/E),X=Math.min(q*E,S);return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(y,{searchParams:r,onSearch:I,colleges:w}),(0,t.jsx)("section",{className:"py-4 sm:py-8 px-4",children:(0,t.jsxs)("div",{className:"container mx-auto",children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-xl sm:text-2xl font-bold mb-3 lg:mb-0","data-testid":"text-results-title",children:["Colleges (",(0,t.jsx)("span",{"data-testid":"text-filtered-count",children:S.toLocaleString()}),")"]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[h.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Saved Filters:"}),h.map(e=>{let s,a=(s=e.filters,(M.query||void 0)===(s.query||void 0)&&JSON.stringify(M.states||[])===JSON.stringify(s.states||[])&&JSON.stringify(M.regions||[])===JSON.stringify(s.regions||[])&&JSON.stringify(M.types||[])===JSON.stringify(s.types||[])&&JSON.stringify(M.sizes||[])===JSON.stringify(s.sizes||[])&&(M.tuitionMin||void 0)===(s.tuitionMin||void 0)&&(M.tuitionMax||void 0)===(s.tuitionMax||void 0)&&(M.enrollmentMin||void 0)===(s.enrollmentMin||void 0)&&(M.enrollmentMax||void 0)===(s.enrollmentMax||void 0)&&(M.acceptanceRateMin||void 0)===(s.acceptanceRateMin||void 0)&&(M.acceptanceRateMax||void 0)===(s.acceptanceRateMax||void 0));return(0,t.jsxs)("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm border transition-all ${a?"bg-amber-200 text-amber-900 border-amber-300 ring-2 ring-amber-300 shadow-md font-medium":"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-150"}`,children:[(0,t.jsxs)("button",{onClick:()=>{l(t=>({...t,...e.filters,page:1}))},className:`hover:underline ${a?"cursor-default":""}`,"data-testid":`button-apply-filter-${e.id}`,disabled:a,children:[e.name," ",a&&"✓"]}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void x(e=>e.filter(e=>e.id!==t))},className:`ml-1 hover:opacity-75 ${a?"text-amber-700":"text-amber-600 hover:text-amber-800"}`,"data-testid":`button-delete-filter-${e.id}`,children:(0,t.jsx)(n.X,{className:"w-3 h-3"})})]},e.id)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 sm:flex-initial",children:[(0,t.jsx)("label",{htmlFor:"sort-select",className:"text-sm text-muted-foreground whitespace-nowrap hidden sm:inline",children:"Sort by:"}),(0,t.jsxs)("select",{id:"sort-select",name:"sort",className:"px-2 sm:px-3 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring text-sm w-full sm:w-auto",value:`${r.sortBy}-${r.sortOrder}`,onChange:e=>{let[t,s]=e.target.value.split("-");I({sortBy:t,sortOrder:s})},"data-testid":"select-sort",children:[(0,t.jsx)("option",{value:"relevance-asc",children:"Relevance"}),(0,t.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,t.jsx)("option",{value:"name-desc",children:"Name (Z-A)"}),(0,t.jsx)("option",{value:"tuition-asc",children:"Tuition (Low to High)"}),(0,t.jsx)("option",{value:"tuition-desc",children:"Tuition (High to Low)"}),(0,t.jsx)("option",{value:"enrollment-desc",children:"School Size (Large to Small)"}),(0,t.jsx)("option",{value:"enrollment-asc",children:"School Size (Small to Large)"}),(0,t.jsx)("option",{value:"acceptance-asc",children:"Acceptance Rate (Low to High)"}),(0,t.jsx)("option",{value:"acceptance-desc",children:"Acceptance Rate (High to Low)"})]})]}),(0,t.jsxs)("div",{className:"flex border border-border rounded-lg overflow-hidden",children:[(0,t.jsx)(m.Button,{variant:"grid"===i?"default":"ghost",size:"sm",onClick:()=>o("grid"),"data-testid":"button-view-grid",children:(0,t.jsx)(P.Grid,{className:"w-4 h-4"})}),(0,t.jsx)(m.Button,{variant:"list"===i?"default":"ghost",size:"sm",onClick:()=>o("list"),"data-testid":"button-view-list",children:(0,t.jsx)(H,{className:"w-4 h-4"})}),(0,t.jsx)(m.Button,{variant:"table"===i?"default":"ghost",size:"sm",onClick:()=>o("table"),"data-testid":"button-view-table",children:(0,t.jsx)(J.Table,{className:"w-4 h-4"})})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(O,{searchParams:r,onRemoveFilter:e=>{l(t=>{let s={...t};return"tuitionMin"===e||"tuitionMax"===e?(delete s.tuitionMin,delete s.tuitionMax):"enrollmentMin"===e||"enrollmentMax"===e?(delete s.enrollmentMin,delete s.enrollmentMax):delete s[e],{...s,page:1}})},onClearAll:()=>{l(e=>({query:"",page:1,limit:e.limit,sortBy:e.sortBy,sortOrder:e.sortOrder}))}}),z&&(0,t.jsxs)(m.Button,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"text-blue-600 border-blue-200 hover:bg-blue-50","data-testid":"button-save-filters",children:[(0,t.jsx)(Q,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}),$&&!k&&(0,t.jsxs)("div",{className:"text-center py-12","data-testid":"error-message",children:[(0,t.jsxs)("p",{className:"text-destructive",children:["Error loading colleges: ",$.message]}),(0,t.jsx)(m.Button,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]}),k&&(0,t.jsxs)("div",{className:"animate-in fade-in duration-300",children:["table"===i&&(0,t.jsx)(D,{}),"grid"===i&&(0,t.jsx)(L,{}),"list"===i&&(0,t.jsx)(V,{})]}),!k&&!$&&(0,t.jsxs)("div",{className:"relative",children:[C&&(0,t.jsxs)("div",{className:"absolute inset-0 z-10 animate-in fade-in duration-200",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-[1px] rounded-lg"}),(0,t.jsxs)("div",{className:"relative pt-4 px-1 opacity-80",children:["table"===i&&(0,t.jsx)(D,{rows:6}),"grid"===i&&(0,t.jsx)(L,{count:6}),"list"===i&&(0,t.jsx)(V,{count:4})]})]}),(0,t.jsxs)("div",{className:`transition-opacity duration-300 ${C?"opacity-30":"opacity-100"}`,children:["table"===i&&(0,t.jsx)(R,{colleges:w,searchParams:r,onSort:(e,t)=>I({sortBy:e,sortOrder:t})}),"grid"===i&&(0,t.jsx)("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:w.map(e=>(0,t.jsx)(F.default,{college:e,viewMode:"grid"},e.id))}),"list"===i&&(0,t.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,t.jsx)(F.default,{college:e,viewMode:"list"},e.id))}),G>1&&(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6 sm:mt-8 gap-3",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",((q-1)*E+1).toLocaleString(),"-",X.toLocaleString()," of"," ",S.toLocaleString()," colleges"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(m.Button,{variant:"outline",size:"sm",onClick:()=>B(q-1),disabled:q<=1,"data-testid":"button-prev-page",children:[(0,t.jsx)(K.ChevronLeft,{className:"w-4 h-4 sm:mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Previous"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[q>3&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Button,{variant:1===q?"default":"ghost",size:"sm",onClick:()=>B(1),"data-testid":"button-page-1",children:"1"}),q>4&&(0,t.jsx)("span",{className:"px-1 sm:px-2",children:"..."})]}),Array.from({length:Math.min(5,G)},(e,s)=>{let a=Math.max(1,q-2)+s;return a>G||1===a&&q>3||a===G&&q<G-2?null:(0,t.jsx)(m.Button,{variant:q===a?"default":"ghost",size:"sm",onClick:()=>B(a),"data-testid":`button-page-${a}`,children:a},a)}),q<G-2&&(0,t.jsxs)(t.Fragment,{children:[q<G-3&&(0,t.jsx)("span",{className:"px-1 sm:px-2",children:"..."}),(0,t.jsx)(m.Button,{variant:G===q?"default":"ghost",size:"sm",onClick:()=>B(G),"data-testid":`button-page-${G}`,children:G})]})]}),(0,t.jsxs)(m.Button,{variant:"outline",size:"sm",onClick:()=>B(q+1),disabled:q>=G,"data-testid":"button-next-page",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,t.jsx)(U.ChevronRight,{className:"w-4 h-4 sm:ml-1"})]})]})]})]})]})]})}),(0,t.jsx)(A,{open:d,onClose:()=>c(!1),onSave:(e,t)=>{let s={id:Date.now().toString(),name:e,filters:M,createdAt:new Date};t?x(e=>e.map(e=>e.id===t?s:e)):x(e=>[...e,s]),c(!1)},suggestedName:(e=[],M.states&&M.states.length>0&&(1===M.states.length?e.push(M.states[0]):e.push(`${M.states.length} States`)),M.types&&M.types.length>0&&(1===M.types.length?e.push(M.types[0]):e.push(`${M.types.length} Types`)),M.sizes&&M.sizes.length>0&&e.push(M.sizes.join(", ")),(M.tuitionMin||M.tuitionMax)&&(M.tuitionMin&&M.tuitionMax?e.push(`$${M.tuitionMin/1e3}k-${M.tuitionMax/1e3}k`):M.tuitionMin?e.push(`>$${M.tuitionMin/1e3}k`):M.tuitionMax&&e.push(`<$${M.tuitionMax/1e3}k`)),e.length>0?e.join(" + "):"Custom Filter"),savedFilters:h,isAtLimit:T})]})}e.s(["default",()=>G],45500)}]);