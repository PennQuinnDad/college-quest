(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72906,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(66027),i=e.i(54616),l=e.i(12598),n=e.i(36556),r=e.i(19455),o=e.i(57428),c=e.i(93479),d=e.i(10204),h=e.i(15288),u=e.i(87486),m=e.i(76639),x=e.i(67489),g=e.i(75157);let p=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,g.cn)("w-full caption-bottom text-sm",e),...t})}));p.displayName="Table";let j=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("thead",{ref:s,className:(0,g.cn)("border-b border-border bg-muted/50 [&_tr]:border-b",e),...t}));j.displayName="TableHeader";let v=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tbody",{ref:s,className:(0,g.cn)("[&_tr:last-child]:border-0",e),...t}));v.displayName="TableBody",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tfoot",{ref:s,className:(0,g.cn)("border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let y=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tr",{ref:s,className:(0,g.cn)("border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));y.displayName="TableRow";let f=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("th",{ref:s,className:(0,g.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));f.displayName="TableHead";let b=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("td",{ref:s,className:(0,g.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));b.displayName="TableCell",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("caption",{ref:s,className:(0,g.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var N=e.i(81140),S=e.i(30030),C=e.i(42727),w=e.i(96626),I=e.i(48425),T=e.i(86318),k=e.i(69340),L=e.i(10772),D="Tabs",[P,F]=(0,S.createContextScope)(D,[C.createRovingFocusGroupScope]),E=(0,C.createRovingFocusGroupScope)(),[R,B]=P(D),M=t.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,onValueChange:l,defaultValue:n,orientation:r="horizontal",dir:o,activationMode:c="automatic",...d}=e,h=(0,T.useDirection)(o),[u,m]=(0,k.useControllableState)({prop:i,onChange:l,defaultProp:n??"",caller:D});return(0,a.jsx)(R,{scope:s,baseId:(0,L.useId)(),value:u,onValueChange:m,orientation:r,dir:h,activationMode:c,children:(0,a.jsx)(I.Primitive.div,{dir:h,"data-orientation":r,...d,ref:t})})});M.displayName=D;var A="TabsList",z=t.forwardRef((e,t)=>{let{__scopeTabs:s,loop:i=!0,...l}=e,n=B(A,s),r=E(s);return(0,a.jsx)(C.Root,{asChild:!0,...r,orientation:n.orientation,dir:n.dir,loop:i,children:(0,a.jsx)(I.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...l,ref:t})})});z.displayName=A;var O="TabsTrigger",$=t.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,disabled:l=!1,...n}=e,r=B(O,s),o=E(s),c=K(r.baseId,i),d=H(r.baseId,i),h=i===r.value;return(0,a.jsx)(C.Item,{asChild:!0,...o,focusable:!l,active:h,children:(0,a.jsx)(I.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:c,...n,ref:t,onMouseDown:(0,N.composeEventHandlers)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():r.onValueChange(i)}),onKeyDown:(0,N.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&r.onValueChange(i)}),onFocus:(0,N.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==r.activationMode;h||l||!e||r.onValueChange(i)})})})});$.displayName=O;var q="TabsContent",V=t.forwardRef((e,s)=>{let{__scopeTabs:i,value:l,forceMount:n,children:r,...o}=e,c=B(q,i),d=K(c.baseId,l),h=H(c.baseId,l),u=l===c.value,m=t.useRef(u);return t.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(w.Presence,{present:n||u,children:({present:t})=>(0,a.jsx)(I.Primitive.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!t,id:h,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:m.current?"0s":void 0},children:t&&r})})});function K(e,a){return`${e}-trigger-${a}`}function H(e,a){return`${e}-content-${a}`}V.displayName=q;let U=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(z,{ref:s,className:(0,g.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));U.displayName=z.displayName;let Q=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)($,{ref:s,className:(0,g.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Q.displayName=$.displayName;let G=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(V,{ref:s,className:(0,g.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));G.displayName=V.displayName;var W=e.i(27612),J=e.i(88511),_=e.i(75254);let X=(0,_.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var Y=e.i(92270),Z=e.i(55436),ee=e.i(39616),ea=e.i(32095);let et=(0,_.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var es=e.i(37727);let ei={"01":"Agriculture","03":"Natural Resources & Conservation","04":"Architecture","05":"Area, Ethnic, & Gender Studies","09":"Communication & Journalism",10:"Communications Technologies",11:"Computer & Information Sciences",12:"Culinary & Personal Services",13:"Education",14:"Engineering",15:"Engineering Technologies",16:"Foreign Languages & Linguistics",19:"Family & Consumer Sciences",22:"Law",23:"English Language & Literature",24:"Liberal Arts & General Studies",25:"Library Science",26:"Biological Sciences",27:"Mathematics & Statistics",29:"Military Technologies",30:"Interdisciplinary Studies",31:"Parks, Recreation & Fitness",38:"Philosophy & Religious Studies",39:"Theology & Religious Vocations",40:"Physical Sciences",41:"Science Technologies",42:"Psychology",43:"Homeland Security & Law Enforcement",44:"Public Administration & Social Services",45:"Social Sciences",46:"Construction Trades",47:"Mechanic & Repair Technologies",48:"Precision Production",49:"Transportation & Materials Moving",50:"Visual & Performing Arts",51:"Health Professions",52:"Business",54:"History"};function el({onLogin:e}){let[s,i]=(0,t.useState)(""),[l,n]=(0,t.useState)(!1),[o,u]=(0,t.useState)(""),m=async a=>{a.preventDefault(),u(""),n(!0);try{await e(s)}catch(e){u(e.message||"Login failed")}finally{n(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] bg-gray-50",children:(0,a.jsxs)(h.Card,{className:"w-full max-w-md",children:[(0,a.jsxs)(h.CardHeader,{children:[(0,a.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(ee.Settings,{className:"h-5 w-5"}),"Admin Login"]}),(0,a.jsx)(h.CardDescription,{children:"Enter the admin password to access the college management dashboard"})]}),(0,a.jsx)(h.CardContent,{children:(0,a.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[o&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-600",children:o}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"password",children:"Password"}),(0,a.jsx)(c.Input,{id:"password",type:"password",value:s,onChange:e=>i(e.target.value),placeholder:"Enter admin password",required:!0,disabled:l})]}),(0,a.jsx)(r.Button,{type:"submit",className:"w-full",disabled:l,children:l?"Logging in...":"Login"})]})})]})})})}function en({college:e,onSave:s,onCancel:i,isLoading:l}){let[n,o]=(0,t.useState)({name:e?.name||"",city:e?.city||"",state:e?.state||"",region:e?.region||"",website:e?.website||"",type:e?.type||"",size:e?.size||"",tuitionInState:e?.tuitionInState||void 0,tuitionOutOfState:e?.tuitionOutOfState||void 0,acceptanceRate:e?.acceptanceRate||void 0,enrollment:e?.enrollment||void 0,description:e?.description||""});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"name",children:"College Name *"}),(0,a.jsx)(c.Input,{id:"name",value:n.name,onChange:e=>o({...n,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"city",children:"City *"}),(0,a.jsx)(c.Input,{id:"city",value:n.city,onChange:e=>o({...n,city:e.target.value}),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"state",children:"State *"}),(0,a.jsx)(c.Input,{id:"state",value:n.state,onChange:e=>o({...n,state:e.target.value}),placeholder:"CA",required:!0,maxLength:2})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"region",children:"Region"}),(0,a.jsxs)(x.Select,{value:n.region||"",onValueChange:e=>o({...n,region:e}),children:[(0,a.jsx)(x.SelectTrigger,{children:(0,a.jsx)(x.SelectValue,{placeholder:"Select region"})}),(0,a.jsxs)(x.SelectContent,{children:[(0,a.jsx)(x.SelectItem,{value:"",children:"None"}),(0,a.jsx)(x.SelectItem,{value:"Northeast",children:"Northeast"}),(0,a.jsx)(x.SelectItem,{value:"South",children:"South"}),(0,a.jsx)(x.SelectItem,{value:"Midwest",children:"Midwest"}),(0,a.jsx)(x.SelectItem,{value:"West",children:"West"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"type",children:"Type"}),(0,a.jsxs)(x.Select,{value:n.type||"",onValueChange:e=>o({...n,type:e}),children:[(0,a.jsx)(x.SelectTrigger,{children:(0,a.jsx)(x.SelectValue,{placeholder:"Select type"})}),(0,a.jsxs)(x.SelectContent,{children:[(0,a.jsx)(x.SelectItem,{value:"",children:"None"}),(0,a.jsx)(x.SelectItem,{value:"Public",children:"Public"}),(0,a.jsx)(x.SelectItem,{value:"Private",children:"Private"}),(0,a.jsx)(x.SelectItem,{value:"Community",children:"Community"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"size",children:"Size"}),(0,a.jsxs)(x.Select,{value:n.size||"",onValueChange:e=>o({...n,size:e}),children:[(0,a.jsx)(x.SelectTrigger,{children:(0,a.jsx)(x.SelectValue,{placeholder:"Select size"})}),(0,a.jsxs)(x.SelectContent,{children:[(0,a.jsx)(x.SelectItem,{value:"",children:"None"}),(0,a.jsx)(x.SelectItem,{value:"Small",children:"Small"}),(0,a.jsx)(x.SelectItem,{value:"Medium",children:"Medium"}),(0,a.jsx)(x.SelectItem,{value:"Large",children:"Large"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"website",children:"Website"}),(0,a.jsx)(c.Input,{id:"website",type:"url",value:n.website||"",onChange:e=>o({...n,website:e.target.value}),placeholder:"https://example.edu"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"tuitionInState",children:"In-State Tuition ($)"}),(0,a.jsx)(c.Input,{id:"tuitionInState",type:"number",value:n.tuitionInState||"",onChange:e=>o({...n,tuitionInState:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"25000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"tuitionOutOfState",children:"Out-of-State Tuition ($)"}),(0,a.jsx)(c.Input,{id:"tuitionOutOfState",type:"number",value:n.tuitionOutOfState||"",onChange:e=>o({...n,tuitionOutOfState:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"45000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"acceptanceRate",children:"Acceptance Rate (%)"}),(0,a.jsx)(c.Input,{id:"acceptanceRate",type:"number",step:"0.1",min:"0",max:"100",value:n.acceptanceRate||"",onChange:e=>o({...n,acceptanceRate:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"25.5"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"enrollment",children:"Enrollment"}),(0,a.jsx)(c.Input,{id:"enrollment",type:"number",value:n.enrollment||"",onChange:e=>o({...n,enrollment:e.target.value?parseInt(e.target.value):void 0}),placeholder:"5000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"description",children:"Description"}),(0,a.jsx)(c.Input,{id:"description",value:n.description||"",onChange:e=>o({...n,description:e.target.value}),placeholder:"A brief description of the college..."})]}),(0,a.jsxs)(m.DialogFooter,{children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:i,disabled:l,children:"Cancel"}),(0,a.jsx)(r.Button,{type:"submit",disabled:l,children:l?"Saving...":e?"Update College":"Create College"})]})]})}function er({school:e,onSave:s,onCancel:i,isLoading:l,token:n}){let[o,h]=(0,t.useState)({name:e?.name||"",collegeId:e?.collegeId||"",category:e?.category||"",cipCode:e?.cipCode||"",description:e?.description||"",website:e?.website||""}),[g,p]=(0,t.useState)(""),[j,v]=(0,t.useState)([]),[y,f]=(0,t.useState)(e?.collegeName||""),[b,N]=(0,t.useState)(!1),S=Object.values(ei).sort();return(0,t.useEffect)(()=>{if(!g.trim()||g.length<2)return void v([]);let e=setTimeout(async()=>{try{let e=await fetch(`/api/admin/colleges?query=${encodeURIComponent(g)}&limit=10`,{headers:{Authorization:`Bearer ${n}`}});if(e.ok){let a=await e.json();v(a.colleges||[])}}catch(e){console.error("Failed to search colleges:",e)}},300);return()=>clearTimeout(e)},[g,n]),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(o)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"schoolName",children:"School Name *"}),(0,a.jsx)(c.Input,{id:"schoolName",value:o.name,onChange:e=>h({...o,name:e.target.value}),placeholder:"e.g., Wharton School of Business",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"collegeSearch",children:"College *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Input,{id:"collegeSearch",value:y||g,onChange:e=>{p(e.target.value),f(""),h({...o,collegeId:""}),N(!0)},onFocus:()=>N(!0),placeholder:"Search for a college...",required:!o.collegeId}),o.collegeId&&(0,a.jsxs)(u.Badge,{variant:"secondary",className:"absolute right-2 top-1/2 -translate-y-1/2 cursor-pointer",onClick:()=>{f(""),p(""),h({...o,collegeId:""})},children:["Selected ",(0,a.jsx)(es.X,{className:"h-3 w-3 ml-1"})]}),b&&j.length>0&&!o.collegeId&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-48 overflow-y-auto",children:j.map(e=>(0,a.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>{h({...o,collegeId:e.id}),f(`${e.name} (${e.city}, ${e.state})`),N(!1),v([])},children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-muted-foreground ml-2",children:[e.city,", ",e.state]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"category",children:"Category *"}),(0,a.jsxs)(x.Select,{value:o.category,onValueChange:e=>h({...o,category:e}),children:[(0,a.jsx)(x.SelectTrigger,{children:(0,a.jsx)(x.SelectValue,{placeholder:"Select category"})}),(0,a.jsx)(x.SelectContent,{children:S.map(e=>(0,a.jsx)(x.SelectItem,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"cipCode",children:"CIP Code"}),(0,a.jsx)(c.Input,{id:"cipCode",value:o.cipCode||"",onChange:e=>h({...o,cipCode:e.target.value}),placeholder:"e.g., 52.02"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"schoolWebsite",children:"Website"}),(0,a.jsx)(c.Input,{id:"schoolWebsite",type:"url",value:o.website||"",onChange:e=>h({...o,website:e.target.value}),placeholder:"https://example.edu/school"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"schoolDescription",children:"Description"}),(0,a.jsx)(c.Input,{id:"schoolDescription",value:o.description||"",onChange:e=>h({...o,description:e.target.value}),placeholder:"Brief description of the school or program..."})]}),(0,a.jsxs)(m.DialogFooter,{children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:i,disabled:l,children:"Cancel"}),(0,a.jsx)(r.Button,{type:"submit",disabled:l||!o.collegeId||!o.category,children:l?"Saving...":e?"Update School":"Create School"})]})]})}function eo({token:e}){let[n,d]=(0,t.useState)(""),[h,x]=(0,t.useState)(1),[g,N]=(0,t.useState)(null),[S,C]=(0,t.useState)(!1),[w,I]=(0,t.useState)(!1),[T,k]=(0,t.useState)(new Set),L=(0,l.useQueryClient)(),D=async(a,t="GET",s)=>{let i=await fetch(a,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:s?JSON.stringify(s):void 0});if(!i.ok){let e=await i.text();throw Error(`${i.status}: ${e}`)}return i.json()},{data:P,isLoading:F}=(0,s.useQuery)({queryKey:["/api/admin/schools",h,n],queryFn:()=>{let e=new URLSearchParams({page:h.toString(),limit:"25",sortBy:"name",sortOrder:"asc"});return n.trim()&&e.set("query",n.trim()),D(`/api/admin/schools?${e.toString()}`)}}),E=(0,i.useMutation)({mutationFn:e=>D("/api/admin/schools","POST",e),onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/schools"]}),C(!1)},onError:e=>{console.error("Create school error:",e)}}),R=(0,i.useMutation)({mutationFn:({id:e,data:a})=>D(`/api/admin/schools/${e}`,"PUT",a),onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/schools"]}),I(!1),N(null)},onError:e=>{console.error("Update school error:",e)}}),B=(0,i.useMutation)({mutationFn:e=>D(`/api/admin/schools/${e}`,"DELETE"),onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/schools"]})},onError:e=>{console.error("Delete school error:",e)}}),M=(0,i.useMutation)({mutationFn:e=>D("/api/admin/schools","DELETE",{ids:e}),onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/schools"]}),k(new Set)},onError:e=>{console.error("Bulk delete error:",e)}}),A=P?.schools||[],z=P?.total||0,O=Math.ceil(z/25);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(Z.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(c.Input,{placeholder:"Search schools by name, category...",value:n,onChange:e=>{d(e.target.value),x(1),k(new Set)},className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[T.size>0&&(0,a.jsxs)(r.Button,{variant:"destructive",size:"sm",onClick:()=>{let e=T.size;0!==e&&window.confirm(`Are you sure you want to delete ${e} school${e>1?"s":""}? This cannot be undone.`)&&M.mutate(Array.from(T))},disabled:M.isPending,children:[(0,a.jsx)(W.Trash2,{className:"h-4 w-4 mr-2"}),M.isPending?"Deleting...":`Delete ${T.size} selected`]}),(0,a.jsxs)(u.Badge,{variant:"secondary",children:[z," schools"]}),n&&(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{d(""),x(1)},children:"Clear"}),(0,a.jsxs)(m.Dialog,{open:S,onOpenChange:C,children:[(0,a.jsx)(m.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{children:[(0,a.jsx)(X,{className:"h-4 w-4 mr-2"}),"Add School"]})}),(0,a.jsxs)(m.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(m.DialogHeader,{children:[(0,a.jsx)(m.DialogTitle,{children:"Create New School"}),(0,a.jsx)(m.DialogDescription,{children:"Add a new school or program to a college"})]}),(0,a.jsx)(er,{onSave:e=>E.mutate(e),onCancel:()=>C(!1),isLoading:E.isPending,token:e})]})]})]})]}),F?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading schools..."}):0===A.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:n?"No schools match your search.":"No schools found. Run the enrichment script or add one manually!"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(p,{children:[(0,a.jsx)(j,{children:(0,a.jsxs)(y,{children:[(0,a.jsx)(f,{className:"w-10",children:(0,a.jsx)(o.Checkbox,{checked:A.length>0&&T.size===A.length,onCheckedChange:()=>{T.size===A.length?k(new Set):k(new Set(A.map(e=>e.id)))},"aria-label":"Select all"})}),(0,a.jsx)(f,{children:"Name"}),(0,a.jsx)(f,{children:"College"}),(0,a.jsx)(f,{children:"Category"}),(0,a.jsx)(f,{children:"Source"}),(0,a.jsx)(f,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(v,{children:A.map(e=>(0,a.jsxs)(y,{className:T.has(e.id)?"bg-muted/50":"",children:[(0,a.jsx)(b,{children:(0,a.jsx)(o.Checkbox,{checked:T.has(e.id),onCheckedChange:()=>{var a;return a=e.id,void k(e=>{let t=new Set(e);return t.has(a)?t.delete(a):t.add(a),t})},"aria-label":`Select ${e.name}`})}),(0,a.jsx)(b,{className:"font-medium",children:e.name}),(0,a.jsx)(b,{children:(0,a.jsxs)("span",{className:"text-sm",children:[e.collegeName||"â€”",e.collegeCity&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:[", ",e.collegeCity,", ",e.collegeState]})]})}),(0,a.jsx)(b,{children:(0,a.jsx)(u.Badge,{variant:"secondary",children:e.category})}),(0,a.jsx)(b,{children:(0,a.jsx)(u.Badge,{variant:"manual"===e.source?"default":"secondary",children:e.source})}),(0,a.jsx)(b,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{N(e),I(!0)},disabled:R.isPending||B.isPending,children:(0,a.jsx)(J.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{var a;return a=e.id,void(window.confirm("Are you sure you want to delete this school?")&&B.mutate(a))},disabled:B.isPending||R.isPending,className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(W.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]})}),O>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>{x(h-1),k(new Set)},disabled:1===h||F,children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",h," of ",O]}),(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>{x(h+1),k(new Set)},disabled:h===O||F,children:"Next"})]})]}),(0,a.jsx)(m.Dialog,{open:w,onOpenChange:I,children:(0,a.jsxs)(m.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(m.DialogHeader,{children:[(0,a.jsx)(m.DialogTitle,{children:"Edit School"}),(0,a.jsx)(m.DialogDescription,{children:"Update school information"})]}),g&&(0,a.jsx)(er,{school:g,onSave:e=>R.mutate({id:g.id,data:e}),onCancel:()=>{I(!1),N(null)},isLoading:R.isPending,token:e})]})})]})}function ec({token:e,onLogout:n}){let[o,d]=(0,t.useState)(""),[h,x]=(0,t.useState)(1),[g,N]=(0,t.useState)(null),[S,C]=(0,t.useState)(!1),[w,I]=(0,t.useState)(!1),T=(0,l.useQueryClient)(),k=async(a,t="GET",s)=>{let i=await fetch(a,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:s?JSON.stringify(s):void 0});if(!i.ok){let e=await i.text();throw Error(`${i.status}: ${e}`)}return i.json()},{data:L,isLoading:D}=(0,s.useQuery)({queryKey:["/api/admin/colleges",h,o],queryFn:()=>{let e=new URLSearchParams({page:h.toString(),limit:"25",sortBy:"name",sortOrder:"asc"});return o.trim()&&e.set("query",o.trim()),k(`/api/admin/colleges?${e.toString()}`)}}),P=(0,i.useMutation)({mutationFn:e=>k("/api/admin/colleges","POST",e),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/admin/colleges"]}),C(!1)},onError:e=>{console.error("Create error:",e)}}),F=(0,i.useMutation)({mutationFn:({id:e,data:a})=>k(`/api/admin/colleges/${e}`,"PUT",a),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/admin/colleges"]}),I(!1),N(null)},onError:e=>{console.error("Update error:",e)}}),E=(0,i.useMutation)({mutationFn:e=>k(`/api/admin/colleges/${e}`,"DELETE"),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/admin/colleges"]})},onError:e=>{console.error("Delete error:",e)}}),R=L?.colleges||[],B=L?.total||0,A=Math.ceil(B/25);return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"border-b bg-white",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(ee.Settings,{className:"h-6 w-6 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage colleges & schools"})]})]}),(0,a.jsxs)(r.Button,{onClick:n,variant:"outline",children:[(0,a.jsx)(Y.LogOut,{className:"h-4 w-4 mr-2"}),"Logout"]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)(M,{defaultValue:"colleges",children:[(0,a.jsxs)(U,{className:"mb-6",children:[(0,a.jsxs)(Q,{value:"colleges",className:"gap-2",children:[(0,a.jsx)(et,{className:"h-4 w-4"}),"Colleges"]}),(0,a.jsxs)(Q,{value:"schools",className:"gap-2",children:[(0,a.jsx)(ea.GraduationCap,{className:"h-4 w-4"}),"Schools"]})]}),(0,a.jsxs)(G,{value:"colleges",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(Z.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(c.Input,{placeholder:"Search colleges by name, city, state...",value:o,onChange:e=>{d(e.target.value),x(1)},className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(u.Badge,{variant:"secondary",children:[B," colleges"]}),o&&(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{d(""),x(1)},children:"Clear"}),(0,a.jsxs)(m.Dialog,{open:S,onOpenChange:C,children:[(0,a.jsx)(m.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{children:[(0,a.jsx)(X,{className:"h-4 w-4 mr-2"}),"Add College"]})}),(0,a.jsxs)(m.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(m.DialogHeader,{children:[(0,a.jsx)(m.DialogTitle,{children:"Create New College"}),(0,a.jsx)(m.DialogDescription,{children:"Add a new college to the database"})]}),(0,a.jsx)(en,{onSave:e=>P.mutate(e),onCancel:()=>C(!1),isLoading:P.isPending})]})]})]})]}),D?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading colleges..."}):0===R.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:o?"No colleges match your search.":"No colleges found. Start by adding one!"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(p,{children:[(0,a.jsx)(j,{children:(0,a.jsxs)(y,{children:[(0,a.jsx)(f,{children:"Name"}),(0,a.jsx)(f,{children:"Location"}),(0,a.jsx)(f,{children:"Type"}),(0,a.jsx)(f,{children:"Size"}),(0,a.jsx)(f,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(v,{children:R.map(e=>(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{className:"font-medium",children:e.name}),(0,a.jsxs)(b,{children:[e.city,", ",e.state]}),(0,a.jsx)(b,{children:e.type?(0,a.jsx)(u.Badge,{variant:"secondary",children:e.type}):"-"}),(0,a.jsx)(b,{children:e.size||"-"}),(0,a.jsx)(b,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{N(e),I(!0)},disabled:F.isPending||E.isPending,children:(0,a.jsx)(J.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{var a;return a=e.id,void(window.confirm("Are you sure you want to delete this college?")&&E.mutate(a))},disabled:E.isPending||F.isPending,className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(W.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]})}),A>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>x(h-1),disabled:1===h||D,children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",h," of ",A]}),(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>x(h+1),disabled:h===A||D,children:"Next"})]})]}),(0,a.jsx)(m.Dialog,{open:w,onOpenChange:I,children:(0,a.jsxs)(m.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(m.DialogHeader,{children:[(0,a.jsx)(m.DialogTitle,{children:"Edit College"}),(0,a.jsx)(m.DialogDescription,{children:"Update college information"})]}),g&&(0,a.jsx)(en,{college:g,onSave:e=>F.mutate({id:g.id,data:e}),onCancel:()=>{I(!1),N(null)},isLoading:F.isPending})]})})]}),(0,a.jsx)(G,{value:"schools",children:(0,a.jsx)(eo,{token:e})})]})})]})}function ed(){let{token:e,login:t,logout:s,isAuthenticated:i,isLoading:l}=(0,n.useAdminAuth)();return l?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(ee.Settings,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):i?(0,a.jsx)(ec,{token:e,onLogout:s}):(0,a.jsx)(el,{onLogin:t})}e.s(["default",()=>ed],72906)}]);