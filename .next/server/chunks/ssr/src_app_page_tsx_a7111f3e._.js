module.exports=[40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(50944),f=a.i(66718),g=a.i(87532),h=a.i(33508),i=a.i(24987);function j({value:a,onChange:j,onClear:k}){let[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(-1),[p,q]=(0,c.useState)(""),r=(0,c.useRef)(null),s=(0,c.useRef)(null),t=(0,c.useRef)(void 0),u=(0,e.useRouter)();(0,c.useEffect)(()=>{let b=setTimeout(()=>q(a),300);return()=>clearTimeout(b)},[a]);let{suggestions:v}=function({query:a,enabled:b=!0}){let c=a.trim(),e=b&&c.length>=2,{data:f,isLoading:g}=(0,d.useQuery)({queryKey:["/api/colleges/autocomplete",c],queryFn:async()=>{let a=await fetch(`/api/colleges/autocomplete?q=${encodeURIComponent(c)}`);return a.ok?a.json():{suggestions:[]}},enabled:e,staleTime:3e4,gcTime:6e4});return{suggestions:f?.suggestions||[],isLoading:e&&g}}({query:p}),w=(0,c.useRef)(0);(0,c.useEffect)(()=>{let a=w.current;w.current=v.length,v.length>0&&a!==v.length?document.activeElement===r.current&&queueMicrotask(()=>{m(!0),o(-1)}):0===v.length&&a>0&&queueMicrotask(()=>m(!1))},[v]);let x=(0,c.useCallback)(a=>{m(!1),u.push(`/college/${a.id}`)},[u]);return(0,c.useEffect)(()=>()=>{t.current&&clearTimeout(t.current)},[]),(0,b.jsxs)("div",{className:"relative w-full sm:max-w-md",children:[(0,b.jsx)("label",{htmlFor:"search-input",className:"sr-only",children:"Search colleges, programs, or locations"}),(0,b.jsx)(f.Input,{ref:r,id:"search-input",name:"search",type:"text",placeholder:"Search colleges, programs, or locations...",value:a,onChange:a=>j(a.target.value),onKeyDown:a=>{if(l&&0!==v.length)switch(a.key){case"ArrowDown":a.preventDefault(),o(a=>Math.min(a+1,v.length-1));break;case"ArrowUp":a.preventDefault(),o(a=>Math.max(a-1,-1));break;case"Enter":n>=0&&n<v.length&&(a.preventDefault(),x(v[n]));break;case"Escape":m(!1),o(-1)}},onFocus:()=>{v.length>0&&m(!0)},onBlur:()=>{t.current=setTimeout(()=>{m(!1),o(-1)},150)},className:"w-full pl-10 pr-10 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-ring","data-testid":"input-search",autoComplete:"off",role:"combobox","aria-expanded":l,"aria-haspopup":"listbox","aria-autocomplete":"list"}),(0,b.jsx)(g.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a&&(0,b.jsx)("button",{onClick:()=>{k(),m(!1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-clear-search",children:(0,b.jsx)(h.X,{className:"w-4 h-4"})}),l&&v.length>0&&(0,b.jsx)("div",{ref:s,role:"listbox",className:"absolute z-50 top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-md overflow-hidden",children:v.map((a,c)=>(0,b.jsxs)("button",{role:"option","aria-selected":c===n,onMouseDown:a=>{a.preventDefault()},onClick:()=>x(a),onMouseEnter:()=>o(c),className:`w-full text-left px-3 py-2 flex items-center gap-2 text-sm transition-colors ${c===n?"bg-accent text-accent-foreground":"hover:bg-accent/50"}`,children:[(0,b.jsx)(g.Search,{className:"w-3.5 h-3.5 text-muted-foreground shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("span",{className:"font-medium truncate block",children:a.name}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(i.MapPin,{className:"w-3 h-3"}),a.city,", ",a.state]})]})]},a.id))})]})}var k=a.i(80701),l=a.i(99570),m=a.i(76472),n=a.i(81560),o=a.i(70106);let p=(0,o.default)("clipboard-copy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);var q=a.i(54614),r=a.i(68114),s=a.i(90645),t=a.i(90663),u=a.i(78507),v=a.i(85259);function w({searchParams:a,onSearch:c,colleges:e}){let{data:f}=(0,d.useQuery)({queryKey:["/api/colleges/filters/states"],queryFn:async()=>{let a=await fetch("/api/colleges/filters/states");if(!a.ok)throw Error("Failed to fetch states");return a.json()}}),{data:g}=(0,d.useQuery)({queryKey:["/api/colleges/filters/regions"],queryFn:async()=>{let a=await fetch("/api/colleges/filters/regions");if(!a.ok)throw Error("Failed to fetch regions");return a.json()}}),{data:h}=(0,d.useQuery)({queryKey:["/api/colleges/filters/acceptance-ranges"],queryFn:async()=>{let a=await fetch("/api/colleges/filters/acceptance-ranges");if(!a.ok)throw Error("Failed to fetch acceptance ranges");return a.json()}}),{data:i}=(0,d.useQuery)({queryKey:["/api/schools/categories"],queryFn:async()=>{let a=await fetch("/api/schools/categories");if(!a.ok)throw Error("Failed to fetch program categories");return a.json()}}),{favoriteCount:o,clearAllFavorites:w}=(0,s.useFavorites)(),{folders:x,getCollegeIdsInFolder:y}=(0,t.useFolders)(),{toast:z}=(0,q.useToast)(),A=async()=>{let a;if(!e||0===e.length)return;let b=(a=["# My College List","","Here's a list of colleges that I'm interested in. What can you tell me about them? Can you compare them and help me understand the differences?",""],e.forEach((b,c)=>{a.push(`## ${c+1}. ${b.name}`);let d=[b.city,b.state].filter(Boolean).join(", ");d&&a.push(`- **Location:** ${d}`);let e=[b.type,b.size].filter(Boolean).join(", ");if(e&&a.push(`- **Type:** ${e}`),null!=b.tuitionInState&&null!=b.tuitionOutOfState?b.tuitionInState===b.tuitionOutOfState?a.push(`- **Tuition:** ${(0,r.formatCurrency)(b.tuitionInState)}`):a.push(`- **Tuition:** ${(0,r.formatCurrency)(b.tuitionInState)} (In-State) / ${(0,r.formatCurrency)(b.tuitionOutOfState)} (Out-of-State)`):null!=b.tuitionInState?a.push(`- **Tuition (In-State):** ${(0,r.formatCurrency)(b.tuitionInState)}`):null!=b.tuitionOutOfState&&a.push(`- **Tuition (Out-of-State):** ${(0,r.formatCurrency)(b.tuitionOutOfState)}`),null!=b.netCost&&a.push(`- **Net Cost:** ${(0,r.formatCurrency)(b.netCost)}`),null!=b.acceptanceRate&&a.push(`- **Acceptance Rate:** ${b.acceptanceRate.toFixed(1)}%`),null!=b.satMath||null!=b.satReading){let c=[];null!=b.satMath&&c.push(`${b.satMath} Math`),null!=b.satReading&&c.push(`${b.satReading} Reading`),a.push(`- **SAT:** ${c.join(", ")}`)}null!=b.actComposite&&a.push(`- **ACT Composite:** ${b.actComposite}`),null!=b.graduationRate&&a.push(`- **Graduation Rate:** ${b.graduationRate.toFixed(1)}%`),null!=b.enrollment&&a.push(`- **Enrollment:** ${(0,r.formatNumber)(b.enrollment)}`),b.programs&&b.programs.length>0&&a.push(`- **Programs:** ${b.programs.join(", ")}`),b.website&&a.push(`- **Website:** ${b.website}`),a.push("")}),a.join("\n"));try{await navigator.clipboard.writeText(b),z({title:"Copied to clipboard",description:`${e.length} college${1===e.length?"":"s"} exported as Markdown — paste into ChatGPT or Claude`})}catch{z({title:"Export failed",description:"Could not copy to clipboard. Check browser permissions.",variant:"destructive"})}};return(0,b.jsx)("section",{className:"py-4 sm:py-6 px-4 bg-card border-b border-border relative z-10",id:"search-section",children:(0,b.jsxs)("div",{className:"container mx-auto",children:[(0,b.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,b.jsx)(j,{value:a.query||"",onChange:a=>c({query:a}),onClear:()=>c({query:""})})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4 items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"state-select",className:"sr-only",children:"Filter by State"}),(0,b.jsxs)(k.Select,{value:"",onValueChange:b=>{if(b&&"all"!==b){let d=a.states||[];if(d.includes(b)){let a=d.filter(a=>a!==b);c({states:a.length>0?a:void 0})}else c({states:[...d,b]})}},children:[(0,b.jsx)(k.SelectTrigger,{id:"state-select",className:"w-[120px] sm:w-[140px]","data-testid":"select-state",children:(0,b.jsx)(k.SelectValue,{placeholder:a.states?.length?`${a.states.length} States`:"State"})}),(0,b.jsxs)(k.SelectContent,{children:[(a.states||[]).map(a=>(0,b.jsxs)(k.SelectItem,{value:a,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",a]},`selected-${a}`)),(f||[]).filter(b=>!a.states?.includes(b)).map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)(k.Select,{value:"",onValueChange:b=>{if(b&&"all"!==b){let d=a.regions||[];if(d.includes(b)){let a=d.filter(a=>a!==b);c({regions:a.length>0?a:void 0})}else c({regions:[...d,b]})}},children:[(0,b.jsx)(k.SelectTrigger,{id:"region-select",name:"region",className:"w-[120px] sm:w-[140px]","data-testid":"select-region",children:(0,b.jsx)(k.SelectValue,{placeholder:a.regions?.length?`${a.regions.length} Regions`:"Region"})}),(0,b.jsxs)(k.SelectContent,{children:[(a.regions||[]).map(a=>(0,b.jsxs)(k.SelectItem,{value:a,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",a]},`selected-${a}`)),(g||[]).filter(b=>!a.regions?.includes(b)).map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(k.Select,{value:"",onValueChange:b=>{if(b&&"all"!==b){let d=a.sizes||[];if(d.includes(b)){let a=d.filter(a=>a!==b);c({sizes:a.length>0?a:void 0})}else c({sizes:[...d,b]})}},children:[(0,b.jsx)(k.SelectTrigger,{id:"size-select",name:"size",className:"w-[120px] sm:w-[140px]","data-testid":"select-size",children:(0,b.jsx)(k.SelectValue,{placeholder:a.sizes?.length?`${a.sizes.length} Sizes`:"Size"})}),(0,b.jsxs)(k.SelectContent,{children:[(a.sizes||[]).map(a=>(0,b.jsxs)(k.SelectItem,{value:a,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",a]},`selected-${a}`)),["Small","Medium","Large"].filter(b=>!a.sizes?.includes(b)).map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(k.Select,{value:"",onValueChange:b=>{if(b&&"all"!==b){let d=a.acceptanceRanges||[];if(d.includes(b)){let a=d.filter(a=>a!==b);c({acceptanceRanges:a.length>0?a:void 0})}else c({acceptanceRanges:[...d,b]})}},children:[(0,b.jsx)(k.SelectTrigger,{id:"acceptance-ranges-select",name:"acceptanceRanges",className:"w-[140px] sm:w-[180px]","data-testid":"select-acceptance-ranges",children:(0,b.jsx)(k.SelectValue,{placeholder:a.acceptanceRanges?.length?`${a.acceptanceRanges.length} Ranges`:"Acceptance Rate"})}),(0,b.jsxs)(k.SelectContent,{children:[(a.acceptanceRanges||[]).map(a=>(0,b.jsxs)(k.SelectItem,{value:a,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",a]},`selected-${a}`)),(h||[]).filter(b=>!a.acceptanceRanges?.includes(b)).map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))]})]}),i&&i.length>0&&(0,b.jsxs)(k.Select,{value:"",onValueChange:b=>{if(b&&"all"!==b){let d=a.programCategories||[];if(d.includes(b)){let a=d.filter(a=>a!==b);c({programCategories:a.length>0?a:void 0})}else c({programCategories:[...d,b]})}},children:[(0,b.jsx)(k.SelectTrigger,{id:"program-category-select",name:"programCategory",className:"w-[140px] sm:w-[180px]","data-testid":"select-program-category",children:(0,b.jsx)(k.SelectValue,{placeholder:a.programCategories?.length?`${a.programCategories.length} Programs`:"Program"})}),(0,b.jsxs)(k.SelectContent,{children:[(a.programCategories||[]).map(a=>(0,b.jsxs)(k.SelectItem,{value:a,className:"bg-amber-100 text-amber-900 font-medium data-[highlighted]:bg-amber-200",children:["✓ ",a]},`selected-${a}`)),(i||[]).filter(b=>!a.programCategories?.includes(b)).map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 w-full sm:w-auto sm:ml-auto",children:[(0,b.jsxs)(l.Button,{variant:a.showFavoritesOnly?"default":"outline",onClick:()=>{a.showFavoritesOnly?c({showFavoritesOnly:void 0,folderId:void 0}):c({query:"",states:void 0,regions:void 0,sizes:void 0,acceptanceRanges:void 0,programCategories:void 0,tuitionMin:void 0,tuitionMax:void 0,enrollmentMin:void 0,enrollmentMax:void 0,acceptanceRateMin:void 0,acceptanceRateMax:void 0,showFavoritesOnly:!0,folderId:void 0,page:1})},className:"flex items-center gap-2 h-10","data-testid":"button-show-favorites",children:[(0,b.jsx)(m.Heart,{className:`w-4 h-4 ${o>0?"text-red-500":"text-gray-400"}`}),"Favorites (",o,")"]}),a.showFavoritesOnly&&x.length>0&&(0,b.jsxs)(k.Select,{value:a.folderId||"all",onValueChange:a=>c({folderId:"all"===a?void 0:a}),children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[160px] h-10",children:(0,b.jsx)(k.SelectValue,{placeholder:"All Favorites"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"All Favorites"}),x.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full shrink-0 ${(0,u.getFolderColorClass)(a.color)}`}),a.name," (",y(a.id).length,")"]})},a.id))]})]}),a.showFavoritesOnly&&e&&e.length>0&&(0,b.jsx)(v.TooltipProvider,{children:(0,b.jsxs)(v.Tooltip,{children:[(0,b.jsx)(v.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:A,className:"h-10 w-10 text-muted-foreground hover:text-primary","data-testid":"button-export-favorites",children:(0,b.jsx)(p,{className:"w-4 h-4"})})}),(0,b.jsx)(v.TooltipContent,{children:(0,b.jsx)("p",{children:"Copy favorites as Markdown for AI"})})]})}),o>0&&(0,b.jsx)(v.TooltipProvider,{children:(0,b.jsxs)(v.Tooltip,{children:[(0,b.jsx)(v.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:b=>{b.stopPropagation(),w(),a.showFavoritesOnly&&c({showFavoritesOnly:void 0})},className:"h-10 w-10 text-muted-foreground hover:text-destructive","data-testid":"button-clear-favorites",children:(0,b.jsx)(n.Trash2,{className:"w-4 h-4"})})}),(0,b.jsx)(v.TooltipContent,{children:(0,b.jsx)("p",{children:"Clear all favorites"})})]})})]})]})]})})}var x=a.i(38246),y=a.i(48714),z=a.i(15055),A=a.i(14574),B=a.i(52495);let C=(0,o.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var D=a.i(5784);function E({colleges:a,searchParams:d,onSort:e}){let[f,g]=(0,c.useState)(new Set),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),{isFavorite:o,toggleFavorite:p,addMultipleFavorites:q,removeMultipleFavorites:r}=(0,s.useFavorites)(),{isAdmin:t}=(0,y.useAuth)(),v=a=>{let b=d.sortBy===a&&"asc"===d.sortOrder?"desc":"asc";e(a,b)},w=a.length>0&&f.size===a.length,E=Array.from(f),F=E.length>0&&E.every(a=>o(a)),G=async()=>{if(t&&0!==E.length){i(!0);try{let a=await fetch("/api/admin/colleges",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({ids:E})});if(a.ok)g(new Set),k(!1),window.location.reload();else{let b=await a.json();alert(`Delete failed: ${b.message||"Unknown error"}`)}}catch(a){alert("Delete failed. Check console for details."),console.error("Bulk delete error:",a)}finally{i(!1)}}},H=a=>d.sortBy!==a?(0,b.jsx)(C,{className:"w-3 h-3 text-muted-foreground/50"}):"asc"===d.sortOrder?(0,b.jsx)(C,{className:"w-3 h-3 text-primary"}):(0,b.jsx)(D.ChevronDown,{className:"w-3 h-3 text-primary"}),I=a=>a?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(a):"N/A";return(0,b.jsxs)("div",{className:"space-y-4",children:[f.size>0&&(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 gap-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-amber-800",children:[f.size," college",1===f.size?"":"s"," selected"]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{F?r(E):q(E)},"data-testid":"button-bulk-favorite",children:[(0,b.jsx)(m.Heart,{className:`w-4 h-4 mr-1 sm:mr-2 ${F?"fill-red-500 text-red-500":""}`}),F?"Remove from Favorites":"Add to Favorites"]}),t&&(0,b.jsxs)(l.Button,{variant:"destructive",size:"sm",onClick:()=>k(!0),disabled:h,children:[(0,b.jsx)(n.Trash2,{className:"w-4 h-4 mr-2"}),"Delete ",f.size," Selected"]})]})]}),(0,b.jsx)("div",{className:"w-full overflow-x-auto bg-card rounded-lg border border-border",children:(0,b.jsxs)("table",{className:"w-full border-collapse","data-testid":"table-colleges",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border bg-gray-100",children:[(0,b.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground border-r border-border w-12 hidden sm:table-cell",children:(0,b.jsx)(z.Checkbox,{checked:w,onCheckedChange:b=>{b?g(new Set(a.map(a=>a.id))):g(new Set)},"data-testid":"checkbox-select-all"})}),(0,b.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[150px] sm:min-w-[200px]",children:(0,b.jsxs)("button",{onClick:()=>v("name"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-name",children:["College Name",H("name")]})}),(0,b.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[100px] sm:min-w-[120px]",children:(0,b.jsxs)("button",{onClick:()=>v("location"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-location",children:["Location",H("location")]})}),(0,b.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] hidden md:table-cell",children:(0,b.jsxs)("button",{onClick:()=>v("type"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-type",children:["Type",H("type")]})}),(0,b.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[100px] hidden lg:table-cell",children:(0,b.jsxs)("button",{onClick:()=>v("region"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-region",children:["Region",H("region")]})}),(0,b.jsx)("th",{className:"text-left p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] hidden lg:table-cell",children:(0,b.jsxs)("button",{onClick:()=>v("size"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full text-left text-sm","data-testid":"button-sort-size",children:["Size",H("size")]})}),(0,b.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] hidden lg:table-cell",children:(0,b.jsx)("span",{className:"flex items-center gap-1 justify-center text-sm",children:"Jesuit"})}),(0,b.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[90px] sm:min-w-[120px]",children:(0,b.jsxs)("button",{onClick:()=>v("tuition"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-tuition",children:["Tuition",H("tuition")]})}),(0,b.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[120px] hidden md:table-cell",children:(0,b.jsxs)("button",{onClick:()=>v("netCost"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-netcost",children:["Net Cost",H("netCost")]})}),(0,b.jsx)("th",{className:"text-right p-2 text-sm font-medium text-foreground border-r border-border min-w-[80px] sm:min-w-[100px]",children:(0,b.jsxs)("button",{onClick:()=>v("acceptance"),className:"flex items-center gap-1 hover:text-primary transition-colors w-full justify-end text-sm","data-testid":"button-sort-acceptance",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Acceptance"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Acc."}),H("acceptance")]})}),(0,b.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground min-w-[60px] sm:min-w-[80px]",children:(0,b.jsxs)("span",{className:"flex items-center gap-1 justify-center text-sm",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Favorite"}),(0,b.jsx)(m.Heart,{className:"w-4 h-4 sm:hidden"})]})}),(0,b.jsx)("th",{className:"text-center p-2 text-sm font-medium text-foreground min-w-[100px] hidden sm:table-cell",children:(0,b.jsx)("span",{className:"flex items-center gap-1 justify-center text-sm",children:"Website"})})]})}),(0,b.jsx)("tbody",{children:a.map((a,c)=>{var d;return(0,b.jsxs)("tr",{className:`border-b border-border hover:bg-amber-50/50 transition-colors ${c%2==0?"bg-white":"bg-gray-50"} ${f.has(a.id)?"ring-2 ring-primary/20 bg-primary/5":""} ${o(a.id)?"bg-red-50":""}`,"data-testid":`row-college-${a.id}`,children:[(0,b.jsx)("td",{className:"p-2 border-r border-border text-center hidden sm:table-cell",children:(0,b.jsx)(z.Checkbox,{checked:f.has(a.id),onCheckedChange:b=>{var c;let d;return c=a.id,d=new Set(f),void(b?d.add(c):d.delete(c),g(d))},"data-testid":`checkbox-college-${a.id}`})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(x.default,{href:`/college/${a.id}`,children:(0,b.jsx)("div",{className:"text-sm font-medium text-primary hover:text-primary/80 cursor-pointer transition-colors","data-testid":`link-college-name-${a.id}`,children:a.name})})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsxs)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-location-${a.id}`,children:[a.city,", ",a.state]})}),(0,b.jsx)("td",{className:"p-2 border-r border-border hidden md:table-cell",children:(0,b.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-type-${a.id}`,children:a.type||"N/A"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border hidden lg:table-cell",children:(0,b.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-region-${a.id}`,children:a.region||"N/A"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border hidden lg:table-cell",children:(0,b.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-college-size-${a.id}`,children:a.size||"N/A"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border text-center hidden lg:table-cell",children:(0,b.jsx)("div",{className:"text-xs","data-testid":`text-jesuit-${a.id}`,children:a.jesuit?(0,b.jsx)("span",{className:"text-blue-600 font-medium",children:"✓ Yes"}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"No"})})}),(0,b.jsx)("td",{className:"p-2 border-r border-border text-right",children:(0,b.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-tuition-${a.id}`,children:I(a.tuitionInState)})}),(0,b.jsx)("td",{className:"p-2 border-r border-border text-right hidden md:table-cell",children:(0,b.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-net-cost-${a.id}`,children:I(a.netCost)})}),(0,b.jsx)("td",{className:"p-2 border-r border-border text-right",children:(0,b.jsx)("div",{className:"text-xs text-muted-foreground","data-testid":`text-acceptance-${a.id}`,children:(d=a.acceptanceRate)?`${d.toFixed(1)}%`:"N/A"})}),(0,b.jsx)("td",{className:"p-2 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-0.5",children:[(0,b.jsx)(l.Button,{size:"sm",variant:"ghost",className:"h-7 px-1 sm:px-2",onClick:()=>p(a.id),"data-testid":`button-favorite-${a.id}`,children:(0,b.jsx)(m.Heart,{className:`w-4 h-4 ${o(a.id)?"fill-red-500 text-red-500":"text-gray-400 hover:text-red-400"}`})}),o(a.id)&&(0,b.jsx)(u.default,{collegeId:a.id,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-7 px-1 hidden sm:flex",children:(0,b.jsx)(D.ChevronDown,{className:"w-3.5 h-3.5 text-muted-foreground"})})}),(0,b.jsx)(u.FolderDots,{collegeId:a.id})]})}),(0,b.jsx)("td",{className:"p-2 text-center hidden sm:table-cell",children:(0,b.jsx)("div",{className:"flex justify-center",children:a.website&&(0,b.jsx)(l.Button,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",asChild:!0,children:(0,b.jsx)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer","data-testid":`link-website-${a.id}`,children:(0,b.jsx)(B.ExternalLink,{className:"w-3 h-3"})})})})})]},a.id)})})]})}),(0,b.jsx)(A.Dialog,{open:j,onOpenChange:k,children:(0,b.jsxs)(A.DialogContent,{children:[(0,b.jsxs)(A.DialogHeader,{children:[(0,b.jsxs)(A.DialogTitle,{children:["Delete ",f.size," College",1===f.size?"":"s"]}),(0,b.jsxs)(A.DialogDescription,{children:["This will permanently delete the selected college",1===f.size?"":"s"," and all associated schools/programs. This action cannot be undone."]})]}),(0,b.jsxs)(A.DialogFooter,{children:[(0,b.jsx)(l.Button,{variant:"outline",onClick:()=>k(!1),disabled:h,children:"Cancel"}),(0,b.jsx)(l.Button,{variant:"destructive",onClick:G,disabled:h,children:h?"Deleting...":`Delete ${f.size} College${1===f.size?"":"s"}`})]})]})})]})}var F=a.i(90759),G=a.i(86304);function H({searchParams:a,onRemoveFilter:c,onClearAll:d}){let e=[];if(a.query&&a.query.trim()&&e.push({key:"query",label:`Search: "${a.query}"`,value:a.query}),a.states&&a.states.length>0&&e.push({key:"states",label:`States: ${a.states.join(", ")}`,value:a.states.join(", ")}),a.regions&&a.regions.length>0&&e.push({key:"regions",label:`Regions: ${a.regions.join(", ")}`,value:a.regions.join(", ")}),a.types&&a.types.length>0&&e.push({key:"types",label:`Types: ${a.types.join(", ")}`,value:a.types.join(", ")}),a.sizes&&a.sizes.length>0&&e.push({key:"sizes",label:`Size: ${a.sizes.join(", ")}`,value:a.sizes.join(", ")}),a.tuitionMin||a.tuitionMax){let b=a.tuitionMin?`$${a.tuitionMin.toLocaleString()}`:"0",c=a.tuitionMax?`$${a.tuitionMax.toLocaleString()}`:"∞";e.push({key:"tuitionMin",label:`Tuition: ${b} - ${c}`,value:`${b}-${c}`})}if(a.enrollmentMin||a.enrollmentMax){let b=a.enrollmentMin?a.enrollmentMin.toLocaleString():"0",c=a.enrollmentMax?a.enrollmentMax.toLocaleString():"∞";e.push({key:"enrollmentMin",label:`Enrollment: ${b} - ${c}`,value:`${b}-${c}`})}if(a.acceptanceRanges&&a.acceptanceRanges.length>0){let b=a.acceptanceRanges.filter(a=>"N/A"!==a);b.length>0&&e.push({key:"acceptanceRanges",label:`Acceptance Rate: ${b.join(", ")}`,value:b.join(", ")})}else if(a.acceptanceRateMin||a.acceptanceRateMax){let b=a.acceptanceRateMin?`${a.acceptanceRateMin}%`:"0%",c=a.acceptanceRateMax?`${a.acceptanceRateMax}%`:"100%";e.push({key:"acceptanceRateMin",label:`Acceptance Rate: ${b} - ${c}`,value:`${b}-${c}`})}return(a.programCategories&&a.programCategories.length>0&&e.push({key:"programCategories",label:`Programs: ${a.programCategories.join(", ")}`,value:a.programCategories.join(", ")}),a.jesuitOnly&&e.push({key:"jesuitOnly",label:"Jesuit Colleges Only",value:"Yes"}),0===e.length)?null:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[e.map(a=>(0,b.jsxs)(G.Badge,{variant:"secondary",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-primary/15 text-foreground border-2 border-primary/50 hover:bg-primary/25 hover:border-primary/60 transition-all duration-200 rounded-lg shadow-sm","data-testid":`badge-filter-${a.key}`,children:[(0,b.jsx)("span",{className:"font-medium",children:a.label}),(0,b.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-auto p-0 w-5 h-5 ml-1 hover:bg-primary/40 text-foreground rounded-full",onClick:()=>{var b;"tuitionMin"===(b=a.key)?(c("tuitionMin"),c("tuitionMax")):"enrollmentMin"===b?(c("enrollmentMin"),c("enrollmentMax")):"acceptanceRateMin"===b?(c("acceptanceRateMin"),c("acceptanceRateMax")):"acceptanceRanges"===b?c("acceptanceRanges"):c(b)},"data-testid":`button-remove-filter-${a.key}`,children:(0,b.jsx)(h.X,{className:"w-4 h-4"})})]},a.key)),e.length>1&&(0,b.jsx)(l.Button,{variant:"ghost",size:"sm",className:"text-sm text-muted-foreground hover:text-foreground ml-2 font-medium",onClick:d,"data-testid":"button-clear-all-filters",children:"Clear all filters"})]})}var I=a.i(70430);function J({open:a,onClose:d,onSave:e,suggestedName:g,savedFilters:h,isAtLimit:i}){let[j,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(i),r=a=>{a?(m(g),o(""),q(i)):d()},s=h.map(a=>a.name).includes(j.trim());return(0,b.jsx)(A.Dialog,{open:a,onOpenChange:r,children:(0,b.jsxs)(A.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsx)(A.DialogHeader,{children:(0,b.jsx)(A.DialogTitle,{children:"Save Filter Combination"})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(I.Label,{htmlFor:"filter-name",children:"Filter Name"}),(0,b.jsx)(f.Input,{id:"filter-name",value:j,onChange:a=>m(a.target.value),placeholder:"Enter a name for this search","data-testid":"input-filter-name"}),s&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"A filter with this name already exists"})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Saved filters: ",h.length,"/5"]}),i&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,b.jsx)(I.Label,{children:"You have reached the 5 filter limit."})}),(0,b.jsx)(I.Label,{htmlFor:"replace-filter",children:"Replace existing filter:"}),(0,b.jsxs)(k.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(k.SelectTrigger,{"data-testid":"select-replace-filter",children:(0,b.jsx)(k.SelectValue,{placeholder:"Choose filter to replace"})}),(0,b.jsx)(k.SelectContent,{children:h.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),!i&&(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"replace-mode",checked:p,onChange:a=>q(a.target.checked),className:"rounded"}),(0,b.jsx)(I.Label,{htmlFor:"replace-mode",className:"text-sm",children:"Replace existing filter instead"})]}),p&&!i&&(0,b.jsxs)("div",{children:[(0,b.jsx)(I.Label,{htmlFor:"replace-filter-2",children:"Replace filter:"}),(0,b.jsxs)(k.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Choose filter to replace"})}),(0,b.jsx)(k.SelectContent,{children:h.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsxs)(A.DialogFooter,{children:[(0,b.jsx)(l.Button,{variant:"outline",onClick:()=>r(!1),"data-testid":"button-cancel-save",children:"Cancel"}),(0,b.jsx)(l.Button,{onClick:()=>{j.trim()&&(p&&n?e(j,n):p||e(j),r(!1))},disabled:!j.trim()||s||p&&!n,"data-testid":"button-save-filter",children:"Save Filter"})]})]})})}var K=a.i(33140);function L({rows:a=12}){return(0,b.jsx)("div",{className:"w-full overflow-x-auto bg-card rounded-lg border border-border",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border bg-gray-100",children:[(0,b.jsx)("th",{className:"p-2 w-12 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-4 mx-auto rounded"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[200px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-16"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-12"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[100px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-14"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-10"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[80px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-12 mx-auto"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-16 ml-auto"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[120px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-16 ml-auto"})}),(0,b.jsx)("th",{className:"p-2 border-r border-border min-w-[100px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-18 ml-auto"})}),(0,b.jsx)("th",{className:"p-2 min-w-[80px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-14 mx-auto"})}),(0,b.jsx)("th",{className:"p-2 min-w-[100px]",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-14 mx-auto"})})]})}),(0,b.jsx)("tbody",{children:Array.from({length:a}).map((a,c)=>(0,b.jsxs)("tr",{className:`border-b border-border ${c%2==0?"bg-white":"bg-gray-50"}`,children:[(0,b.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,b.jsx)(K.Skeleton,{className:"h-4 w-4 mx-auto rounded"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-4 rounded",style:{width:`${55+25*Math.sin(2.3*c)}%`}})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-3 rounded",style:{width:`${50+20*Math.sin(1.7*c)}%`}})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-3 w-12 rounded"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-3 w-14 rounded"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-3 w-10 rounded"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border text-center",children:(0,b.jsx)(K.Skeleton,{className:"h-3 w-6 mx-auto rounded"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-3 w-16 ml-auto rounded"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-3 w-16 ml-auto rounded"})}),(0,b.jsx)("td",{className:"p-2 border-r border-border",children:(0,b.jsx)(K.Skeleton,{className:"h-3 w-12 ml-auto rounded"})}),(0,b.jsx)("td",{className:"p-2 text-center",children:(0,b.jsx)(K.Skeleton,{className:"h-5 w-5 mx-auto rounded-full"})}),(0,b.jsx)("td",{className:"p-2 text-center",children:(0,b.jsx)(K.Skeleton,{className:"h-6 w-8 mx-auto rounded"})})]},c))})]})})}function M({index:a}){return(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[(0,b.jsx)(K.Skeleton,{className:"w-full h-36"}),(0,b.jsxs)("div",{className:"p-5 space-y-3",children:[(0,b.jsx)(K.Skeleton,{className:"h-5 rounded",style:{width:`${60+20*Math.sin(2.1*a)}%`}}),(0,b.jsx)(K.Skeleton,{className:"h-3 rounded",style:{width:`${40+15*Math.sin(1.5*a)}%`}}),(0,b.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(K.Skeleton,{className:"h-3 w-16 rounded"}),(0,b.jsx)(K.Skeleton,{className:"h-3 w-20 rounded"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(K.Skeleton,{className:"h-3 w-20 rounded"}),(0,b.jsx)(K.Skeleton,{className:"h-3 w-14 rounded"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(K.Skeleton,{className:"h-3 w-14 rounded"}),(0,b.jsx)(K.Skeleton,{className:"h-3 w-16 rounded"})]})]}),(0,b.jsx)(K.Skeleton,{className:"h-8 w-full rounded-md mt-2"})]})]})}function N({count:a=10}){return(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:Array.from({length:a}).map((a,c)=>(0,b.jsx)(M,{index:c},c))})}function O({index:a}){return(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5 flex gap-5",children:[(0,b.jsx)(K.Skeleton,{className:"w-24 h-24 rounded-lg shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsx)(K.Skeleton,{className:"h-5 rounded",style:{width:`${35+15*Math.sin(1.9*a)}%`}}),(0,b.jsx)(K.Skeleton,{className:"h-3 rounded",style:{width:`${25+10*Math.sin(1.3*a)}%`}}),(0,b.jsxs)("div",{className:"flex gap-6 pt-1",children:[(0,b.jsx)(K.Skeleton,{className:"h-3 w-24 rounded"}),(0,b.jsx)(K.Skeleton,{className:"h-3 w-20 rounded"}),(0,b.jsx)(K.Skeleton,{className:"h-3 w-16 rounded"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,b.jsx)(K.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,b.jsx)(K.Skeleton,{className:"h-8 w-16 rounded-md"})]})]})}function P({count:a=8}){return(0,b.jsx)("div",{className:"space-y-4",children:Array.from({length:a}).map((a,c)=>(0,b.jsx)(O,{index:c},c))})}var Q=a.i(78612);let R=(0,o.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var S=a.i(7353),T=a.i(13749),U=a.i(50522);let V=(0,o.default)("bookmark",[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]]);function W(){return"table"}function X(){let a,[e,f]=(0,c.useState)({query:"",page:1,limit:100,sortBy:"relevance",sortOrder:"asc"}),[g,i]=(0,c.useState)(W),[j,k]=(0,c.useState)(!1),[m,n]=(0,c.useState)([]),{favorites:o,isFavorite:p,toggleFavorite:q,getFavoritesList:r}=(0,s.useFavorites)(),{getCollegeIdsInFolder:u}=(0,t.useFolders)();(0,c.useEffect)(()=>{let a=localStorage.getItem("savedFilters");a&&n(JSON.parse(a))},[]),(0,c.useEffect)(()=>{localStorage.setItem("savedFilters",JSON.stringify(m))},[m]);let v=(0,c.useMemo)(()=>r(),[r]),{colleges:x,total:y,isLoading:z,isFetching:A,error:B}=function(a){let b,c=a.showFavoritesOnly&&(!a.favoriteIds||0===a.favoriteIds.length),e=(b=new URLSearchParams,Object.entries(a).forEach(([a,c])=>{"showFavoritesOnly"!==a&&"favoriteIds"!==a&&null!=c&&""!==c&&(Array.isArray(c)&&c.length>0?b.append(a,c.join(",")):Array.isArray(c)||b.append(a,c.toString()))}),a.showFavoritesOnly&&a.favoriteIds&&a.favoriteIds.length>0&&b.append("favoriteIds",a.favoriteIds.join(",")),b.toString()),{data:f,isLoading:g,isFetching:h,error:i}=(0,d.useQuery)({queryKey:[`/api/colleges?${e}`],queryFn:async()=>{let a=await fetch(`/api/colleges?${e}`);if(!a.ok)throw Error("Failed to fetch colleges");return a.json()},enabled:!c,placeholderData:a=>a});return{colleges:f?.colleges||[],total:f?.total||0,isLoading:g,isFetching:h,error:i}}((0,c.useMemo)(()=>{if(e.showFavoritesOnly){let a=v;if(e.folderId){let b=u(e.folderId);a=a.filter(a=>b.includes(a))}return{...e,favoriteIds:a}}return e},[e,v,u]));e.showFavoritesOnly&&v.length;let C=(0,c.useMemo)(()=>{let{page:a,limit:b,sortBy:c,sortOrder:d,...f}=e,g={};return Object.entries(f).forEach(([a,b])=>{null==b||""===b||Array.isArray(b)&&0===b.length||(g[a]=b)}),g},[e]),D=(0,c.useMemo)(()=>Object.keys(C).length>0,[C]),G=m.length>=5,I=(0,c.useCallback)(a=>{f(b=>({...b,...a,page:a.page||1}))},[]),K=(0,c.useCallback)(a=>{f(b=>({...b,page:a}))},[]),M=e.page||1,O=e.limit||100,X=Math.ceil(y/O),Y=Math.min(M*O,y);return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(w,{searchParams:e,onSearch:I,colleges:x}),(0,b.jsx)("section",{className:"py-4 sm:py-8 px-4",children:(0,b.jsxs)("div",{className:"container mx-auto",children:[(0,b.jsxs)("div",{className:"mb-4 sm:mb-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"text-xl sm:text-2xl font-bold mb-3 lg:mb-0","data-testid":"text-results-title",children:["Colleges (",(0,b.jsx)("span",{"data-testid":"text-filtered-count",children:y.toLocaleString()}),")"]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[m.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Saved Filters:"}),m.map(a=>{let c,d=(c=a.filters,(C.query||void 0)===(c.query||void 0)&&JSON.stringify(C.states||[])===JSON.stringify(c.states||[])&&JSON.stringify(C.regions||[])===JSON.stringify(c.regions||[])&&JSON.stringify(C.types||[])===JSON.stringify(c.types||[])&&JSON.stringify(C.sizes||[])===JSON.stringify(c.sizes||[])&&(C.tuitionMin||void 0)===(c.tuitionMin||void 0)&&(C.tuitionMax||void 0)===(c.tuitionMax||void 0)&&(C.enrollmentMin||void 0)===(c.enrollmentMin||void 0)&&(C.enrollmentMax||void 0)===(c.enrollmentMax||void 0)&&(C.acceptanceRateMin||void 0)===(c.acceptanceRateMin||void 0)&&(C.acceptanceRateMax||void 0)===(c.acceptanceRateMax||void 0));return(0,b.jsxs)("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm border transition-all ${d?"bg-amber-200 text-amber-900 border-amber-300 ring-2 ring-amber-300 shadow-md font-medium":"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-150"}`,children:[(0,b.jsxs)("button",{onClick:()=>{f(b=>({...b,...a.filters,page:1}))},className:`hover:underline ${d?"cursor-default":""}`,"data-testid":`button-apply-filter-${a.id}`,disabled:d,children:[a.name," ",d&&"✓"]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void n(a=>a.filter(a=>a.id!==b))},className:`ml-1 hover:opacity-75 ${d?"text-amber-700":"text-amber-600 hover:text-amber-800"}`,"data-testid":`button-delete-filter-${a.id}`,children:(0,b.jsx)(h.X,{className:"w-3 h-3"})})]},a.id)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1 sm:flex-initial",children:[(0,b.jsx)("label",{htmlFor:"sort-select",className:"text-sm text-muted-foreground whitespace-nowrap hidden sm:inline",children:"Sort by:"}),(0,b.jsxs)("select",{id:"sort-select",name:"sort",className:"px-2 sm:px-3 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring text-sm w-full sm:w-auto",value:`${e.sortBy}-${e.sortOrder}`,onChange:a=>{let[b,c]=a.target.value.split("-");I({sortBy:b,sortOrder:c})},"data-testid":"select-sort",children:[(0,b.jsx)("option",{value:"relevance-asc",children:"Relevance"}),(0,b.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,b.jsx)("option",{value:"name-desc",children:"Name (Z-A)"}),(0,b.jsx)("option",{value:"tuition-asc",children:"Tuition (Low to High)"}),(0,b.jsx)("option",{value:"tuition-desc",children:"Tuition (High to Low)"}),(0,b.jsx)("option",{value:"enrollment-desc",children:"School Size (Large to Small)"}),(0,b.jsx)("option",{value:"enrollment-asc",children:"School Size (Small to Large)"}),(0,b.jsx)("option",{value:"acceptance-asc",children:"Acceptance Rate (Low to High)"}),(0,b.jsx)("option",{value:"acceptance-desc",children:"Acceptance Rate (High to Low)"})]})]}),(0,b.jsxs)("div",{className:"flex border border-border rounded-lg overflow-hidden",children:[(0,b.jsx)(l.Button,{variant:"grid"===g?"default":"ghost",size:"sm",onClick:()=>i("grid"),"data-testid":"button-view-grid",children:(0,b.jsx)(Q.Grid,{className:"w-4 h-4"})}),(0,b.jsx)(l.Button,{variant:"list"===g?"default":"ghost",size:"sm",onClick:()=>i("list"),"data-testid":"button-view-list",children:(0,b.jsx)(R,{className:"w-4 h-4"})}),(0,b.jsx)(l.Button,{variant:"table"===g?"default":"ghost",size:"sm",onClick:()=>i("table"),"data-testid":"button-view-table",children:(0,b.jsx)(S.Table,{className:"w-4 h-4"})})]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(H,{searchParams:e,onRemoveFilter:a=>{f(b=>{let c={...b};return"tuitionMin"===a||"tuitionMax"===a?(delete c.tuitionMin,delete c.tuitionMax):"enrollmentMin"===a||"enrollmentMax"===a?(delete c.enrollmentMin,delete c.enrollmentMax):delete c[a],{...c,page:1}})},onClearAll:()=>{f(a=>({query:"",page:1,limit:a.limit,sortBy:a.sortBy,sortOrder:a.sortOrder}))}}),D&&(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>k(!0),className:"text-blue-600 border-blue-200 hover:bg-blue-50","data-testid":"button-save-filters",children:[(0,b.jsx)(V,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}),B&&!z&&(0,b.jsxs)("div",{className:"text-center py-12","data-testid":"error-message",children:[(0,b.jsxs)("p",{className:"text-destructive",children:["Error loading colleges: ",B.message]}),(0,b.jsx)(l.Button,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]}),z&&(0,b.jsxs)("div",{className:"animate-in fade-in duration-300",children:["table"===g&&(0,b.jsx)(L,{}),"grid"===g&&(0,b.jsx)(N,{}),"list"===g&&(0,b.jsx)(P,{})]}),!z&&!B&&(0,b.jsxs)("div",{className:"relative",children:[A&&(0,b.jsxs)("div",{className:"absolute inset-0 z-10 animate-in fade-in duration-200",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-[1px] rounded-lg"}),(0,b.jsxs)("div",{className:"relative pt-4 px-1 opacity-80",children:["table"===g&&(0,b.jsx)(L,{rows:6}),"grid"===g&&(0,b.jsx)(N,{count:6}),"list"===g&&(0,b.jsx)(P,{count:4})]})]}),(0,b.jsxs)("div",{className:`transition-opacity duration-300 ${A?"opacity-30":"opacity-100"}`,children:["table"===g&&(0,b.jsx)(E,{colleges:x,searchParams:e,onSort:(a,b)=>I({sortBy:a,sortOrder:b})}),"grid"===g&&(0,b.jsx)("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:x.map(a=>(0,b.jsx)(F.default,{college:a,viewMode:"grid"},a.id))}),"list"===g&&(0,b.jsx)("div",{className:"space-y-4",children:x.map(a=>(0,b.jsx)(F.default,{college:a,viewMode:"list"},a.id))}),X>1&&(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6 sm:mt-8 gap-3",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",((M-1)*O+1).toLocaleString(),"-",Y.toLocaleString()," of"," ",y.toLocaleString()," colleges"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>K(M-1),disabled:M<=1,"data-testid":"button-prev-page",children:[(0,b.jsx)(T.ChevronLeft,{className:"w-4 h-4 sm:mr-1"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Previous"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[M>3&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Button,{variant:1===M?"default":"ghost",size:"sm",onClick:()=>K(1),"data-testid":"button-page-1",children:"1"}),M>4&&(0,b.jsx)("span",{className:"px-1 sm:px-2",children:"..."})]}),Array.from({length:Math.min(5,X)},(a,c)=>{let d=Math.max(1,M-2)+c;return d>X||1===d&&M>3||d===X&&M<X-2?null:(0,b.jsx)(l.Button,{variant:M===d?"default":"ghost",size:"sm",onClick:()=>K(d),"data-testid":`button-page-${d}`,children:d},d)}),M<X-2&&(0,b.jsxs)(b.Fragment,{children:[M<X-3&&(0,b.jsx)("span",{className:"px-1 sm:px-2",children:"..."}),(0,b.jsx)(l.Button,{variant:X===M?"default":"ghost",size:"sm",onClick:()=>K(X),"data-testid":`button-page-${X}`,children:X})]})]}),(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>K(M+1),disabled:M>=X,"data-testid":"button-next-page",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,b.jsx)(U.ChevronRight,{className:"w-4 h-4 sm:ml-1"})]})]})]})]})]})]})}),(0,b.jsx)(J,{open:j,onClose:()=>k(!1),onSave:(a,b)=>{let c={id:Date.now().toString(),name:a,filters:C,createdAt:new Date};b?n(a=>a.map(a=>a.id===b?c:a)):n(a=>[...a,c]),k(!1)},suggestedName:(a=[],C.states&&C.states.length>0&&(1===C.states.length?a.push(C.states[0]):a.push(`${C.states.length} States`)),C.types&&C.types.length>0&&(1===C.types.length?a.push(C.types[0]):a.push(`${C.types.length} Types`)),C.sizes&&C.sizes.length>0&&a.push(C.sizes.join(", ")),(C.tuitionMin||C.tuitionMax)&&(C.tuitionMin&&C.tuitionMax?a.push(`$${C.tuitionMin/1e3}k-${C.tuitionMax/1e3}k`):C.tuitionMin?a.push(`>$${C.tuitionMin/1e3}k`):C.tuitionMax&&a.push(`<$${C.tuitionMax/1e3}k`)),a.length>0?a.join(" + "):"Custom Filter"),savedFilters:m,isAtLimit:G})]})}a.s(["default",()=>X],40777)}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map