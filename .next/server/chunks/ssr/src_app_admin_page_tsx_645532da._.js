module.exports=[10179,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(33217),f=a.i(70025),g=a.i(37927),h=a.i(48714),i=a.i(72318),j=a.i(99570),k=a.i(15055),l=a.i(66718),m=a.i(70430),n=a.i(86304),o=a.i(14574),p=a.i(80701),q=a.i(68114);let r=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:d,className:(0,q.cn)("w-full caption-bottom text-sm",a),...c})}));r.displayName="Table";let s=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("thead",{ref:d,className:(0,q.cn)("border-b border-border bg-muted/50 [&_tr]:border-b",a),...c}));s.displayName="TableHeader";let t=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tbody",{ref:d,className:(0,q.cn)("[&_tr:last-child]:border-0",a),...c}));t.displayName="TableBody",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tfoot",{ref:d,className:(0,q.cn)("border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let u=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tr",{ref:d,className:(0,q.cn)("border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));u.displayName="TableRow";let v=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("th",{ref:d,className:(0,q.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));v.displayName="TableHead";let w=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("td",{ref:d,className:(0,q.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));w.displayName="TableCell",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("caption",{ref:d,className:(0,q.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption";var x=a.i(7554),y=a.i(50104),z=a.i(24050),A=a.i(77192),B=a.i(30553),C=a.i(7827),D=a.i(25152),E=a.i(92843),F="Tabs",[G,H]=(0,y.createContextScope)(F,[z.createRovingFocusGroupScope]),I=(0,z.createRovingFocusGroupScope)(),[J,K]=G(F),L=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,C.useDirection)(i),[m,n]=(0,D.useControllableState)({prop:e,onChange:f,defaultProp:g??"",caller:F});return(0,b.jsx)(J,{scope:d,baseId:(0,E.useId)(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(B.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});L.displayName=F;var M="TabsList",N=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=K(M,d),h=I(d);return(0,b.jsx)(z.Root,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(B.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});N.displayName=M;var O="TabsTrigger",P=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=K(O,d),i=I(d),j=S(h.baseId,e),k=T(h.baseId,e),l=e===h.value;return(0,b.jsx)(z.Item,{asChild:!0,...i,focusable:!f,active:l,children:(0,b.jsx)(B.Primitive.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":k,"data-state":l?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:(0,x.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,x.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,x.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;l||f||!a||h.onValueChange(e)})})})});P.displayName=O;var Q="TabsContent",R=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=K(Q,e),k=S(j.baseId,f),l=T(j.baseId,f),m=f===j.value,n=c.useRef(m);return c.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(A.Presence,{present:g||m,children:({present:c})=>(0,b.jsx)(B.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:n.current?"0s":void 0},children:c&&h})})});function S(a,b){return`${a}-trigger-${b}`}function T(a,b){return`${a}-content-${b}`}R.displayName=Q;let U=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(N,{ref:d,className:(0,q.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...c}));U.displayName=N.displayName;let V=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(P,{ref:d,className:(0,q.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...c}));V.displayName=P.displayName;let W=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(R,{ref:d,className:(0,q.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...c}));W.displayName=R.displayName;var X=a.i(81560),Y=a.i(24569),Z=a.i(15618),$=a.i(87532),_=a.i(21161),aa=a.i(69769),ab=a.i(70106);let ac=(0,ab.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var ad=a.i(33508);let ae=(0,ab.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),af=(0,ab.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var ag=a.i(96221);let ah={"01":"Agriculture","03":"Natural Resources & Conservation","04":"Architecture","05":"Area, Ethnic, & Gender Studies","09":"Communication & Journalism",10:"Communications Technologies",11:"Computer & Information Sciences",12:"Culinary & Personal Services",13:"Education",14:"Engineering",15:"Engineering Technologies",16:"Foreign Languages & Linguistics",19:"Family & Consumer Sciences",22:"Law",23:"English Language & Literature",24:"Liberal Arts & General Studies",25:"Library Science",26:"Biological Sciences",27:"Mathematics & Statistics",29:"Military Technologies",30:"Interdisciplinary Studies",31:"Parks, Recreation & Fitness",38:"Philosophy & Religious Studies",39:"Theology & Religious Vocations",40:"Physical Sciences",41:"Science Technologies",42:"Psychology",43:"Homeland Security & Law Enforcement",44:"Public Administration & Social Services",45:"Social Sciences",46:"Construction Trades",47:"Mechanic & Repair Technologies",48:"Precision Production",49:"Transportation & Materials Moving",50:"Visual & Performing Arts",51:"Health Professions",52:"Business",54:"History"};function ai({college:a,onSave:d,onCancel:e,isLoading:f}){let[g,h]=(0,c.useState)({name:a?.name||"",city:a?.city||"",state:a?.state||"",region:a?.region||"",website:a?.website||"",type:a?.type||"",size:a?.size||"",tuitionInState:a?.tuitionInState||void 0,tuitionOutOfState:a?.tuitionOutOfState||void 0,acceptanceRate:a?.acceptanceRate||void 0,enrollment:a?.enrollment||void 0,description:a?.description||""});return(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),d(g)},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"name",children:"College Name *"}),(0,b.jsx)(l.Input,{id:"name",value:g.name,onChange:a=>h({...g,name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"city",children:"City *"}),(0,b.jsx)(l.Input,{id:"city",value:g.city,onChange:a=>h({...g,city:a.target.value}),required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"state",children:"State *"}),(0,b.jsx)(l.Input,{id:"state",value:g.state,onChange:a=>h({...g,state:a.target.value}),placeholder:"CA",required:!0,maxLength:2})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"region",children:"Region"}),(0,b.jsxs)(p.Select,{value:g.region||"",onValueChange:a=>h({...g,region:a}),children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"Select region"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"",children:"None"}),(0,b.jsx)(p.SelectItem,{value:"Northeast",children:"Northeast"}),(0,b.jsx)(p.SelectItem,{value:"South",children:"South"}),(0,b.jsx)(p.SelectItem,{value:"Midwest",children:"Midwest"}),(0,b.jsx)(p.SelectItem,{value:"West",children:"West"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"type",children:"Type"}),(0,b.jsxs)(p.Select,{value:g.type||"",onValueChange:a=>h({...g,type:a}),children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"",children:"None"}),(0,b.jsx)(p.SelectItem,{value:"Public",children:"Public"}),(0,b.jsx)(p.SelectItem,{value:"Private",children:"Private"}),(0,b.jsx)(p.SelectItem,{value:"Community",children:"Community"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"size",children:"Size"}),(0,b.jsxs)(p.Select,{value:g.size||"",onValueChange:a=>h({...g,size:a}),children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"Select size"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"",children:"None"}),(0,b.jsx)(p.SelectItem,{value:"Small",children:"Small"}),(0,b.jsx)(p.SelectItem,{value:"Medium",children:"Medium"}),(0,b.jsx)(p.SelectItem,{value:"Large",children:"Large"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"website",children:"Website"}),(0,b.jsx)(l.Input,{id:"website",type:"url",value:g.website||"",onChange:a=>h({...g,website:a.target.value}),placeholder:"https://example.edu"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"tuitionInState",children:"In-State Tuition ($)"}),(0,b.jsx)(l.Input,{id:"tuitionInState",type:"number",value:g.tuitionInState||"",onChange:a=>h({...g,tuitionInState:a.target.value?parseFloat(a.target.value):void 0}),placeholder:"25000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"tuitionOutOfState",children:"Out-of-State Tuition ($)"}),(0,b.jsx)(l.Input,{id:"tuitionOutOfState",type:"number",value:g.tuitionOutOfState||"",onChange:a=>h({...g,tuitionOutOfState:a.target.value?parseFloat(a.target.value):void 0}),placeholder:"45000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"acceptanceRate",children:"Acceptance Rate (%)"}),(0,b.jsx)(l.Input,{id:"acceptanceRate",type:"number",step:"0.1",min:"0",max:"100",value:g.acceptanceRate||"",onChange:a=>h({...g,acceptanceRate:a.target.value?parseFloat(a.target.value):void 0}),placeholder:"25.5"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"enrollment",children:"Enrollment"}),(0,b.jsx)(l.Input,{id:"enrollment",type:"number",value:g.enrollment||"",onChange:a=>h({...g,enrollment:a.target.value?parseInt(a.target.value):void 0}),placeholder:"5000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(l.Input,{id:"description",value:g.description||"",onChange:a=>h({...g,description:a.target.value}),placeholder:"A brief description of the college..."})]}),(0,b.jsxs)(o.DialogFooter,{children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:e,disabled:f,children:"Cancel"}),(0,b.jsx)(j.Button,{type:"submit",disabled:f,children:f?"Saving...":a?"Update College":"Create College"})]})]})}function aj({school:a,onSave:d,onCancel:e,isLoading:f}){let[g,h]=(0,c.useState)({name:a?.name||"",collegeId:a?.collegeId||"",category:a?.category||"",cipCode:a?.cipCode||"",description:a?.description||"",website:a?.website||""}),[i,k]=(0,c.useState)(""),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(a?.collegeName||""),[u,v]=(0,c.useState)(!1),w=Object.values(ah).sort();return(0,c.useEffect)(()=>{if(!i.trim()||i.length<2)return void r([]);let a=setTimeout(async()=>{try{let a=await fetch(`/api/admin/colleges?query=${encodeURIComponent(i)}&limit=10`,{credentials:"include"});if(a.ok){let b=await a.json();r(b.colleges||[])}}catch(a){console.error("Failed to search colleges:",a)}},300);return()=>clearTimeout(a)},[i]),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),d(g)},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"schoolName",children:"School Name *"}),(0,b.jsx)(l.Input,{id:"schoolName",value:g.name,onChange:a=>h({...g,name:a.target.value}),placeholder:"e.g., Wharton School of Business",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"collegeSearch",children:"College *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Input,{id:"collegeSearch",value:s||i,onChange:a=>{k(a.target.value),t(""),h({...g,collegeId:""}),v(!0)},onFocus:()=>v(!0),placeholder:"Search for a college...",required:!g.collegeId}),g.collegeId&&(0,b.jsxs)(n.Badge,{variant:"secondary",className:"absolute right-2 top-1/2 -translate-y-1/2 cursor-pointer",onClick:()=>{t(""),k(""),h({...g,collegeId:""})},children:["Selected ",(0,b.jsx)(ad.X,{className:"h-3 w-3 ml-1"})]}),u&&q.length>0&&!g.collegeId&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-48 overflow-y-auto",children:q.map(a=>(0,b.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>{h({...g,collegeId:a.id}),t(`${a.name} (${a.city}, ${a.state})`),v(!1),r([])},children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsxs)("span",{className:"text-muted-foreground ml-2",children:[a.city,", ",a.state]})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"category",children:"Category *"}),(0,b.jsxs)(p.Select,{value:g.category,onValueChange:a=>h({...g,category:a}),children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"Select category"})}),(0,b.jsx)(p.SelectContent,{children:w.map(a=>(0,b.jsx)(p.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"cipCode",children:"CIP Code"}),(0,b.jsx)(l.Input,{id:"cipCode",value:g.cipCode||"",onChange:a=>h({...g,cipCode:a.target.value}),placeholder:"e.g., 52.02"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"schoolWebsite",children:"Website"}),(0,b.jsx)(l.Input,{id:"schoolWebsite",type:"url",value:g.website||"",onChange:a=>h({...g,website:a.target.value}),placeholder:"https://example.edu/school"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"schoolDescription",children:"Description"}),(0,b.jsx)(l.Input,{id:"schoolDescription",value:g.description||"",onChange:a=>h({...g,description:a.target.value}),placeholder:"Brief description of the school or program..."})]}),(0,b.jsxs)(o.DialogFooter,{children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:e,disabled:f,children:"Cancel"}),(0,b.jsx)(j.Button,{type:"submit",disabled:f||!g.collegeId||!g.category,children:f?"Saving...":a?"Update School":"Create School"})]})]})}function ak(){let[a,d]=(0,c.useState)(""),[h,m]=(0,c.useState)(1),[p,q]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(new Set),D=(0,g.useQueryClient)(),{data:E,isLoading:F}=(0,e.useQuery)({queryKey:["/api/admin/schools",h,a],queryFn:()=>{let b=new URLSearchParams({page:h.toString(),limit:"25",sortBy:"name",sortOrder:"asc"});return a.trim()&&b.set("query",a.trim()),(0,i.adminRequest)(`/api/admin/schools?${b.toString()}`)}}),G=(0,f.useMutation)({mutationFn:a=>(0,i.adminRequest)("/api/admin/schools","POST",a),onSuccess:()=>{D.invalidateQueries({queryKey:["/api/admin/schools"]}),y(!1)},onError:a=>{console.error("Create school error:",a)}}),H=(0,f.useMutation)({mutationFn:({id:a,data:b})=>(0,i.adminRequest)(`/api/admin/schools/${a}`,"PUT",b),onSuccess:()=>{D.invalidateQueries({queryKey:["/api/admin/schools"]}),A(!1),q(null)},onError:a=>{console.error("Update school error:",a)}}),I=(0,f.useMutation)({mutationFn:a=>(0,i.adminRequest)(`/api/admin/schools/${a}`,"DELETE"),onSuccess:()=>{D.invalidateQueries({queryKey:["/api/admin/schools"]})},onError:a=>{console.error("Delete school error:",a)}}),J=(0,f.useMutation)({mutationFn:a=>(0,i.adminRequest)("/api/admin/schools","DELETE",{ids:a}),onSuccess:()=>{D.invalidateQueries({queryKey:["/api/admin/schools"]}),C(new Set)},onError:a=>{console.error("Bulk delete error:",a)}}),K=E?.schools||[],L=E?.total||0,M=Math.ceil(L/25);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6 gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)($.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(l.Input,{placeholder:"Search schools by name, category...",value:a,onChange:a=>{d(a.target.value),m(1),C(new Set)},className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[B.size>0&&(0,b.jsxs)(j.Button,{variant:"destructive",size:"sm",onClick:()=>{let a=B.size;0!==a&&window.confirm(`Are you sure you want to delete ${a} school${a>1?"s":""}? This cannot be undone.`)&&J.mutate(Array.from(B))},disabled:J.isPending,children:[(0,b.jsx)(X.Trash2,{className:"h-4 w-4 mr-2"}),J.isPending?"Deleting...":`Delete ${B.size} selected`]}),(0,b.jsxs)(n.Badge,{variant:"secondary",children:[L," schools"]}),a&&(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{d(""),m(1)},children:"Clear"}),(0,b.jsxs)(o.Dialog,{open:x,onOpenChange:y,children:[(0,b.jsx)(o.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{children:[(0,b.jsx)(Z.Plus,{className:"h-4 w-4 mr-2"}),"Add School"]})}),(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Create New School"}),(0,b.jsx)(o.DialogDescription,{children:"Add a new school or program to a college"})]}),(0,b.jsx)(aj,{onSave:a=>G.mutate(a),onCancel:()=>y(!1),isLoading:G.isPending})]})]})]})]}),F?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading schools..."}):0===K.length?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:a?"No schools match your search.":"No schools found. Run the enrichment script or add one manually!"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)(r,{children:[(0,b.jsx)(s,{children:(0,b.jsxs)(u,{children:[(0,b.jsx)(v,{className:"w-10",children:(0,b.jsx)(k.Checkbox,{checked:K.length>0&&B.size===K.length,onCheckedChange:()=>{B.size===K.length?C(new Set):C(new Set(K.map(a=>a.id)))},"aria-label":"Select all"})}),(0,b.jsx)(v,{children:"Name"}),(0,b.jsx)(v,{children:"College"}),(0,b.jsx)(v,{children:"Category"}),(0,b.jsx)(v,{children:"Source"}),(0,b.jsx)(v,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(t,{children:K.map(a=>(0,b.jsxs)(u,{className:B.has(a.id)?"bg-muted/50":"",children:[(0,b.jsx)(w,{children:(0,b.jsx)(k.Checkbox,{checked:B.has(a.id),onCheckedChange:()=>{var b;return b=a.id,void C(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},"aria-label":`Select ${a.name}`})}),(0,b.jsx)(w,{className:"font-medium",children:a.name}),(0,b.jsx)(w,{children:(0,b.jsxs)("span",{className:"text-sm",children:[a.collegeName||"â€”",a.collegeCity&&(0,b.jsxs)("span",{className:"text-muted-foreground",children:[", ",a.collegeCity,", ",a.collegeState]})]})}),(0,b.jsx)(w,{children:(0,b.jsx)(n.Badge,{variant:"secondary",children:a.category})}),(0,b.jsx)(w,{children:(0,b.jsx)(n.Badge,{variant:"manual"===a.source?"default":"secondary",children:a.source})}),(0,b.jsx)(w,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{q(a),A(!0)},disabled:H.isPending||I.isPending,children:(0,b.jsx)(Y.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{var b;return b=a.id,void(window.confirm("Are you sure you want to delete this school?")&&I.mutate(b))},disabled:I.isPending||H.isPending,className:"text-red-600 hover:text-red-700",children:(0,b.jsx)(X.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]})}),M>1&&(0,b.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>{m(h-1),C(new Set)},disabled:1===h||F,children:"Previous"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",h," of ",M]}),(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>{m(h+1),C(new Set)},disabled:h===M||F,children:"Next"})]})]}),(0,b.jsx)(o.Dialog,{open:z,onOpenChange:A,children:(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Edit School"}),(0,b.jsx)(o.DialogDescription,{children:"Update school information"})]}),p&&(0,b.jsx)(aj,{school:p,onSave:a=>H.mutate({id:p.id,data:a}),onCancel:()=>{A(!1),q(null)},isLoading:H.isPending})]})})]})}function al(){let[a,d]=(0,c.useState)(""),[h,k]=(0,c.useState)(""),m=(0,g.useQueryClient)(),{data:o,isLoading:p}=(0,e.useQuery)({queryKey:["/api/admin/allowed-emails"],queryFn:()=>(0,i.adminRequest)("/api/admin/allowed-emails")}),q=(0,f.useMutation)({mutationFn:a=>(0,i.adminRequest)("/api/admin/allowed-emails","POST",{email:a}),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/admin/allowed-emails"]}),d(""),k("")},onError:a=>{k(a.message||"Failed to add email")}}),x=(0,f.useMutation)({mutationFn:a=>(0,i.adminRequest)("/api/admin/allowed-emails","DELETE",{id:a}),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/admin/allowed-emails"]})},onError:a=>{console.error("Remove email error:",a)}}),y=o?.emails||[];return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Only users with an email on this list can sign in. Add emails before inviting people to use the app."}),(0,b.jsxs)("form",{onSubmit:b=>{b.preventDefault();let c=a.trim().toLowerCase();c&&c.includes("@")?(k(""),q.mutate(c)):k("Please enter a valid email address")},className:"flex gap-2 max-w-lg",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(af,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(l.Input,{type:"email",placeholder:"user@example.com",value:a,onChange:a=>{d(a.target.value),k("")},className:"pl-10",disabled:q.isPending})]}),(0,b.jsx)(j.Button,{type:"submit",disabled:q.isPending||!a.trim(),children:q.isPending?(0,b.jsx)(ag.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Z.Plus,{className:"h-4 w-4 mr-2"}),"Add"]})})]}),h&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-2",children:h})]}),p?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading allowed emails..."}):0===y.length?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No emails on the allowlist yet. Add one above to get started."}):(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)(r,{children:[(0,b.jsx)(s,{children:(0,b.jsxs)(u,{children:[(0,b.jsx)(v,{children:"Email"}),(0,b.jsx)(v,{children:"Added"}),(0,b.jsx)(v,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(t,{children:y.map(a=>(0,b.jsxs)(u,{children:[(0,b.jsx)(w,{className:"font-medium",children:a.email}),(0,b.jsx)(w,{className:"text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()}),(0,b.jsx)(w,{className:"text-right",children:(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{window.confirm(`Remove ${a.email} from the allowlist? They will no longer be able to sign in.`)&&x.mutate(a.id)},disabled:x.isPending,className:"text-red-600 hover:text-red-700",children:(0,b.jsx)(X.Trash2,{className:"h-4 w-4"})})})]},a.id))})]})}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsxs)(n.Badge,{variant:"secondary",children:[y.length," allowed email",1!==y.length?"s":""]})})]})}function am(){let[a,d]=(0,c.useState)(""),[h,k]=(0,c.useState)(1),[m,p]=(0,c.useState)(null),[q,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),A=(0,g.useQueryClient)(),{data:B,isLoading:C}=(0,e.useQuery)({queryKey:["/api/admin/colleges",h,a],queryFn:()=>{let b=new URLSearchParams({page:h.toString(),limit:"25",sortBy:"name",sortOrder:"asc"});return a.trim()&&b.set("query",a.trim()),(0,i.adminRequest)(`/api/admin/colleges?${b.toString()}`)}}),D=(0,f.useMutation)({mutationFn:a=>(0,i.adminRequest)("/api/admin/colleges","POST",a),onSuccess:()=>{A.invalidateQueries({queryKey:["/api/admin/colleges"]}),x(!1)},onError:a=>{console.error("Create error:",a)}}),E=(0,f.useMutation)({mutationFn:({id:a,data:b})=>(0,i.adminRequest)(`/api/admin/colleges/${a}`,"PUT",b),onSuccess:()=>{A.invalidateQueries({queryKey:["/api/admin/colleges"]}),z(!1),p(null)},onError:a=>{console.error("Update error:",a)}}),F=(0,f.useMutation)({mutationFn:a=>(0,i.adminRequest)(`/api/admin/colleges/${a}`,"DELETE"),onSuccess:()=>{A.invalidateQueries({queryKey:["/api/admin/colleges"]})},onError:a=>{console.error("Delete error:",a)}}),G=B?.colleges||[],H=B?.total||0,I=Math.ceil(H/25);return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("div",{className:"border-b bg-white",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsx)("div",{className:"flex justify-between items-center py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(_.Settings,{className:"h-6 w-6 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage colleges & schools"})]})]})})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)(L,{defaultValue:"colleges",children:[(0,b.jsxs)(U,{className:"mb-6",children:[(0,b.jsxs)(V,{value:"colleges",className:"gap-2",children:[(0,b.jsx)(ac,{className:"h-4 w-4"}),"Colleges"]}),(0,b.jsxs)(V,{value:"schools",className:"gap-2",children:[(0,b.jsx)(aa.GraduationCap,{className:"h-4 w-4"}),"Schools"]}),(0,b.jsxs)(V,{value:"users",className:"gap-2",children:[(0,b.jsx)(ae,{className:"h-4 w-4"}),"Users"]})]}),(0,b.jsxs)(W,{value:"colleges",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6 gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)($.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(l.Input,{placeholder:"Search colleges by name, city, state...",value:a,onChange:a=>{d(a.target.value),k(1)},className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(n.Badge,{variant:"secondary",children:[H," colleges"]}),a&&(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{d(""),k(1)},children:"Clear"}),(0,b.jsxs)(o.Dialog,{open:q,onOpenChange:x,children:[(0,b.jsx)(o.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{children:[(0,b.jsx)(Z.Plus,{className:"h-4 w-4 mr-2"}),"Add College"]})}),(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Create New College"}),(0,b.jsx)(o.DialogDescription,{children:"Add a new college to the database"})]}),(0,b.jsx)(ai,{onSave:a=>D.mutate(a),onCancel:()=>x(!1),isLoading:D.isPending})]})]})]})]}),C?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading colleges..."}):0===G.length?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:a?"No colleges match your search.":"No colleges found. Start by adding one!"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)(r,{children:[(0,b.jsx)(s,{children:(0,b.jsxs)(u,{children:[(0,b.jsx)(v,{children:"Name"}),(0,b.jsx)(v,{children:"Location"}),(0,b.jsx)(v,{children:"Type"}),(0,b.jsx)(v,{children:"Size"}),(0,b.jsx)(v,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(t,{children:G.map(a=>(0,b.jsxs)(u,{children:[(0,b.jsx)(w,{className:"font-medium",children:a.name}),(0,b.jsxs)(w,{children:[a.city,", ",a.state]}),(0,b.jsx)(w,{children:a.type?(0,b.jsx)(n.Badge,{variant:"secondary",children:a.type}):"-"}),(0,b.jsx)(w,{children:a.size||"-"}),(0,b.jsx)(w,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{p(a),z(!0)},disabled:E.isPending||F.isPending,children:(0,b.jsx)(Y.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{var b;return b=a.id,void(window.confirm("Are you sure you want to delete this college?")&&F.mutate(b))},disabled:F.isPending||E.isPending,className:"text-red-600 hover:text-red-700",children:(0,b.jsx)(X.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]})}),I>1&&(0,b.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>k(h-1),disabled:1===h||C,children:"Previous"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",h," of ",I]}),(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>k(h+1),disabled:h===I||C,children:"Next"})]})]}),(0,b.jsx)(o.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Edit College"}),(0,b.jsx)(o.DialogDescription,{children:"Update college information"})]}),m&&(0,b.jsx)(ai,{college:m,onSave:a=>E.mutate({id:m.id,data:a}),onCancel:()=>{z(!1),p(null)},isLoading:E.isPending})]})})]}),(0,b.jsx)(W,{value:"schools",children:(0,b.jsx)(ak,{})}),(0,b.jsx)(W,{value:"users",children:(0,b.jsx)(al,{})})]})})]})}function an(){let{user:a,isAdmin:e,isLoading:f}=(0,h.useAuth)(),g=(0,d.useRouter)();return((0,c.useEffect)(()=>{f||a&&e||g.push("/login")},[a,e,f,g]),f)?(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(_.Settings,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):a&&e?(0,b.jsx)(am,{}):null}a.s(["default",()=>an],10179)}];

//# sourceMappingURL=src_app_admin_page_tsx_645532da._.js.map